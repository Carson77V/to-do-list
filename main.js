(()=>{"use strict";let t=[];localStorage.getItem("projectTitles")?t=localStorage.getItem("projectTitles").split(","):localStorage.setItem("projectTitles",[]);const e={getTitle(){return this.title},setTitle(t){this.title=t},getDescription(){return this.description},setDescription(t){this.description=t},getDate(){return this.date},setDate(t){this.date=t},getPriority(){return this.priority},setPriority(t){this.priority=t},getProject(){return this.project},setProject(t){this.project=t},getId(){return this.id},setId(t){this.id=t}};function n(t,n,c,d,a){const u=document.createElement("div");u.classList.add("task-span"),u.classList.add("task-form"),u.id=a;const m=document.createElement("form");m.setAttribute("action",""),m.setAttribute("method","post");const p=document.createElement("div");p.classList.add("top-form-task");const h=document.createElement("input");h.setAttribute("type","text"),h.setAttribute("id","title-edit"),h.setAttribute("placeholder","Title"),h.setAttribute("name","title-edit"),h.setAttribute("maxlength","20"),h.value=t;const E=document.createElement("div"),v=document.createElement("label");v.textContent="Date: ",v.setAttribute("for","date");const b=document.createElement("input");b.setAttribute("type","date"),b.setAttribute("id","date"),b.setAttribute("name","date"),b.value=n,E.appendChild(v),E.appendChild(b),p.appendChild(h),p.appendChild(E),m.appendChild(p);const C=document.createElement("div");C.classList.add("textarea-div");const g=document.createElement("textarea");g.setAttribute("placeholder","Description"),g.value=c,C.appendChild(g),m.appendChild(C);const f=document.createElement("div");f.classList.add("lower-form-task");const y=document.createElement("div"),A=document.createElement("label");A.textContent="Priority: ",A.setAttribute("for","priority");const L=document.createElement("select");L.setAttribute("name","priority"),L.setAttribute("id","priority");for(let t=3;t>=1;t--)L.appendChild(i(t));L.value=d,y.appendChild(A),y.appendChild(L);const x=document.createElement("div"),k=document.createElement("button");k.textContent="Del",k.setAttribute("type","button"),k.addEventListener("click",(t=>{o(t)}));const S=document.createElement("button");return S.textContent="Save",S.setAttribute("type","button"),S.addEventListener("click",(t=>{!function(t){const n=t.srcElement.closest(".task-form"),i=n.querySelector("#title-edit").value,c=n.querySelector("#date").value,d=n.querySelector("textarea").value,o=n.querySelector("#priority").value;let a=n.id;"null"==n.id?(a=s.length,s.push(((t,n,i,s,c,r)=>{let d=Object.create(e);return d.title=t,d.description=i,d.date=n,d.priority=s,d.project=c,d.id=r,d})(i,c,d,o,l,a))):(s[+a].setTitle(i),s[+a].setDate(c),s[+a].setDescription(d),s[+a].setPriority(o)),r(l),n.remove()}(t)})),x.appendChild(k),x.appendChild(S),f.appendChild(y),f.appendChild(x),m.appendChild(f),u.appendChild(m),u}function i(t){const e=document.createElement("option");return e.textContent=t,e.setAttribute("value",t),e}let s=[];const c=document.querySelector(".add-task");function r(t){d();const e=s.filter((e=>"Today"==t?function(t){const e=new Date,n=t.split("-");return n[0]<e.getFullYear()||n[1]<e.getMonth()||n[2]<=e.getDate()}(e.getDate()):"Important"==t?1==e.getPriority():"All"==t||e.getProject()==t)),i=document.querySelector(".add-task"),c=document.querySelector("#tasks");e.forEach((t=>{const e=function(t,e,i,c){const r=document.createElement("div");r.classList.add("task"),r.classList.add("task-span"),r.id=i;const d=document.createElement("div"),l=document.createElement("div");d.classList.add("task-start"),l.classList.add("task-end");const a=document.createElement("span");a.classList.add("task-circle"),1==c?a.style.cssText="box-shadow: 0 0 5px rgb(255, 60, 20), inset 0 0 5px rgb(255, 60, 20)":2==c&&(a.style.cssText="box-Shadow: 0 0 5px #C9B400, inset 0 0 5px #C9B400"),a.addEventListener("click",(t=>{o(t)}));const u=document.createElement("div");u.classList.add("task-title"),u.textContent=t;const m=document.createElement("div");m.classList.add("task-date"),m.textContent=e;const p=document.createElement("img");return p.src="images/edit.svg",p.setAttribute("alt","edit button"),p.addEventListener("click",(t=>{!function(t){const e=t.srcElement.parentElement.parentElement,i=+e.id;e.insertAdjacentElement("afterend",n(s[i].getTitle(),s[i].getDate(),s[i].getDescription(),s[i].getPriority(),s[i].getId())),e.remove()}(t)})),l.appendChild(m),l.appendChild(p),d.appendChild(a),d.appendChild(u),r.appendChild(d),r.appendChild(l),r}(t.getTitle(),t.getDate(),t.getId(),t.getPriority());c.insertBefore(e,i)}))}function d(){document.querySelectorAll(".task-span").forEach((t=>{t.remove()}))}function o(t){const e=t.srcElement.parentElement.parentElement,n=+e.id;s.splice(n,1),e.remove();for(let t=0;t<s.length;t++)s[t].setId(t);d(),r(l)}c.addEventListener("click",(()=>{document.querySelector("#tasks").insertBefore(n(null,null,null,3,"null"),c)}));let l="All";document.querySelectorAll(".menu-item").forEach(h);const a=document.querySelector(".projects"),u=t;for(let t=0;t<u.length;t++)a.appendChild(m(u[t]));function m(e){const n=document.createElement("div");n.classList.add("menu-item");const i=document.createElement("div");i.textContent=e;const s=document.createElement("img");return s.setAttribute("src","./images/trash-2.svg"),s.setAttribute("alt","trash icon"),s.addEventListener("click",(e=>{!function(e){const n=t.indexOf(e);n>-1&&(t.splice(n,1),localStorage.setItem("projectTitles",t))}(e.srcElement.previousElementSibling.textContent),e.srcElement.closest(".menu-item").remove()})),n.appendChild(i),n.appendChild(s),h(n),n}function p(t){t.srcElement.closest(".menu-form").remove()}function h(t){t.addEventListener("click",(t=>{const e=document.querySelector(".menu-selected");null!=e&&e.classList.remove("menu-selected"),t.srcElement.classList.add("menu-selected"),l=t.srcElement.firstChild.textContent,r(l)}))}document.querySelector(".project-title > svg").addEventListener("click",(()=>{document.querySelector(".projects").appendChild(function(){const e=document.createElement("div");e.classList.add("menu-form");const n=document.createElement("form");n.setAttribute("action",""),n.setAttribute("method","post");const i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("id","project-title"),i.setAttribute("name","projectTitle"),i.setAttribute("maxlength","15");const s=document.createElement("div");s.classList.add("project-buttons");const c=document.createElement("button");c.classList.add("add-button"),c.setAttribute("type","button"),c.textContent="Add";const r=document.createElement("button");return r.classList.add("cancel-button"),r.setAttribute("type","button"),r.textContent="Cancel",c.addEventListener("click",(e=>{!function(e){const n=e.srcElement.closest(".menu-form"),i=n.firstChild.firstChild.value;var s;n.insertAdjacentElement("afterend",m(i)),s=i,t.push(s),localStorage.setItem("projectTitles",t),p(e)}(e)})),r.addEventListener("click",(t=>{p(t)})),s.appendChild(c),s.appendChild(r),n.appendChild(i),n.appendChild(s),e.appendChild(n),e}())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ekYsVUFBVUMsSUFBSSxtQkFHN0IsTUFBTXlGLEVBQVk1RixTQUFTQyxjQUFjLFVBQ3pDMkYsRUFBVTFGLFVBQVVDLElBQUksY0FDeEJ5RixFQUFVdkYsYUFBYSxPQUFRLFVBQy9CdUYsRUFBVWpGLFlBQWMsTUFFeEIsTUFBTWtGLEVBQWU3RixTQUFTQyxjQUFjLFVBd0I1QyxPQXZCQTRGLEVBQWEzRixVQUFVQyxJQUFJLGlCQUMzQjBGLEVBQWF4RixhQUFhLE9BQVEsVUFDbEN3RixFQUFhbEYsWUFBYyxTQUczQmlGLEVBQVVwRSxpQkFBaUIsU0FBVUMsS0FxQnpDLFNBQWNBLEdBRVYsTUFBTWdFLEVBQVdoRSxFQUFFRyxXQUFXQyxRQUFRLGNBR2hDaUUsRUFBWUwsRUFBU0QsV0FBV0EsV0FBV2hGLE1MeEdyRCxJQUFrQjNCLEVLMEdkNEcsRUFBU3BCLHNCQUFzQixXQUFZUyxFQUFlZ0IsSUwxRzVDakgsRUs0R0xpSCxFTDNHVHpILEVBQWM0RCxLQUFLcEQsR0FDbkJQLGFBQWFHLFFBQVEsZ0JBQWlCSixHSzZHdENpSCxFQUFPN0QsRUFDWCxDQWpDUSxDQUFLQSxFQUFDLElBRVZvRSxFQUFhckUsaUJBQWlCLFNBQVVDLElBQ3BDNkQsRUFBTzdELEVBQUMsSUFJWmtFLEVBQWU5RSxZQUFZK0UsR0FDM0JELEVBQWU5RSxZQUFZZ0YsR0FHM0J6RixFQUFLUyxZQUFZNkUsR0FDakJ0RixFQUFLUyxZQUFZOEUsR0FHakJGLEVBQVM1RSxZQUFZVCxHQUVkcUYsQ0FDWCxDQXRGd0JNLEdBQVksRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvanMtbW9kdWxlcy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL2pzLW1vZHVsZXMvdGFzay1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9qcy1tb2R1bGVzL3Rhc2stZWRpdC1kb20uanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9qcy1tb2R1bGVzL3Rhc2stY29udHJvbC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL2pzLW1vZHVsZXMvdGFzay1kb20uanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9qcy1tb2R1bGVzL3Byb2plY3RzLWNvbnRyb2wuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY3JlYXRlIGFycmF5IGZvciBwcm9ncmFtIHRvIHJ1biBvZmZcbmxldCBwcm9qZWN0VGl0bGVzID0gW11cblxuLy8gY2hlY2sgaWYgdGhlcmUgaXMgYW55IGxvY2Fsc3RvcmFnZSwgaWYgbm90IGNyZWF0ZSBuZXcgYXJyYXkgaW4gbG9jYWxzdG9yYWdlXG5pZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0VGl0bGVzJykpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdFRpdGxlcycsIFtdKVxuICB9IGVsc2Uge1xuICAgIC8vIGxvYWQgbG9jYWxTdG9yYWdlIGRhdGEgaW50byBtZW1vcnlcbiAgICBwcm9qZWN0VGl0bGVzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2plY3RUaXRsZXMnKS5zcGxpdCgnLCcpXG4gIH1cblxuZnVuY3Rpb24gYWRkVGl0bGUodGl0bGUpIHtcbiAgICBwcm9qZWN0VGl0bGVzLnB1c2godGl0bGUpXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RUaXRsZXMnLCBwcm9qZWN0VGl0bGVzKVxufVxuXG5mdW5jdGlvbiBnZXRUaXRsZXMoKSB7XG4gICAgcmV0dXJuIHByb2plY3RUaXRsZXM7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZVRpdGxlKHRpdGxlKSB7XG4gICAgY29uc3QgaW5kZXggPSBwcm9qZWN0VGl0bGVzLmluZGV4T2YodGl0bGUpO1xuICAgIGlmIChpbmRleCA+IC0xKSB7IC8vIG9ubHkgc3BsaWNlIGFycmF5IHdoZW4gaXRlbSBpcyBmb3VuZFxuICAgICAgICBwcm9qZWN0VGl0bGVzLnNwbGljZShpbmRleCwgMSk7IC8vIDJuZCBwYXJhbWV0ZXIgbWVhbnMgcmVtb3ZlIG9uZSBpdGVtIG9ubHlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RUaXRsZXMnLCBwcm9qZWN0VGl0bGVzKVxuICAgIH1cbn1cblxuZXhwb3J0IHthZGRUaXRsZSwgZ2V0VGl0bGVzLCBkZWxldGVUaXRsZX07XG4iLCIvLyBmYWN0b3J5IGZ1bmN0aW9uIHVzZWQgdG8gY29uc3RydWN0IHRhc2sgb2JqZWN0XG5leHBvcnQgY29uc3QgdGFzayA9ICh0aXRsZSwgZGF0ZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBwcm9qZWN0LCBpZCkgPT4ge1xuICAgIGxldCBvYmogPSBPYmplY3QuY3JlYXRlKHRhc2tQcm90bylcbiAgICBvYmoudGl0bGUgPSB0aXRsZVxuICAgIG9iai5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uXG4gICAgb2JqLmRhdGUgPSBkYXRlXG4gICAgb2JqLnByaW9yaXR5ID0gcHJpb3JpdHlcbiAgICAvLyB2YXJpYWJsZSB1c2VkIHRvIGRldGVybWluZSB3aGF0IHByb2plY3QgdGhlIHRhc2sgaXMgaW5cbiAgICBvYmoucHJvamVjdCA9IHByb2plY3RcbiAgICBvYmouaWQgPSBpZFxuICAgIHJldHVybiBvYmpcbn1cblxuLy9HcmVhdCBwcm90b3R5cGUgZm9yIHRhc2soKSB0byBzdG9yZSBhbGwgdGhlIG1ldGhvZHMgZm9yIHByb2dyYW0gdG8gcnVuIGZhc3RlclxuY29uc3QgdGFza1Byb3RvID0ge1xuICAgIC8vIGNyZWF0ZSBhbGwgZ2V0dGVycyBhbmQgc2V0dGVycyAob25seSBmb3IgbWVtb3J5IHVzZSlcbiAgICBnZXRUaXRsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGl0bGVcbiAgICB9LFxuICAgIHNldFRpdGxlKHRpdGxlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZVxuICAgIH0sXG4gICAgZ2V0RGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uXG4gICAgfSxcbiAgICBzZXREZXNjcmlwdGlvbihkZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb25cbiAgICB9LFxuICAgIGdldERhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVcbiAgICB9LFxuICAgIHNldERhdGUoZGF0ZSkge1xuICAgICAgICB0aGlzLmRhdGUgPSBkYXRlXG4gICAgfSxcbiAgICBnZXRQcmlvcml0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpb3JpdHlcbiAgICB9LFxuICAgIHNldFByaW9yaXR5KHByaW9yaXR5KSB7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eVxuICAgIH0sXG4gICAgZ2V0UHJvamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdFxuICAgIH0sXG4gICAgc2V0UHJvamVjdChwcm9qZWN0KSB7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3RcbiAgICB9LFxuICAgIGdldElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pZFxuICAgIH0sXG4gICAgc2V0SWQoaWQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkXG4gICAgfSxcbn1cblxuIiwiaW1wb3J0IHsgc2F2ZSB9IGZyb20gJy4vdGFzay1jb250cm9sLmpzJ1xuaW1wb3J0IHsgZGVsVGFzayB9IGZyb20gJy4vdGFzay1jb250cm9sLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVUYXNrRWRpdCAodGl0bGUsIGRhdGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgaWQpIHtcbiAgICAvL2NyZWF0ZSBkaXYgdG8gaG9sZCBhbGwgdGhlIGVsZW1lbnRzXG4gICAgY29uc3QgdGFza0Zvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRhc2tGb3JtLmNsYXNzTGlzdC5hZGQoJ3Rhc2stc3BhbicpXG4gICAgdGFza0Zvcm0uY2xhc3NMaXN0LmFkZCgndGFzay1mb3JtJylcbiAgICB0YXNrRm9ybS5pZCA9IGlkXG5cbiAgICAvL2NyZWF0ZSB0aGUgZm9ybSBcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpXG4gICAgZm9ybS5zZXRBdHRyaWJ1dGUoJ2FjdGlvbicsICcnKVxuICAgIGZvcm0uc2V0QXR0cmlidXRlKCdtZXRob2QnLCAncG9zdCcpXG5cbiAgICAvL3N0YXJ0IGJ5IGNyZWF0aW5nIGVsZW1lbnRzIGZvciB0aGUgdG9wIG9mIHRoZSBmb3JtXG4gICAgLy90aGUgdGl0bGUgYW5kIGRhdGUgYXJlIGlubGN1ZGVkIGhlcmVcbiAgICBjb25zdCB0b3BFZGl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0b3BFZGl0LmNsYXNzTGlzdC5hZGQoJ3RvcC1mb3JtLXRhc2snKVxuXG4gICAgLy9pbnB1dCBmb3IgdGhlIHRpdGxlXG4gICAgY29uc3QgZWRpdFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKVxuICAgIGVkaXRUaXRsZS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpXG4gICAgZWRpdFRpdGxlLnNldEF0dHJpYnV0ZSgnaWQnLCAndGl0bGUtZWRpdCcpXG4gICAgZWRpdFRpdGxlLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAnVGl0bGUnKVxuICAgIGVkaXRUaXRsZS5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAndGl0bGUtZWRpdCcpXG4gICAgZWRpdFRpdGxlLnNldEF0dHJpYnV0ZSgnbWF4bGVuZ3RoJywgJzIwJylcbiAgICBlZGl0VGl0bGUudmFsdWUgPSB0aXRsZSBcblxuICAgIC8vaW5wdXQgZm9yIHRoZSBkYXRlXG4gICAgY29uc3QgZGF0ZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgY29uc3QgZGF0ZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKVxuICAgIGRhdGVMYWJlbC50ZXh0Q29udGVudCA9ICdEYXRlOiAnXG4gICAgZGF0ZUxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJ2RhdGUnKVxuICAgICBcbiAgICBjb25zdCBpbnB1dERhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgaW5wdXREYXRlLnNldEF0dHJpYnV0ZSgndHlwZScsICdkYXRlJylcbiAgICBpbnB1dERhdGUuc2V0QXR0cmlidXRlKCdpZCcsICdkYXRlJylcbiAgICBpbnB1dERhdGUuc2V0QXR0cmlidXRlKCduYW1lJywgJ2RhdGUnKVxuICAgIGlucHV0RGF0ZS52YWx1ZSA9IGRhdGUgXG5cbiAgICAvL2FwcGVuZCB0aGUgdG9wIHRvZ2V0aGVyIGFuZCBhZGQgaXQgdG8gdGhlIGZ1bGwgZm9ybVxuICAgIGRhdGVEaXYuYXBwZW5kQ2hpbGQoZGF0ZUxhYmVsKVxuICAgIGRhdGVEaXYuYXBwZW5kQ2hpbGQoaW5wdXREYXRlKVxuXG4gICAgdG9wRWRpdC5hcHBlbmRDaGlsZChlZGl0VGl0bGUpXG4gICAgdG9wRWRpdC5hcHBlbmRDaGlsZChkYXRlRGl2KVxuXG4gICAgZm9ybS5hcHBlbmRDaGlsZCh0b3BFZGl0KVxuXG4gICAgLy9jcmVhdGUgdGhlIHRleHRhcmVhXG4gICAgY29uc3QgdGV4dEFyZWFEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRleHRBcmVhRGl2LmNsYXNzTGlzdC5hZGQoJ3RleHRhcmVhLWRpdicpXG5cbiAgICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJylcbiAgICB0ZXh0QXJlYS5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ0Rlc2NyaXB0aW9uJylcbiAgICB0ZXh0QXJlYS52YWx1ZSA9IGRlc2NyaXB0aW9uIFxuXG4gICAgdGV4dEFyZWFEaXYuYXBwZW5kQ2hpbGQodGV4dEFyZWEpXG4gICAgZm9ybS5hcHBlbmRDaGlsZCh0ZXh0QXJlYURpdilcblxuICAgIC8vY3JlYXRlIHRoZSBib3R0b20gb2YgdGhlIGZvcm1cbiAgICBjb25zdCBsb3dlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgbG93ZXJEaXYuY2xhc3NMaXN0LmFkZCgnbG93ZXItZm9ybS10YXNrJylcblxuICAgIGNvbnN0IGVuY29tcGFzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICAgIGNvbnN0IHByaW9yaXR5TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpXG4gICAgcHJpb3JpdHlMYWJlbC50ZXh0Q29udGVudCA9ICdQcmlvcml0eTogJ1xuICAgIHByaW9yaXR5TGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCAncHJpb3JpdHknKVxuXG4gICAgY29uc3QgcHJpb3JpdHlTZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKVxuICAgIHByaW9yaXR5U2VsZWN0LnNldEF0dHJpYnV0ZSgnbmFtZScsICdwcmlvcml0eScpXG4gICAgcHJpb3JpdHlTZWxlY3Quc2V0QXR0cmlidXRlKCdpZCcsICdwcmlvcml0eScpXG5cbiAgICAvL3VzZSBhIGxvb3AgdG8gYWRkIDMgb3B0aW9ucyB0byB0aGUgRE9NXG4gICAgZm9yIChsZXQgaSA9IDM7IGkgPj0gMTsgaS0tKSB7XG4gICAgICAgIC8vdXNlIGEgZnVuY3Rpb24gdG8gcmV0dXJuIHRoZSBET00gb3B0aW9uIGVsZW1lbnRcbiAgICAgICAgcHJpb3JpdHlTZWxlY3QuYXBwZW5kQ2hpbGQoY3JlYXRlT3B0aW9uKGkpKVxuICAgIH1cbiAgICAvLyBhZnRlciBjcmVhdGluZyBvcHRpb25zLCBnaXZlIHZhbHVlIHRvIHByaW9yaXR5U2VsZWN0XG4gICAgcHJpb3JpdHlTZWxlY3QudmFsdWUgPSBwcmlvcml0eSBcblxuICAgIC8vYXBwZW5kIHRoZSBwcmlvcml0eSBlbGVtZW50cyB0byB0aGUgZGl2XG4gICAgZW5jb21wYXNEaXYuYXBwZW5kQ2hpbGQocHJpb3JpdHlMYWJlbClcbiAgICBlbmNvbXBhc0Rpdi5hcHBlbmRDaGlsZChwcmlvcml0eVNlbGVjdClcblxuICAgIC8vIGNyZWF0ZSB0aGUgU2F2ZSBhbmQgRGVsZXRlIGJ1dHRvbnMgaW4gdGhlaXIgb3duIGRpdlxuICAgIGNvbnN0IGJ1dHRvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICBjb25zdCBkZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgIGRlbEJ1dHRvbi50ZXh0Q29udGVudCA9ICdEZWwnXG4gICAgZGVsQnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKVxuICAgIGRlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7ZGVsVGFzayhlKX0pXG5cbiAgICBjb25zdCBzYXZlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICBzYXZlQnV0dG9uLnRleHRDb250ZW50ID0gJ1NhdmUnXG4gICAgc2F2ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJylcbiAgICBzYXZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtzYXZlKGUpfSlcblxuICAgIGJ1dHRvbkRpdi5hcHBlbmRDaGlsZChkZWxCdXR0b24pXG4gICAgYnV0dG9uRGl2LmFwcGVuZENoaWxkKHNhdmVCdXR0b24pXG5cbiAgICAvLyBhcHBlbmQgdGhlIGxvd2VyIGVsZW1lbnRzIFxuICAgIGxvd2VyRGl2LmFwcGVuZENoaWxkKGVuY29tcGFzRGl2KVxuICAgIGxvd2VyRGl2LmFwcGVuZENoaWxkKGJ1dHRvbkRpdilcbiAgICAvL2FwcGVuZCB0aGUgbG93ZXIgZGl2IHRvIHRoZSBmb3JtXG4gICAgZm9ybS5hcHBlbmRDaGlsZChsb3dlckRpdilcbiAgICAvL2FwcGVuZCBmb3JtIHRvIHRoZSB0YXNrIGRpdlxuICAgIHRhc2tGb3JtLmFwcGVuZENoaWxkKGZvcm0pXG5cbiAgICByZXR1cm4gdGFza0Zvcm1cbn1cblxuLy8gY3JlYXRlcyBvcHRpb25zIGZvciB0aGUgcHJpb3JpdHkgZWxlbWVudFxuZnVuY3Rpb24gY3JlYXRlT3B0aW9uIChpKSB7XG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJylcbiAgICBvcHRpb24udGV4dENvbnRlbnQgPSBpXG4gICAgb3B0aW9uLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBpKVxuICAgIHJldHVybiBvcHRpb25cbn1cblxuIiwiaW1wb3J0IHsgdGFzayB9IGZyb20gJy4vdGFzay1vYmplY3QuanMnXG5pbXBvcnQgY3JlYXRlVGFzayBmcm9tICcuL3Rhc2stZG9tLmpzJ1xuaW1wb3J0IGNyZWF0ZVRhc2tFZGl0IGZyb20gJy4vdGFzay1lZGl0LWRvbS5qcydcbmltcG9ydCB7IG1lbnVTZWxlY3RlZCBhcyBtZW51U2VsZWN0ZWR9IGZyb20gJy4vcHJvamVjdHMtY29udHJvbC5qcydcblxuLy8gY3JlYXRlIGFuIGFycmF5IHRvIHN0b3JlIGFsbCB0aGUgdGFza3NcbmxldCBhbGxUYXNrcyA9IFtdXG5cbi8vYWRkIGV2ZW50IGxpc3RlbmVyIHRvICtBZGQgVGFzayBidXR0b25cbmNvbnN0IGFkZFRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRhc2snKVxuYWRkVGFzay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAvLyBOZWVkIHRvIHB1dCBhIHRhc2stZWRpdCBhYm92ZSArQWRkIFRhc2tcbiAgICBjb25zdCB0YXNrc0RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YXNrcycpXG4gICAgdGFza3NEaXYuaW5zZXJ0QmVmb3JlKGNyZWF0ZVRhc2tFZGl0KG51bGwsIG51bGwsIG51bGwsIDMsICdudWxsJyksIGFkZFRhc2spXG59KVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyVGFza3MgKG1lbnVTZWxlY3RlZCkge1xuICAgIC8vIGZpcnN0IHJlbW92ZSB0aGUgY3VycmVudCB0YXNrc1xuICAgIHJlbW92ZVRhc2tzKClcblxuICAgIC8vIGNyZWF0ZSBhIG5ldyBhcnJheSB0aGF0IGhvbGRzIG9ubHkgdGhlIHJlcXVpcmVkIHRhc2tzIGZyb20gdGhlIHByb2plY3RcbiAgICBjb25zdCBuZXdBcnJheSA9IGFsbFRhc2tzLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgaWYgKG1lbnVTZWxlY3RlZCA9PSBcIlRvZGF5XCIpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0R1ZVRvZGF5KGl0ZW0uZ2V0RGF0ZSgpKVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1lbnVTZWxlY3RlZCA9PSBcIkltcG9ydGFudFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS5nZXRQcmlvcml0eSgpID09IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWVudVNlbGVjdGVkID09IFwiQWxsXCIpIHtyZXR1cm4gdHJ1ZX1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS5nZXRQcm9qZWN0KCkgPT0gbWVudVNlbGVjdGVkOyBcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vIFNlbGVjdCB0aGUgYWRkIHRhc2sgXG4gICAgY29uc3QgYWRkVGFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdGFzaycpXG4gICAgLy8gc2VsZWN0IHRhc2tzIGRpdlxuICAgIGNvbnN0IHRhc2tzRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2tzJylcbiAgICAvL2xvb3AgdGhyb3VnaCB0aGUgbmV3IGFycmF5IGFuZCByZW5kZXIgdGhlIHRhc2tzXG4gICAgbmV3QXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAvLyBhZGQgbmV3IGVsZW1lbnRzIGJlZm9yZSArIEFkZCBUYXNrXG4gICAgICAgIGNvbnN0IGVsZSA9IGNyZWF0ZVRhc2soaXRlbS5nZXRUaXRsZSgpLCBpdGVtLmdldERhdGUoKSwgaXRlbS5nZXRJZCgpLCBpdGVtLmdldFByaW9yaXR5KCkpXG4gICAgICAgIHRhc2tzRGl2Lmluc2VydEJlZm9yZShlbGUsIGFkZFRhc2spXG4gICAgfSlcbn1cblxuLy8gd2hlbiByZW5kZXJUYXNrcygpIGlzIGNhbGxlZCwgdXNlIHRoaXMgZnVuY3Rpb24gdG8gZGVsZXRlIHRoZSBjdXJyZW50IHRhc2tzXG5mdW5jdGlvbiByZW1vdmVUYXNrcyAoKSB7XG4gICAgLy8gY3JlYXRlIG5vZGUgbGlzdHMgb2YgYWxsIGN1cnJlbnQgdGFza3MgaW4gdGhlIERPTVxuICAgIGNvbnN0IGFsbFRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhc2stc3BhbicpXG4gICAgLy8gcmVtb3ZlIGVhY2ggdGFza1xuICAgIGFsbFRhc2tzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgaXRlbS5yZW1vdmUoKVxuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2F2ZSAoZSkge1xuICAgIC8vIGdldCB0aGUgc3JjIGVsZW1lbnQgYW5kIHRoZW4gdGhlIGRpdiBjb250YWluaW5nIGluZm9cbiAgICBjb25zdCBidXR0b24gPSBlLnNyY0VsZW1lbnRcbiAgICBjb25zdCBmb3JtID0gYnV0dG9uLmNsb3Nlc3QoJy50YXNrLWZvcm0nKVxuICAgIC8vIGdhdGhlciBhbGwgcmVxdWlyZWQgaW5mbyB0byBidWlsZCBhIG5ldyB0YXNrIG9iamVjdFxuICAgIGNvbnN0IHRpdGxlID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcjdGl0bGUtZWRpdCcpLnZhbHVlXG4gICAgY29uc3QgZGF0ZSA9IGZvcm0ucXVlcnlTZWxlY3RvcignI2RhdGUnKS52YWx1ZVxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZm9ybS5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpLnZhbHVlXG4gICAgY29uc3QgcHJpb3JpdHkgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpLnZhbHVlXG4gICAgLy8gZ2V0IGlkIGluZGV4IG9mIGZvcm1cbiAgICBsZXQgaWQgPSBmb3JtLmlkXG4gICAgaWYgKGZvcm0uaWQgPT0gJ251bGwnKSB7XG4gICAgICAgIGlkID0gYWxsVGFza3MubGVuZ3RoXG4gICAgICAgIGFsbFRhc2tzLnB1c2godGFzayh0aXRsZSwgZGF0ZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBtZW51U2VsZWN0ZWQsIGlkKSlcbiAgICB9XG4gICAgLy8gaWYgbm90IGEgbmV3IHRhc2ssIG1ha2UgY2hhbmdlcyB0byBkYXRhXG4gICAgZWxzZSB7XG4gICAgICAgIGFsbFRhc2tzWytpZF0uc2V0VGl0bGUodGl0bGUpXG4gICAgICAgIGFsbFRhc2tzWytpZF0uc2V0RGF0ZShkYXRlKVxuICAgICAgICBhbGxUYXNrc1sraWRdLnNldERlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKVxuICAgICAgICBhbGxUYXNrc1sraWRdLnNldFByaW9yaXR5KHByaW9yaXR5KVxuICAgIH1cbiAgICAvLyByZW5kZXIgdGhlIG5ldyB0YXNrc1xuICAgIC8vIG90aGVyIHRhc2sgZm9ybSBvbiBwYWdlIHdpbGwgYmUgcmVtb3ZlZFxuICAgIHJlbmRlclRhc2tzKG1lbnVTZWxlY3RlZClcbiAgICAvLyByZW1vdmUgdGhlIGZvcm1cbiAgICBmb3JtLnJlbW92ZSgpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxUYXNrKGUpIHtcbiAgICAvLyBnZXQgdGhlIHBhcmVudCBlbGVtZW50XG4gICAgY29uc3QgcGFyZW50ID0gZS5zcmNFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudFxuICAgIC8vIHVzZSB0aGUgZnVuY3Rpb24gdG8gZmluZCB0aGUgaW5kZXggb2YgdGhlIGFycmF5IHdoZXJlIHRoZSB0YXNrIGlzIHNhdmVkXG4gICAgY29uc3QgaSA9ICsocGFyZW50LmlkKVxuICAgIC8vIGRlbGV0ZXMgdGhlIG9iamVjdCBmcm9tIHRoZSBhcnJheVxuICAgIGFsbFRhc2tzLnNwbGljZShpLCAxKVxuICAgIC8vIHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHRoZSBET01cbiAgICBwYXJlbnQucmVtb3ZlKClcbiAgICAvLyByZS1hc3NpZ24gdGhlIGlkJ3MgZm9yIGVhY2ggdGFza1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsVGFza3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYWxsVGFza3NbaV0uc2V0SWQoaSlcbiAgICB9XG4gICAgcmVtb3ZlVGFza3MoKVxuICAgIHJlbmRlclRhc2tzKG1lbnVTZWxlY3RlZClcbn1cblxuLy8gd2lsbCBvcGVuIGFuIGVkaXQgZm9ybSBmb3IgdGhlIHRhc2tcbmV4cG9ydCBmdW5jdGlvbiBlZGl0VGFzayhlKSB7XG4gICAgLy8gZ2V0IHRoZSBwYXJlbnQgZWxlbWVudFxuICAgIGNvbnN0IHBhcmVudCA9IGUuc3JjRWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnRcbiAgICAvLyBmaW5kIHRoZSB0YXNrIGluIHRoZSBhbGxUYXNrcyBhcnJheVxuICAgIGNvbnN0IGkgPSArKHBhcmVudC5pZClcbiAgICAvLyBvcGVuIHRoZSBlZGl0IHdpbmRvdyBiZWxvdyB0aGUgdGFza3MgdGhlbiBkZWxldGUgdGhlIHRhc2tcbiAgICAvLyBsZWF2ZSBlZGl0IG1lbnUgb3BlblxuICAgIHBhcmVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgXG4gICAgY3JlYXRlVGFza0VkaXQoYWxsVGFza3NbaV0uZ2V0VGl0bGUoKSwgYWxsVGFza3NbaV0uZ2V0RGF0ZSgpLCBcbiAgICBhbGxUYXNrc1tpXS5nZXREZXNjcmlwdGlvbigpLCBhbGxUYXNrc1tpXS5nZXRQcmlvcml0eSgpLCBhbGxUYXNrc1tpXS5nZXRJZCgpKSlcbiAgICBwYXJlbnQucmVtb3ZlKClcbn1cblxuLy8gZnVuY3RpbiByZXR1cm5zIHRydWUgaWYgdGhlIGR1ZSBkYXRlIGlzIHRvZGF5IG9yIGZyb20gdGhlIHBhc3RcbmZ1bmN0aW9uIGlzRHVlVG9kYXkgKGRhdGUpIHtcbiAgICAvLyBjcmVhdGUgdG9kYXkncyBkYXRlXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgLy8gc3BsaXQgdGhlIGRhdGUgZnJvbSB0aGUgdGFzayBpbnRvIGEgbmV3IGFycmF5XG4gICAgY29uc3QgY3VycmVudERhdGVzID0gZGF0ZS5zcGxpdCgnLScpXG4gICAgLy8gaWYgdGhlIHllYXIgaXMgbGVzcyB0aGFuIGN1cnJlbnQgeWVhciByZXR1cm4gdHJ1ZVxuICAgIGlmIChjdXJyZW50RGF0ZXNbMF0gPCB0b2RheS5nZXRGdWxsWWVhcigpKSByZXR1cm4gdHJ1ZTtcbiAgICAvLyBpZiBtb250aCBpcyBtb250aCBpcyBsZXNzIHRoYW4gY3VycmVudCByZXR1cm4gdHJ1ZVxuICAgIGlmIChjdXJyZW50RGF0ZXNbMV0gPCB0b2RheS5nZXRNb250aCgpKSByZXR1cm4gdHJ1ZTtcbiAgICAvLyBpZiBkYXkgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGN1cnJlbnQgZGF5IHJldHVybiB0cnVlXG4gICAgaWYgKGN1cnJlbnREYXRlc1syXSA8PSB0b2RheS5nZXREYXRlKCkpIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIGZhbHNlXG59XG5cbi8vIGZ1bmN0aW9uIGdldFRhc2tWYXJzIChwYXJlbnQpIHtcbi8vICAgICAvLyBnZXQgdGhlIHRpdGxlIGFuZCBkYXRlXG4vLyAgICAgY29uc3QgdGl0bGUgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLnRhc2stdGl0bGUnKS50ZXh0Q29udGVudFxuLy8gICAgIGNvbnN0IGRhdGUgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLnRhc2stZGF0ZScpLnRleHRDb250ZW50XG5cbi8vICAgICAvLyByZXR1cm4gdGl0bGUgYW5kIGRhdGUgYXMgYSBzdHJpbmdcbi8vICAgICByZXR1cm4gdGl0bGUgKyAnLicgKyBkYXRlXG4vLyB9IiwiaW1wb3J0IHsgZGVsVGFzaywgZWRpdFRhc2sgfSBmcm9tIFwiLi90YXNrLWNvbnRyb2wuanNcIlxuXG4vLyBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0YXNrIGZvciB0aGUgRE9NXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVUYXNrICh0aXRsZSwgZGF0ZSwgaWQsIHByaW9yaXR5KSB7XG4gICAgLy9jcmVhdGUgZGVmYXVsdCBkaXYgdG8gaG9sZCBhbGwgdGhlIGluZm9cbiAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0YXNrRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2snKVxuICAgIHRhc2tEaXYuY2xhc3NMaXN0LmFkZCgndGFzay1zcGFuJylcbiAgICB0YXNrRGl2LmlkID0gaWRcblxuICAgIC8vY3JlYXRlIHR3byBoYWx2ZXMgZm9yIHRoZSBkaXYgXG4gICAgY29uc3QgdGFza1N0YXJ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBjb25zdCB0YXNrRW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0YXNrU3RhcnQuY2xhc3NMaXN0LmFkZCgndGFzay1zdGFydCcpXG4gICAgdGFza0VuZC5jbGFzc0xpc3QuYWRkKCd0YXNrLWVuZCcpXG5cbiAgICAvL2NyZWF0ZSBidXR0b24gdG8gY29tcGxldGUgdGFza1xuICAgIGNvbnN0IGNoZWNrQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXG4gICAgY2hlY2tCdXR0b24uY2xhc3NMaXN0LmFkZCgndGFzay1jaXJjbGUnKVxuICAgIGlmIChwcmlvcml0eSA9PSAxKXtcbiAgICAgICAgY2hlY2tCdXR0b24uc3R5bGUuY3NzVGV4dCA9ICdib3gtc2hhZG93OiAwIDAgNXB4IHJnYigyNTUsIDYwLCAyMCksIGluc2V0IDAgMCA1cHggcmdiKDI1NSwgNjAsIDIwKSdcbiAgICB9XG4gICAgZWxzZSBpZiAocHJpb3JpdHkgPT0gMil7XG4gICAgICAgIGNoZWNrQnV0dG9uLnN0eWxlLmNzc1RleHQgPSAnYm94LVNoYWRvdzogMCAwIDVweCAjQzlCNDAwLCBpbnNldCAwIDAgNXB4ICNDOUI0MDAnXG4gICAgfVxuICAgIGNoZWNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtkZWxUYXNrKGUpfSlcblxuICAgIC8vY3JlYXRlIGRpdiB0byBob2xkIHRpdGxlIG9mIHRhc2tcbiAgICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QuYWRkKCd0YXNrLXRpdGxlJylcbiAgICB0YXNrVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZVxuXG4gICAgLy9jcmVhdGUgZGl2IHRvIGhvbGQgdGhlIGRhdGVcbiAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGFza0RhdGUuY2xhc3NMaXN0LmFkZCgndGFzay1kYXRlJylcbiAgICB0YXNrRGF0ZS50ZXh0Q29udGVudCA9IGRhdGVcblxuICAgIC8vY3JlYXRlIHRoZSBlZGl0IGJ1dHRvbi9pbWdcbiAgICBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcbiAgICBlZGl0QnV0dG9uLnNyYyA9ICdpbWFnZXMvZWRpdC5zdmcnXG4gICAgZWRpdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FsdCcsICdlZGl0IGJ1dHRvbicpXG4gICAgZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7ZWRpdFRhc2soZSl9KVxuXG4gICAgLy8gQXBwZW5kIGFsbCBlbGVtZW50cyB0b2dldGhlclxuICAgIHRhc2tFbmQuYXBwZW5kQ2hpbGQodGFza0RhdGUpXG4gICAgdGFza0VuZC5hcHBlbmRDaGlsZChlZGl0QnV0dG9uKVxuXG4gICAgdGFza1N0YXJ0LmFwcGVuZENoaWxkKGNoZWNrQnV0dG9uKVxuICAgIHRhc2tTdGFydC5hcHBlbmRDaGlsZCh0YXNrVGl0bGUpXG5cbiAgICB0YXNrRGl2LmFwcGVuZENoaWxkKHRhc2tTdGFydClcbiAgICB0YXNrRGl2LmFwcGVuZENoaWxkKHRhc2tFbmQpXG5cbiAgICByZXR1cm4gdGFza0RpdlxufSIsImltcG9ydCB7IGFkZFRpdGxlLCBnZXRUaXRsZXMsIGRlbGV0ZVRpdGxlfSBmcm9tIFwiLi9wcm9qZWN0c1wiXG5pbXBvcnQgeyByZW5kZXJUYXNrcyB9IGZyb20gXCIuL3Rhc2stY29udHJvbC5qc1wiXG5cbi8vIHZhcmlhYmxlIHVzZWQgdG8ga2VlcCB0cmFjayBvZiB3aGljaCBtZW51IGl0ZW0gaXMgc2VsZWN0ZWRcbmV4cG9ydCBsZXQgbWVudVNlbGVjdGVkID0gJ0FsbCdcblxuLy9BZGQgZXZlbnRzIHRvIHRoZSBkZWZhdWx0IG1lbnUgb3B0aW9uc1xuY29uc3QgbWVudUl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtaXRlbScpXG5tZW51SXRlbXMuZm9yRWFjaChhZGRNZW51SXRlbUV2ZW50KVxuXG4vLyBMb2FkIGxvY2FsU3RvcmFnZSBkYXRhIGludG8gdGhlIERPTVxuY29uc3QgbWVudVRpdGxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cycpXG5jb25zdCBhcnJheSA9IGdldFRpdGxlcygpXG5mb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgbWVudVRpdGxlcy5hcHBlbmRDaGlsZChjcmVhdGVNZW51SXRlbShhcnJheVtpXSkpXG59XG5cbi8vIEV2ZW50IGxpc3RlbmVyIGZvciB0aGUgXCIrXCIgYnV0dG9uIGJlc2lkZSBwcm9qZWN0IHRpdGxlXG5jb25zdCBwbHVzQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtdGl0bGUgPiBzdmcnKVxucGx1c0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAvL0NhbGxzIGZ1bmN0aW9uIHRvIGFkZCB0aGUgcHJvamVjdCBmb3JtIHRvIHRoZSBET01cbiAgICBjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzJylcbiAgICBwcm9qZWN0LmFwcGVuZENoaWxkKGNyZWF0ZUZvcm0oKSlcblxufSlcblxuLy8gUmV0dXJucyB0aGUgRE9NIGVsZW1lbnQgb2YgYSBtZW51LWl0ZW0gXG4vLyBhIHNpbXBsZSBwcm9qZWN0IGlzIGFkZGVkIHRvIHRoZSBsaXN0IG9uIHRoZSBET01cbmZ1bmN0aW9uIGNyZWF0ZU1lbnVJdGVtKHRpdGxlKSB7XG4gICAgLy8gIGNyZWF0ZSB0aGUgbWVudS1pdGVtIGRpdiB0byBob2xkIHRoZSBlbGVtZW50c1xuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoJ21lbnUtaXRlbScpXG4gICAgLy8gY3JlYXRlIHRoZSB0aXRsZSBkaXZcbiAgICBjb25zdCB0aXRsZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGl0bGVEaXYudGV4dENvbnRlbnQgPSB0aXRsZVxuICAgIC8vIGNyZWF0ZSB0aGUgdHJhc2ggYmluIGltZ1xuICAgIGNvbnN0IHRyYXNoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcbiAgICB0cmFzaC5zZXRBdHRyaWJ1dGUoJ3NyYycsICcuL2ltYWdlcy90cmFzaC0yLnN2ZycpXG4gICAgdHJhc2guc2V0QXR0cmlidXRlKCdhbHQnLCAndHJhc2ggaWNvbicpXG5cbiAgICAvLyBhZGQgZXZlbnRsaXN0ZW5lciB0byB0cmFzaCBpY29uXG4gICAgdHJhc2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBkZWxldGVUaXRsZShlLnNyY0VsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZy50ZXh0Q29udGVudClcbiAgICAgICAgZS5zcmNFbGVtZW50LmNsb3Nlc3QoJy5tZW51LWl0ZW0nKS5yZW1vdmUoKVxuICAgIH0pXG5cbiAgICAvLyBhcHBlbmQgdGhlIHR3byBjaGlsZHJlblxuICAgIGRpdi5hcHBlbmRDaGlsZCh0aXRsZURpdilcbiAgICBkaXYuYXBwZW5kQ2hpbGQodHJhc2gpXG5cbiAgICBhZGRNZW51SXRlbUV2ZW50KGRpdilcbiAgICBcbiAgICByZXR1cm4gZGl2XG59XG5cbi8vIHJldHVybnMgYSBmb3JtIGZvciBET00gdG8gYmUgdXNlZCB0byBjcmVhdGUgYSBuZXcgcHJvamVjdFxuZnVuY3Rpb24gY3JlYXRlRm9ybSgpIHtcbiAgICAvLyBjcmVhdGUgdGhlIGRpdiB0aGF0IGVuY29tcGFzc2VzIHRoZSBlbnRpcmUgYmxvY2tcbiAgICBjb25zdCBtZW51Rm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgbWVudUZvcm0uY2xhc3NMaXN0LmFkZCgnbWVudS1mb3JtJylcblxuICAgIC8vIGNyZWF0ZSB0aGUgZm9ybSBhbmQgYWRkIGF0dHJpYnV0ZXNcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpXG4gICAgZm9ybS5zZXRBdHRyaWJ1dGUoJ2FjdGlvbicsIFwiXCIpXG4gICAgZm9ybS5zZXRBdHRyaWJ1dGUoJ21ldGhvZCcsICdwb3N0JylcblxuICAgIC8vIGNyZWF0ZSB0aGUgaW5wdXQgYm94IGZvciB0ZXh0XG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKVxuICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnaWQnLCAncHJvamVjdC10aXRsZScpXG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgJ3Byb2plY3RUaXRsZScpXG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCdtYXhsZW5ndGgnLCAnMTUnKVxuXG4gICAgLy8gY3JlYXRlIGRpdiB0byBlbmNvbXBhc3MgYnV0dG9uc1xuICAgIGNvbnN0IHByb2plY3RCdXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBwcm9qZWN0QnV0dG9ucy5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWJ1dHRvbnMnKVxuXG4gICAgLy9jcmVhdGUgdGhlIGJ1dHRvbnNcbiAgICBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgIGFkZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdhZGQtYnV0dG9uJylcbiAgICBhZGRCdXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpXG4gICAgYWRkQnV0dG9uLnRleHRDb250ZW50ID0gXCJBZGRcIlxuXG4gICAgY29uc3QgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICBjYW5jZWxCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2FuY2VsLWJ1dHRvbicpXG4gICAgY2FuY2VsQnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKVxuICAgIGNhbmNlbEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ2FuY2VsXCJcblxuICAgIC8vIGFkZCBldmVudGxpc3RlbmVyc1xuICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIHNhdmUoZSlcbiAgICB9KVxuICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGNhbmNlbChlKVxuICAgIH0pXG5cbiAgICAvLyBBcHBlbmQgdGhlIGJ1dHRvbnMgdG8gcHJvamVjdEJ1dHRvbnNcbiAgICBwcm9qZWN0QnV0dG9ucy5hcHBlbmRDaGlsZChhZGRCdXR0b24pXG4gICAgcHJvamVjdEJ1dHRvbnMuYXBwZW5kQ2hpbGQoY2FuY2VsQnV0dG9uKVxuXG4gICAgLy8gQXBwZW5kIGlucHV0IHRvIGZvcm0gdGhlbiBwcm9qZWN0QnV0dG9ucyB0byBmb3JtXG4gICAgZm9ybS5hcHBlbmRDaGlsZChpbnB1dClcbiAgICBmb3JtLmFwcGVuZENoaWxkKHByb2plY3RCdXR0b25zKVxuXG4gICAgLy8gYXBwZW5kIGZvcm0gdG8gdGhlIG1haW4gZGl2IChtZW51Rm9ybSlcbiAgICBtZW51Rm9ybS5hcHBlbmRDaGlsZChmb3JtKVxuXG4gICAgcmV0dXJuIG1lbnVGb3JtXG59XG5cbmZ1bmN0aW9uIHNhdmUoZSkge1xuICAgIC8vIHNlbGVjdCB0aGUgbWVudS1mb3JtIHBhcmVudCBub2RlXG4gICAgY29uc3QgbWVudUZvcm0gPSBlLnNyY0VsZW1lbnQuY2xvc2VzdCgnLm1lbnUtZm9ybScpXG4gICAgLy8gc2VsZWN0IHRoZSBjaGlsZCBvZiBtZW51LWZvcm0gYW5kIHRoZSBjaGlsZCBvZiB0aGF0IHRvIGFxdWlyZSB0aGUgaW5wdXQgbm9kZS5cbiAgICAvLyBUYWtlIHRoZSB2YWx1ZSBvZiB0aGUgaW5wdXQgbm9kZVxuICAgIGNvbnN0IGlucHV0VGV4dCA9IG1lbnVGb3JtLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZC52YWx1ZVxuICAgIC8vIGluc2VydCBhIG5ldyBtZW51IGl0ZW0gYWZ0ZXIgdGhlIGZvcm1cbiAgICBtZW51Rm9ybS5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgY3JlYXRlTWVudUl0ZW0oaW5wdXRUZXh0KSlcbiAgICAvLyBhZGQgdGhlIHRpdGxlIHRvIHRoZSBhcnJheSBcbiAgICBhZGRUaXRsZShpbnB1dFRleHQpXG5cbiAgICAvLyB3aGVuIGV2ZXJ5dGhpbmcgaXMgZG9uZSwgZGVsZXRlIHRoZSBmb3JtXG4gICAgY2FuY2VsKGUpXG59XG5cbi8vIGZ1bmN0aW9uIHVzZWQgdG8gZGVsZXRlIG1lbnUtZm9ybVxuZnVuY3Rpb24gY2FuY2VsKGUpIHtcbiAgICAvLyBmaW5kIHRoZSBjbG9zZXN0IG1lbnUgZm9ybSBhbmQgcmVtb3ZlIGl0XG4gICAgZS5zcmNFbGVtZW50LmNsb3Nlc3QoJy5tZW51LWZvcm0nKS5yZW1vdmUoKVxufVxuXG4vLyBhZGQgZXZlbnQgbGlzdGVuZXIgZm9yIGEgbWVudS1pdGVtXG5mdW5jdGlvbiBhZGRNZW51SXRlbUV2ZW50IChpdGVtKSB7XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIC8vIHJlbW92ZXMgdGhlIGNsYXNzIHRoYXQgaXMgaGlnaGxpZ2h0aW5nIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgaXRlbVxuICAgICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudS1zZWxlY3RlZCcpXG4gICAgICAgIC8vIG1ha2Ugc3VyZSBjdXJyZW50U2VsZWN0ZWQgaXNuJ3QgbnVsbCB0byBwcmV2ZW50IGFuIGVycm9yXG4gICAgICAgIC8vIGN1cnJlbnRTZWxlY3RlZCB3aWxsIGJlIG51bGwgd2hlbiB0aGUgdHJhc2ggaWNvbiBpcyBjbGlja2VkIHRvIGRlbGV0ZVxuICAgICAgICBpZiAoY3VycmVudFNlbGVjdGVkICE9IG51bGwpe1xuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkLmNsYXNzTGlzdC5yZW1vdmUoJ21lbnUtc2VsZWN0ZWQnKVxuICAgICAgICB9XG4gICAgICAgIC8vYWRkIHRoZSBtZW51LXNlbGVjdGVkIGNsYXNzIHRvIHRoZSBpdGVtIHRoYXQgd2FzIHNlbGVjdGVkXG4gICAgICAgIGUuc3JjRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51LXNlbGVjdGVkJylcbiAgICAgICAgLy8gY2FsbCBmdW5jdGlvbiB0byByZW5kZXIgdGhlIHRhc2tzXG4gICAgICAgIG1lbnVTZWxlY3RlZCA9IGUuc3JjRWxlbWVudC5maXJzdENoaWxkLnRleHRDb250ZW50XG4gICAgICAgIHJlbmRlclRhc2tzKG1lbnVTZWxlY3RlZClcbiAgICB9KVxufVxuIl0sIm5hbWVzIjpbInByb2plY3RUaXRsZXMiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic3BsaXQiLCJzZXRJdGVtIiwidGFza1Byb3RvIiwiZ2V0VGl0bGUiLCJ0aGlzIiwidGl0bGUiLCJzZXRUaXRsZSIsImdldERlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb24iLCJzZXREZXNjcmlwdGlvbiIsImdldERhdGUiLCJkYXRlIiwic2V0RGF0ZSIsImdldFByaW9yaXR5IiwicHJpb3JpdHkiLCJzZXRQcmlvcml0eSIsImdldFByb2plY3QiLCJwcm9qZWN0Iiwic2V0UHJvamVjdCIsImdldElkIiwiaWQiLCJzZXRJZCIsImNyZWF0ZVRhc2tFZGl0IiwidGFza0Zvcm0iLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJmb3JtIiwic2V0QXR0cmlidXRlIiwidG9wRWRpdCIsImVkaXRUaXRsZSIsInZhbHVlIiwiZGF0ZURpdiIsImRhdGVMYWJlbCIsInRleHRDb250ZW50IiwiaW5wdXREYXRlIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0QXJlYURpdiIsInRleHRBcmVhIiwibG93ZXJEaXYiLCJlbmNvbXBhc0RpdiIsInByaW9yaXR5TGFiZWwiLCJwcmlvcml0eVNlbGVjdCIsImkiLCJjcmVhdGVPcHRpb24iLCJidXR0b25EaXYiLCJkZWxCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImRlbFRhc2siLCJzYXZlQnV0dG9uIiwic3JjRWxlbWVudCIsImNsb3Nlc3QiLCJxdWVyeVNlbGVjdG9yIiwiYWxsVGFza3MiLCJsZW5ndGgiLCJwdXNoIiwib2JqIiwiT2JqZWN0IiwiY3JlYXRlIiwidGFzayIsIm1lbnVTZWxlY3RlZCIsInJlbmRlclRhc2tzIiwicmVtb3ZlIiwic2F2ZSIsIm9wdGlvbiIsImFkZFRhc2siLCJyZW1vdmVUYXNrcyIsIm5ld0FycmF5IiwiZmlsdGVyIiwiaXRlbSIsInRvZGF5IiwiRGF0ZSIsImN1cnJlbnREYXRlcyIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJpc0R1ZVRvZGF5IiwidGFza3NEaXYiLCJmb3JFYWNoIiwiZWxlIiwidGFza0RpdiIsInRhc2tTdGFydCIsInRhc2tFbmQiLCJjaGVja0J1dHRvbiIsInN0eWxlIiwiY3NzVGV4dCIsInRhc2tUaXRsZSIsInRhc2tEYXRlIiwiZWRpdEJ1dHRvbiIsInNyYyIsInBhcmVudCIsInBhcmVudEVsZW1lbnQiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJlZGl0VGFzayIsImNyZWF0ZVRhc2siLCJpbnNlcnRCZWZvcmUiLCJxdWVyeVNlbGVjdG9yQWxsIiwic3BsaWNlIiwiYWRkTWVudUl0ZW1FdmVudCIsIm1lbnVUaXRsZXMiLCJhcnJheSIsImNyZWF0ZU1lbnVJdGVtIiwiZGl2IiwidGl0bGVEaXYiLCJ0cmFzaCIsImluZGV4IiwiaW5kZXhPZiIsImRlbGV0ZVRpdGxlIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImNhbmNlbCIsImN1cnJlbnRTZWxlY3RlZCIsImZpcnN0Q2hpbGQiLCJtZW51Rm9ybSIsImlucHV0IiwicHJvamVjdEJ1dHRvbnMiLCJhZGRCdXR0b24iLCJjYW5jZWxCdXR0b24iLCJpbnB1dFRleHQiLCJjcmVhdGVGb3JtIl0sInNvdXJjZVJvb3QiOiIifQ==