(()=>{"use strict";let t=[];localStorage.getItem("projectTitles")?t=localStorage.getItem("projectTitles").split(","):localStorage.setItem("projectTitles",[]);const e={getTitle(){return this.title},setTitle(t){this.title=t},getDescription(){return this.description},setDescription(t){this.description=t},getDate(){return this.date},setDate(t){this.date=t},getPriority(){return this.priority},setPriority(t){this.priority=t},getProject(){return this.project},setProject(t){this.project=t}};function n(t,n,s,o){const d=document.createElement("div");d.classList.add("task-span"),d.classList.add("task-form");const a=document.createElement("form");a.setAttribute("action",""),a.setAttribute("method","post");const u=document.createElement("div");u.classList.add("top-form-task");const m=document.createElement("input");m.setAttribute("type","text"),m.setAttribute("id","title-edit"),m.setAttribute("placeholder","Title"),m.setAttribute("name","title-edit"),m.setAttribute("maxlength","20"),m.value=t;const p=document.createElement("div"),h=document.createElement("label");h.textContent="Date: ",h.setAttribute("for","date");const E=document.createElement("input");E.setAttribute("type","date"),E.setAttribute("id","date"),E.setAttribute("name","date"),E.value=n,p.appendChild(h),p.appendChild(E),u.appendChild(m),u.appendChild(p),a.appendChild(u);const C=document.createElement("div");C.classList.add("textarea-div");const v=document.createElement("textarea");v.setAttribute("placeholder","Description"),v.value=s,C.appendChild(v),a.appendChild(C);const b=document.createElement("div");b.classList.add("lower-form-task");const f=document.createElement("div"),g=document.createElement("label");g.textContent="Priority: ",g.setAttribute("for","priority");const A=document.createElement("select");A.setAttribute("name","priority"),A.setAttribute("id","priority"),A.value=o;for(let t=3;t>=1;t--)A.appendChild(c(t));f.appendChild(g),f.appendChild(A);const y=document.createElement("div"),L=document.createElement("button");L.textContent="Del",L.setAttribute("type","button");const k=document.createElement("button");return k.textContent="Save",k.setAttribute("type","button"),k.addEventListener("click",(t=>{!function(t){const n=t.srcElement.closest("form"),c=n.querySelector("#title-edit").value,s=n.querySelector("#date").value,o=n.querySelector("textarea").value,d=n.querySelector("#priority").value;r.push(((t,n,c,r,s)=>{let i=Object.create(e);return i.title=t,i.description=c,i.date=n,i.priority=r,i.project=s,i})(c,s,o,d,l)),i(l),n.parentElement.remove()}(t)})),y.appendChild(L),y.appendChild(k),b.appendChild(f),b.appendChild(y),a.appendChild(b),d.appendChild(a),d}function c(t){const e=document.createElement("option");return e.textContent=t,e.setAttribute("value",t),e}let r=[];const s=document.querySelector(".add-task");function i(t){document.querySelectorAll(".task-span").forEach((t=>{t.remove()}));const e=r.filter((e=>"Today"==t?function(t){const e=new Date,n=t.split("-");return n[0]<e.getFullYear()||n[1]<e.getMonth()||n[2]<=e.getDate()}(e.getDate()):"Important"==t?1==e.getPriority():"All"==t||e.getProject()==t)),c=document.querySelector(".add-task"),s=document.querySelector("#tasks");e.forEach((t=>{const e=function(t,e){const c=document.createElement("div");c.classList.add("task"),c.classList.add("task-span");const s=document.createElement("div"),i=document.createElement("div");s.classList.add("task-start"),i.classList.add("task-end");const l=document.createElement("span");l.classList.add("task-circle"),l.addEventListener("click",(t=>{!function(t){const e=t.srcElement.parentElement.parentElement,n=o(e);r.splice(n,1),e.remove()}(t)}));const d=document.createElement("div");d.classList.add("task-title"),d.textContent=t;const a=document.createElement("div");a.classList.add("task-date"),a.textContent=e;const u=document.createElement("img");return u.src="images/edit.svg",u.setAttribute("alt","edit button"),u.addEventListener("click",(t=>{!function(t){const e=t.srcElement.parentElement.parentElement;o(e),e.appendChild(n())}(t)})),i.appendChild(a),i.appendChild(u),s.appendChild(l),s.appendChild(d),c.appendChild(s),c.appendChild(i),c}(t.getTitle(),t.getDate());s.insertBefore(e,c)}))}function o(t){const e=function(t){return t.querySelector(".task-title").textContent+"."+t.querySelector(".task-date").textContent}(t).split(".");console.log(e);const n=[];for(let t=0;t<r.length;t++)r[t].getTitle()===e[0]&&n.push(t);const c=[];for(let t=0;t<n.length;t++)r[n[t]].getDate()==e[1]&&c.push(n[t]);if("All"==l)return c[0];for(let t=0;t<c.length;t++)if(r[c[0]].getProject()===l)return c[t]}s.addEventListener("click",(()=>{document.querySelector("#tasks").insertBefore(n(null,null,null,3),s)}));let l="All";document.querySelectorAll(".menu-item").forEach(p);const d=document.querySelector(".projects"),a=t;for(let t=0;t<a.length;t++)d.appendChild(u(a[t]));function u(e){const n=document.createElement("div");n.classList.add("menu-item");const c=document.createElement("div");c.textContent=e;const r=document.createElement("img");return r.setAttribute("src","./images/trash-2.svg"),r.setAttribute("alt","trash icon"),r.addEventListener("click",(e=>{!function(e){const n=t.indexOf(e);n>-1&&(t.splice(n,1),localStorage.setItem("projectTitles",t))}(e.srcElement.previousElementSibling.textContent),e.srcElement.closest(".menu-item").remove()})),n.appendChild(c),n.appendChild(r),p(n),n}function m(t){t.srcElement.closest(".menu-form").remove()}function p(t){t.addEventListener("click",(t=>{const e=document.querySelector(".menu-selected");null!=e&&e.classList.remove("menu-selected"),t.srcElement.classList.add("menu-selected"),l=t.srcElement.firstChild.textContent,i(l)}))}document.querySelector(".project-title > svg").addEventListener("click",(()=>{document.querySelector(".projects").appendChild(function(){const e=document.createElement("div");e.classList.add("menu-form");const n=document.createElement("form");n.setAttribute("action",""),n.setAttribute("method","post");const c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("id","project-title"),c.setAttribute("name","projectTitle"),c.setAttribute("maxlength","15");const r=document.createElement("div");r.classList.add("project-buttons");const s=document.createElement("button");s.classList.add("add-button"),s.setAttribute("type","button"),s.textContent="Add";const i=document.createElement("button");return i.classList.add("cancel-button"),i.setAttribute("type","button"),i.textContent="Cancel",s.addEventListener("click",(e=>{!function(e){const n=e.srcElement.closest(".menu-form"),c=n.firstChild.firstChild.value;var r;n.insertAdjacentElement("afterend",u(c)),r=c,t.push(r),localStorage.setItem("projectTitles",t),m(e)}(e)})),i.addEventListener("click",(t=>{m(t)})),r.appendChild(s),r.appendChild(i),n.appendChild(c),n.appendChild(r),e.appendChild(n),e}())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxPQXZCQStGLEVBQWE5RixVQUFVQyxJQUFJLGlCQUMzQjZGLEVBQWEzRixhQUFhLE9BQVEsVUFDbEMyRixFQUFhckYsWUFBYyxTQUczQm9GLEVBQVV0RSxpQkFBaUIsU0FBVUMsS0FxQnpDLFNBQWNBLEdBRVYsTUFBTWtFLEVBQVdsRSxFQUFFQyxXQUFXQyxRQUFRLGNBR2hDcUUsRUFBWUwsRUFBU0QsV0FBV0EsV0FBV25GLE1MeEdyRCxJQUFrQnhCLEVLMEdkNEcsRUFBU00sc0JBQXNCLFdBQVlqQixFQUFlZ0IsSUwxRzVDakgsRUs0R0xpSCxFTDNHVHpILEVBQWN1RCxLQUFLL0MsR0FDbkJQLGFBQWFHLFFBQVEsZ0JBQWlCSixHSzZHdENpSCxFQUFPL0QsRUFDWCxDQWpDUSxDQUFLQSxFQUFDLElBRVZzRSxFQUFhdkUsaUJBQWlCLFNBQVVDLElBQ3BDK0QsRUFBTy9ELEVBQUMsSUFJWm9FLEVBQWVqRixZQUFZa0YsR0FDM0JELEVBQWVqRixZQUFZbUYsR0FHM0I1RixFQUFLUyxZQUFZZ0YsR0FDakJ6RixFQUFLUyxZQUFZaUYsR0FHakJGLEVBQVMvRSxZQUFZVCxHQUVkd0YsQ0FDWCxDQXRGd0JPLEdBQVksRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvanMtbW9kdWxlcy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL2pzLW1vZHVsZXMvdGFzay1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9qcy1tb2R1bGVzL3Rhc2stZWRpdC1kb20uanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9qcy1tb2R1bGVzL3Rhc2stY29udHJvbC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL2pzLW1vZHVsZXMvdGFzay1kb20uanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9qcy1tb2R1bGVzL3Byb2plY3RzLWNvbnRyb2wuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY3JlYXRlIGFycmF5IGZvciBwcm9ncmFtIHRvIHJ1biBvZmZcbmxldCBwcm9qZWN0VGl0bGVzID0gW11cblxuLy8gY2hlY2sgaWYgdGhlcmUgaXMgYW55IGxvY2Fsc3RvcmFnZSwgaWYgbm90IGNyZWF0ZSBuZXcgYXJyYXkgaW4gbG9jYWxzdG9yYWdlXG5pZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0VGl0bGVzJykpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdFRpdGxlcycsIFtdKVxuICB9IGVsc2Uge1xuICAgIC8vIGxvYWQgbG9jYWxTdG9yYWdlIGRhdGEgaW50byBtZW1vcnlcbiAgICBwcm9qZWN0VGl0bGVzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2plY3RUaXRsZXMnKS5zcGxpdCgnLCcpXG4gIH1cblxuZnVuY3Rpb24gYWRkVGl0bGUodGl0bGUpIHtcbiAgICBwcm9qZWN0VGl0bGVzLnB1c2godGl0bGUpXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RUaXRsZXMnLCBwcm9qZWN0VGl0bGVzKVxufVxuXG5mdW5jdGlvbiBnZXRUaXRsZXMoKSB7XG4gICAgcmV0dXJuIHByb2plY3RUaXRsZXM7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZVRpdGxlKHRpdGxlKSB7XG4gICAgY29uc3QgaW5kZXggPSBwcm9qZWN0VGl0bGVzLmluZGV4T2YodGl0bGUpO1xuICAgIGlmIChpbmRleCA+IC0xKSB7IC8vIG9ubHkgc3BsaWNlIGFycmF5IHdoZW4gaXRlbSBpcyBmb3VuZFxuICAgICAgICBwcm9qZWN0VGl0bGVzLnNwbGljZShpbmRleCwgMSk7IC8vIDJuZCBwYXJhbWV0ZXIgbWVhbnMgcmVtb3ZlIG9uZSBpdGVtIG9ubHlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RUaXRsZXMnLCBwcm9qZWN0VGl0bGVzKVxuICAgIH1cbn1cblxuZXhwb3J0IHthZGRUaXRsZSwgZ2V0VGl0bGVzLCBkZWxldGVUaXRsZX07XG4iLCIvLyBmYWN0b3J5IGZ1bmN0aW9uIHVzZWQgdG8gY29uc3RydWN0IHRhc2sgb2JqZWN0XG5leHBvcnQgY29uc3QgdGFzayA9ICh0aXRsZSwgZGF0ZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBwcm9qZWN0KSA9PiB7XG4gICAgbGV0IG9iaiA9IE9iamVjdC5jcmVhdGUodGFza1Byb3RvKVxuICAgIG9iai50aXRsZSA9IHRpdGxlXG4gICAgb2JqLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb25cbiAgICBvYmouZGF0ZSA9IGRhdGVcbiAgICBvYmoucHJpb3JpdHkgPSBwcmlvcml0eVxuICAgIC8vIHZhcmlhYmxlIHVzZWQgdG8gZGV0ZXJtaW5lIHdoYXQgcHJvamVjdCB0aGUgdGFzayBpcyBpblxuICAgIG9iai5wcm9qZWN0ID0gcHJvamVjdFxuICAgIHJldHVybiBvYmpcbn1cblxuLy9HcmVhdCBwcm90b3R5cGUgZm9yIHRhc2soKSB0byBzdG9yZSBhbGwgdGhlIG1ldGhvZHMgZm9yIHByb2dyYW0gdG8gcnVuIGZhc3RlclxuY29uc3QgdGFza1Byb3RvID0ge1xuICAgIC8vIGNyZWF0ZSBhbGwgZ2V0dGVycyBhbmQgc2V0dGVycyAob25seSBmb3IgbWVtb3J5IHVzZSlcbiAgICBnZXRUaXRsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGl0bGVcbiAgICB9LFxuICAgIHNldFRpdGxlKHRpdGxlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZVxuICAgIH0sXG4gICAgZ2V0RGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uXG4gICAgfSxcbiAgICBzZXREZXNjcmlwdGlvbihkZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb25cbiAgICB9LFxuICAgIGdldERhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVcbiAgICB9LFxuICAgIHNldERhdGUoZGF0ZSkge1xuICAgICAgICB0aGlzLmRhdGUgPSBkYXRlXG4gICAgfSxcbiAgICBnZXRQcmlvcml0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpb3JpdHlcbiAgICB9LFxuICAgIHNldFByaW9yaXR5KHByaW9yaXR5KSB7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eVxuICAgIH0sXG4gICAgZ2V0UHJvamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdFxuICAgIH0sXG4gICAgc2V0UHJvamVjdChwcm9qZWN0KSB7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3RcbiAgICB9XG59XG5cbiIsImltcG9ydCB7IHNhdmUgfSBmcm9tICcuL3Rhc2stY29udHJvbC5qcydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlVGFza0VkaXQgKHRpdGxlLCBkYXRlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHkpIHtcbiAgICAvL2NyZWF0ZSBkaXYgdG8gaG9sZCBhbGwgdGhlIGVsZW1lbnRzXG4gICAgY29uc3QgdGFza0Zvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRhc2tGb3JtLmNsYXNzTGlzdC5hZGQoJ3Rhc2stc3BhbicpXG4gICAgdGFza0Zvcm0uY2xhc3NMaXN0LmFkZCgndGFzay1mb3JtJylcblxuICAgIC8vY3JlYXRlIHRoZSBmb3JtIFxuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJylcbiAgICBmb3JtLnNldEF0dHJpYnV0ZSgnYWN0aW9uJywgJycpXG4gICAgZm9ybS5zZXRBdHRyaWJ1dGUoJ21ldGhvZCcsICdwb3N0JylcblxuICAgIC8vc3RhcnQgYnkgY3JlYXRpbmcgZWxlbWVudHMgZm9yIHRoZSB0b3Agb2YgdGhlIGZvcm1cbiAgICAvL3RoZSB0aXRsZSBhbmQgZGF0ZSBhcmUgaW5sY3VkZWQgaGVyZVxuICAgIGNvbnN0IHRvcEVkaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRvcEVkaXQuY2xhc3NMaXN0LmFkZCgndG9wLWZvcm0tdGFzaycpXG5cbiAgICAvL2lucHV0IGZvciB0aGUgdGl0bGVcbiAgICBjb25zdCBlZGl0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgZWRpdFRpdGxlLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0JylcbiAgICBlZGl0VGl0bGUuc2V0QXR0cmlidXRlKCdpZCcsICd0aXRsZS1lZGl0JylcbiAgICBlZGl0VGl0bGUuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsICdUaXRsZScpXG4gICAgZWRpdFRpdGxlLnNldEF0dHJpYnV0ZSgnbmFtZScsICd0aXRsZS1lZGl0JylcbiAgICBlZGl0VGl0bGUuc2V0QXR0cmlidXRlKCdtYXhsZW5ndGgnLCAnMjAnKVxuICAgIGVkaXRUaXRsZS52YWx1ZSA9IHRpdGxlIC8vVE8gRE9cblxuICAgIC8vaW5wdXQgZm9yIHRoZSBkYXRlXG4gICAgY29uc3QgZGF0ZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgY29uc3QgZGF0ZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKVxuICAgIGRhdGVMYWJlbC50ZXh0Q29udGVudCA9ICdEYXRlOiAnXG4gICAgZGF0ZUxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJ2RhdGUnKVxuICAgICBcbiAgICBjb25zdCBpbnB1dERhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgaW5wdXREYXRlLnNldEF0dHJpYnV0ZSgndHlwZScsICdkYXRlJylcbiAgICBpbnB1dERhdGUuc2V0QXR0cmlidXRlKCdpZCcsICdkYXRlJylcbiAgICBpbnB1dERhdGUuc2V0QXR0cmlidXRlKCduYW1lJywgJ2RhdGUnKVxuICAgIGlucHV0RGF0ZS52YWx1ZSA9IGRhdGUgLy9UTyBET1xuXG4gICAgLy9hcHBlbmQgdGhlIHRvcCB0b2dldGhlciBhbmQgYWRkIGl0IHRvIHRoZSBmdWxsIGZvcm1cbiAgICBkYXRlRGl2LmFwcGVuZENoaWxkKGRhdGVMYWJlbClcbiAgICBkYXRlRGl2LmFwcGVuZENoaWxkKGlucHV0RGF0ZSlcblxuICAgIHRvcEVkaXQuYXBwZW5kQ2hpbGQoZWRpdFRpdGxlKVxuICAgIHRvcEVkaXQuYXBwZW5kQ2hpbGQoZGF0ZURpdilcblxuICAgIGZvcm0uYXBwZW5kQ2hpbGQodG9wRWRpdClcblxuICAgIC8vY3JlYXRlIHRoZSB0ZXh0YXJlYVxuICAgIGNvbnN0IHRleHRBcmVhRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0ZXh0QXJlYURpdi5jbGFzc0xpc3QuYWRkKCd0ZXh0YXJlYS1kaXYnKVxuXG4gICAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpXG4gICAgdGV4dEFyZWEuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsICdEZXNjcmlwdGlvbicpXG4gICAgdGV4dEFyZWEudmFsdWUgPSBkZXNjcmlwdGlvbiAvL1RPIERPIFxuXG4gICAgdGV4dEFyZWFEaXYuYXBwZW5kQ2hpbGQodGV4dEFyZWEpXG4gICAgZm9ybS5hcHBlbmRDaGlsZCh0ZXh0QXJlYURpdilcblxuICAgIC8vY3JlYXRlIHRoZSBib3R0b20gb2YgdGhlIGZvcm1cbiAgICBjb25zdCBsb3dlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgbG93ZXJEaXYuY2xhc3NMaXN0LmFkZCgnbG93ZXItZm9ybS10YXNrJylcblxuICAgIGNvbnN0IGVuY29tcGFzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICAgIGNvbnN0IHByaW9yaXR5TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpXG4gICAgcHJpb3JpdHlMYWJlbC50ZXh0Q29udGVudCA9ICdQcmlvcml0eTogJ1xuICAgIHByaW9yaXR5TGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCAncHJpb3JpdHknKVxuXG4gICAgY29uc3QgcHJpb3JpdHlTZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKVxuICAgIHByaW9yaXR5U2VsZWN0LnNldEF0dHJpYnV0ZSgnbmFtZScsICdwcmlvcml0eScpXG4gICAgcHJpb3JpdHlTZWxlY3Quc2V0QXR0cmlidXRlKCdpZCcsICdwcmlvcml0eScpXG4gICAgcHJpb3JpdHlTZWxlY3QudmFsdWUgPSBwcmlvcml0eSAvL1RPIERPXG5cbiAgICAvL3VzZSBhIGxvb3AgdG8gYWRkIDMgb3B0aW9ucyB0byB0aGUgRE9NXG4gICAgZm9yIChsZXQgaSA9IDM7IGkgPj0gMTsgaS0tKSB7XG4gICAgICAgIC8vdXNlIGEgZnVuY3Rpb24gdG8gcmV0dXJuIHRoZSBET00gb3B0aW9uIGVsZW1lbnRcbiAgICAgICAgcHJpb3JpdHlTZWxlY3QuYXBwZW5kQ2hpbGQoY3JlYXRlT3B0aW9uKGkpKVxuICAgIH1cblxuICAgIC8vYXBwZW5kIHRoZSBwcmlvcml0eSBlbGVtZW50cyB0byB0aGUgZGl2XG4gICAgZW5jb21wYXNEaXYuYXBwZW5kQ2hpbGQocHJpb3JpdHlMYWJlbClcbiAgICBlbmNvbXBhc0Rpdi5hcHBlbmRDaGlsZChwcmlvcml0eVNlbGVjdClcblxuICAgIC8vIGNyZWF0ZSB0aGUgU2F2ZSBhbmQgRGVsZXRlIGJ1dHRvbnMgaW4gdGhlaXIgb3duIGRpdlxuICAgIGNvbnN0IGJ1dHRvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICBjb25zdCBkZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgIGRlbEJ1dHRvbi50ZXh0Q29udGVudCA9ICdEZWwnXG4gICAgZGVsQnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKVxuXG4gICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdTYXZlJ1xuICAgIHNhdmVCdXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpXG4gICAgc2F2ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7c2F2ZShlKX0pXG5cbiAgICBidXR0b25EaXYuYXBwZW5kQ2hpbGQoZGVsQnV0dG9uKVxuICAgIGJ1dHRvbkRpdi5hcHBlbmRDaGlsZChzYXZlQnV0dG9uKVxuXG4gICAgLy8gYXBwZW5kIHRoZSBsb3dlciBlbGVtZW50cyBcbiAgICBsb3dlckRpdi5hcHBlbmRDaGlsZChlbmNvbXBhc0RpdilcbiAgICBsb3dlckRpdi5hcHBlbmRDaGlsZChidXR0b25EaXYpXG4gICAgLy9hcHBlbmQgdGhlIGxvd2VyIGRpdiB0byB0aGUgZm9ybVxuICAgIGZvcm0uYXBwZW5kQ2hpbGQobG93ZXJEaXYpXG4gICAgLy9hcHBlbmQgZm9ybSB0byB0aGUgdGFzayBkaXZcbiAgICB0YXNrRm9ybS5hcHBlbmRDaGlsZChmb3JtKVxuXG4gICAgcmV0dXJuIHRhc2tGb3JtXG59XG5cbi8vIGNyZWF0ZXMgb3B0aW9ucyBmb3IgdGhlIHByaW9yaXR5IGVsZW1lbnRcbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbiAoaSkge1xuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpXG4gICAgb3B0aW9uLnRleHRDb250ZW50ID0gaVxuICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgaSlcbiAgICByZXR1cm4gb3B0aW9uXG59XG5cbiIsImltcG9ydCB7IHRhc2sgfSBmcm9tICcuL3Rhc2stb2JqZWN0LmpzJ1xuaW1wb3J0IGNyZWF0ZVRhc2sgZnJvbSAnLi90YXNrLWRvbS5qcydcbmltcG9ydCBjcmVhdGVUYXNrRWRpdCBmcm9tICcuL3Rhc2stZWRpdC1kb20uanMnXG5pbXBvcnQgeyBtZW51U2VsZWN0ZWQgYXMgbWVudVNlbGVjdGVkfSBmcm9tICcuL3Byb2plY3RzLWNvbnRyb2wuanMnXG5cbi8vIGNyZWF0ZSBhbiBhcnJheSB0byBzdG9yZSBhbGwgdGhlIHRhc2tzXG5sZXQgYWxsVGFza3MgPSBbXVxuXG4vL2FkZCBldmVudCBsaXN0ZW5lciB0byArQWRkIFRhc2sgYnV0dG9uXG5jb25zdCBhZGRUYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10YXNrJylcbmFkZFRhc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgLy8gTmVlZCB0byBwdXQgYSB0YXNrLWVkaXQgYWJvdmUgK0FkZCBUYXNrXG4gICAgY29uc3QgdGFza3NEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFza3MnKVxuICAgIHRhc2tzRGl2Lmluc2VydEJlZm9yZShjcmVhdGVUYXNrRWRpdChudWxsLCBudWxsLCBudWxsLCAzKSwgYWRkVGFzaylcbn0pXG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJUYXNrcyAobWVudVNlbGVjdGVkKSB7XG4gICAgLy8gZmlyc3QgcmVtb3ZlIHRoZSBjdXJyZW50IHRhc2tzXG4gICAgcmVtb3ZlVGFza3MoKVxuXG4gICAgLy8gY3JlYXRlIGEgbmV3IGFycmF5IHRoYXQgaG9sZHMgb25seSB0aGUgcmVxdWlyZWQgdGFza3MgZnJvbSB0aGUgcHJvamVjdFxuICAgIGNvbnN0IG5ld0FycmF5ID0gYWxsVGFza3MuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICBpZiAobWVudVNlbGVjdGVkID09IFwiVG9kYXlcIikge1xuICAgICAgICAgICAgcmV0dXJuIGlzRHVlVG9kYXkoaXRlbS5nZXREYXRlKCkpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWVudVNlbGVjdGVkID09IFwiSW1wb3J0YW50XCIpIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmdldFByaW9yaXR5KCkgPT0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZW51U2VsZWN0ZWQgPT0gXCJBbGxcIikge3JldHVybiB0cnVlfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmdldFByb2plY3QoKSA9PSBtZW51U2VsZWN0ZWQ7IFxuICAgICAgICB9XG4gICAgfSk7XG4gICAgLy8gU2VsZWN0IHRoZSBhZGQgdGFzayBcbiAgICBjb25zdCBhZGRUYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10YXNrJylcbiAgICAvLyBzZWxlY3QgdGFza3MgZGl2XG4gICAgY29uc3QgdGFza3NEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFza3MnKVxuICAgIC8vbG9vcCB0aHJvdWdoIHRoZSBuZXcgYXJyYXkgYW5kIHJlbmRlciB0aGUgdGFza3NcbiAgICBuZXdBcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIC8vIGFkZCBuZXcgZWxlbWVudHMgYmVmb3JlICsgQWRkIFRhc2tcbiAgICAgICAgY29uc3QgZWxlID0gY3JlYXRlVGFzayhpdGVtLmdldFRpdGxlKCksIGl0ZW0uZ2V0RGF0ZSgpKVxuICAgICAgICB0YXNrc0Rpdi5pbnNlcnRCZWZvcmUoZWxlLCBhZGRUYXNrKVxuICAgIH0pXG59XG5cbi8vIHdoZW4gcmVuZGVyVGFza3MoKSBpcyBjYWxsZWQsIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGRlbGV0ZSB0aGUgY3VycmVudCB0YXNrc1xuZnVuY3Rpb24gcmVtb3ZlVGFza3MgKCkge1xuICAgIC8vIGNyZWF0ZSBub2RlIGxpc3RzIG9mIGFsbCBjdXJyZW50IHRhc2tzIGluIHRoZSBET01cbiAgICBjb25zdCBhbGxUYXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLXNwYW4nKVxuICAgIC8vIHJlbW92ZSBlYWNoIHRhc2tcbiAgICBhbGxUYXNrcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGl0ZW0ucmVtb3ZlKClcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmUgKGUpIHtcbiAgICAvLyBnZXQgdGhlIHNyYyBlbGVtZW50IGFuZCB0aGVuIHRoZSBmb3JtIG5vZGVcbiAgICBjb25zdCBidXR0b24gPSBlLnNyY0VsZW1lbnRcbiAgICBjb25zdCBmb3JtID0gYnV0dG9uLmNsb3Nlc3QoJ2Zvcm0nKVxuICAgIC8vIGdhdGhlciBhbGwgcmVxdWlyZWQgaW5mbyB0byBidWlsZCBhIG5ldyB0YXNrIG9iamVjdFxuICAgIGNvbnN0IHRpdGxlID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcjdGl0bGUtZWRpdCcpLnZhbHVlXG4gICAgY29uc3QgZGF0ZSA9IGZvcm0ucXVlcnlTZWxlY3RvcignI2RhdGUnKS52YWx1ZVxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZm9ybS5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpLnZhbHVlXG4gICAgY29uc3QgcHJpb3JpdHkgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpLnZhbHVlXG4gICAgYWxsVGFza3MucHVzaCh0YXNrKHRpdGxlLCBkYXRlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIG1lbnVTZWxlY3RlZCkpXG4gICAgLy8gcmVuZGVyIHRoZSBuZXcgdGFza3NcbiAgICAvLyBvdGhlciB0YXNrIGZvcm0gb24gcGFnZSB3aWxsIGJlIHJlbW92ZWRcbiAgICByZW5kZXJUYXNrcyhtZW51U2VsZWN0ZWQpXG4gICAgLy8gcmVtb3ZlIHRoZSBmb3JtXG4gICAgZm9ybS5wYXJlbnRFbGVtZW50LnJlbW92ZSgpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxUYXNrKGUpIHtcbiAgICAvLyBnZXQgdGhlIHBhcmVudCBlbGVtZW50XG4gICAgY29uc3QgcGFyZW50ID0gZS5zcmNFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudFxuICAgIC8vIHVzZSB0aGUgZnVuY3Rpb24gdG8gZmluZCB0aGUgaW5kZXggb2YgdGhlIGFycmF5IHdoZXJlIHRoZSB0YXNrIGlzIHNhdmVkXG4gICAgY29uc3QgaSA9IHRhc2tTZWFyY2gocGFyZW50KVxuICAgIC8vIGRlbGV0ZXMgdGhlIG9iamVjdCBmcm9tIHRoZSBhcnJheVxuICAgIGFsbFRhc2tzLnNwbGljZShpLCAxKVxuICAgIC8vIHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHRoZSBET01cbiAgICBwYXJlbnQucmVtb3ZlKClcbn1cblxuLy8gd2lsbCBvcGVuIGFuIGVkaXQgZm9ybSBmb3IgdGhlIHRhc2tcbmV4cG9ydCBmdW5jdGlvbiBlZGl0VGFzayhlKSB7XG4gICAgLy8gZ2V0IHRoZSBwYXJlbnQgZWxlbWVudFxuICAgIGNvbnN0IHBhcmVudCA9IGUuc3JjRWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnRcbiAgICAvLyBmaW5kIHRoZSB0YXNrIGluIHRoZSBhbGxUYXNrcyBhcnJheVxuICAgIGNvbnN0IGkgPSB0YXNrU2VhcmNoKHBhcmVudClcblxuICAgIHBhcmVudC5hcHBlbmRDaGlsZChjcmVhdGVUYXNrRWRpdCgpKVxufVxuXG4vLyB0aGlzIGZ1bmN0aW9uIHVzZXMgdGhlIHRpdGxlIGFuZCBkYXRlIG9mIGEgdGFzayB0byBmaW5kIGl0cyBcbi8vIGluZGV4IGluIHRoZSBhcnJheSBhbmQgcmV0dXJucyBpdFxuZnVuY3Rpb24gdGFza1NlYXJjaCAocGFyZW50KSB7XG4gICAgLy8gc2F2ZSB0aGUgdGl0bGUgYW5kIGRhdGUgYnkgc3BsaXR0aW5nIHRoZSByZXR1cm5lZCBzdHJpbmdcbiAgICBjb25zdCB2YXJpYWJsZXMgPSBnZXRUYXNrVmFycyhwYXJlbnQpLnNwbGl0KCcuJylcbiAgICBjb25zb2xlLmxvZyh2YXJpYWJsZXMpXG5cbiAgICAvLyBjcmVhdGUgYSBuZXcgYXJyYXkgdGhhdCBzdG9yZXMgYWxsIGluZGV4ZXMgd2l0aCBzYW1lIHRpdGxlXG4gICAgY29uc3QgZmlyc3RTb3J0ID0gW11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbFRhc2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChhbGxUYXNrc1tpXS5nZXRUaXRsZSgpID09PSB2YXJpYWJsZXNbMF0pIHtcbiAgICAgICAgICAgIGZpcnN0U29ydC5wdXNoKGkpXG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gcmVwZWF0IHByb2Nlc3MgdG8gbmFycm93IGRvd24gaW5kZXhlcyBiYXNlZCBvZmYgb2YgZGF0ZVxuICAgIGNvbnN0IHNlY29uZFNvcnQgPSBbXVxuICAgIC8vIGhhdmUgdG8gc29ydCB0aHJvdWdoIGZpcnN0U29ydFtdIHRvIGZpbmQgYWxsIHRoZSBpbmRleGVzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaXJzdFNvcnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGFsbFRhc2tzW2ZpcnN0U29ydFtpXV0uZ2V0RGF0ZSgpID09IHZhcmlhYmxlc1sxXSkge1xuICAgICAgICAgICAgLy8gYXBwZW5kIHRob3NlIGluZGV4ZXMgdG8gc2Vjb25kU29ydFtdXG4gICAgICAgICAgICBzZWNvbmRTb3J0LnB1c2goZmlyc3RTb3J0W2ldKVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHVzaW5nIHNlY29uZFNvcnQgZmluZCB0aGUgdGFzayB3aXRoIGEgUHJvamVjdCB0aGF0IG1hdGNoZXMgbWVudSBzZWxlY3RlZFxuICAgIC8vIHJldHVybiB0aGUgaW5kZXhcbiAgICBpZiAobWVudVNlbGVjdGVkICE9ICdBbGwnKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2Vjb25kU29ydC5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBpZiAoYWxsVGFza3Nbc2Vjb25kU29ydFswXV0uZ2V0UHJvamVjdCgpID09PSBtZW51U2VsZWN0ZWQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWNvbmRTb3J0W2ldXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gaWYgdGhlcmUgYXJlIG11bHRpcGxlcyBpbiAnQWxsJywgcmV0dXJuIHRoZSBpbmRleCB0byB0aGUgZmlyc3QgdGFza1xuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gc2Vjb25kU29ydFswXVxuICAgIH1cbn1cblxuLy8gZnVuY3RpbiByZXR1cm5zIHRydWUgaWYgdGhlIGR1ZSBkYXRlIGlzIHRvZGF5IG9yIGZyb20gdGhlIHBhc3RcbmZ1bmN0aW9uIGlzRHVlVG9kYXkgKGRhdGUpIHtcbiAgICAvLyBjcmVhdGUgdG9kYXkncyBkYXRlXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpXG4gICAgLy8gc3BsaXQgdGhlIGRhdGUgZnJvbSB0aGUgdGFzayBpbnRvIGEgbmV3IGFycmF5XG4gICAgY29uc3QgY3VycmVudERhdGVzID0gZGF0ZS5zcGxpdCgnLScpXG4gICAgLy8gaWYgdGhlIHllYXIgaXMgbGVzcyB0aGFuIGN1cnJlbnQgeWVhciByZXR1cm4gdHJ1ZVxuICAgIGlmIChjdXJyZW50RGF0ZXNbMF0gPCB0b2RheS5nZXRGdWxsWWVhcigpKSByZXR1cm4gdHJ1ZTtcbiAgICAvLyBpZiBtb250aCBpcyBtb250aCBpcyBsZXNzIHRoYW4gY3VycmVudCByZXR1cm4gdHJ1ZVxuICAgIGlmIChjdXJyZW50RGF0ZXNbMV0gPCB0b2RheS5nZXRNb250aCgpKSByZXR1cm4gdHJ1ZTtcbiAgICAvLyBpZiBkYXkgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGN1cnJlbnQgZGF5IHJldHVybiB0cnVlXG4gICAgaWYgKGN1cnJlbnREYXRlc1syXSA8PSB0b2RheS5nZXREYXRlKCkpIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIGZhbHNlXG59XG5cbmZ1bmN0aW9uIGdldFRhc2tWYXJzIChwYXJlbnQpIHtcbiAgICAvLyBnZXQgdGhlIHRpdGxlIGFuZCBkYXRlXG4gICAgY29uc3QgdGl0bGUgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLnRhc2stdGl0bGUnKS50ZXh0Q29udGVudFxuICAgIGNvbnN0IGRhdGUgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLnRhc2stZGF0ZScpLnRleHRDb250ZW50XG5cbiAgICAvLyByZXR1cm4gdGl0bGUgYW5kIGRhdGUgYXMgYSBzdHJpbmdcbiAgICByZXR1cm4gdGl0bGUgKyAnLicgKyBkYXRlXG59IiwiaW1wb3J0IHsgZGVsVGFzaywgZWRpdFRhc2sgfSBmcm9tIFwiLi90YXNrLWNvbnRyb2wuanNcIlxuXG4vLyBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0YXNrIGZvciB0aGUgRE9NXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVUYXNrICh0aXRsZSwgZGF0ZSkge1xuICAgIC8vY3JlYXRlIGRlZmF1bHQgZGl2IHRvIGhvbGQgYWxsIHRoZSBpbmZvXG4gICAgY29uc3QgdGFza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGFza0Rpdi5jbGFzc0xpc3QuYWRkKCd0YXNrJylcbiAgICB0YXNrRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2stc3BhbicpXG5cbiAgICAvL2NyZWF0ZSB0d28gaGFsdmVzIGZvciB0aGUgZGl2IFxuICAgIGNvbnN0IHRhc2tTdGFydCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgY29uc3QgdGFza0VuZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGFza1N0YXJ0LmNsYXNzTGlzdC5hZGQoJ3Rhc2stc3RhcnQnKVxuICAgIHRhc2tFbmQuY2xhc3NMaXN0LmFkZCgndGFzay1lbmQnKVxuXG4gICAgLy9jcmVhdGUgYnV0dG9uIHRvIGNvbXBsZXRlIHRhc2tcbiAgICBjb25zdCBjaGVja0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgIGNoZWNrQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3Rhc2stY2lyY2xlJylcbiAgICBjaGVja0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7ZGVsVGFzayhlKX0pXG5cbiAgICAvL2NyZWF0ZSBkaXYgdG8gaG9sZCB0aXRsZSBvZiB0YXNrXG4gICAgY29uc3QgdGFza1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LmFkZCgndGFzay10aXRsZScpXG4gICAgdGFza1RpdGxlLnRleHRDb250ZW50ID0gdGl0bGVcblxuICAgIC8vY3JlYXRlIGRpdiB0byBob2xkIHRoZSBkYXRlXG4gICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRhc2tEYXRlLmNsYXNzTGlzdC5hZGQoJ3Rhc2stZGF0ZScpXG4gICAgdGFza0RhdGUudGV4dENvbnRlbnQgPSBkYXRlXG5cbiAgICAvL2NyZWF0ZSB0aGUgZWRpdCBidXR0b24vaW1nXG4gICAgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXG4gICAgZWRpdEJ1dHRvbi5zcmMgPSAnaW1hZ2VzL2VkaXQuc3ZnJ1xuICAgIGVkaXRCdXR0b24uc2V0QXR0cmlidXRlKCdhbHQnLCAnZWRpdCBidXR0b24nKVxuICAgIGVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge2VkaXRUYXNrKGUpfSlcblxuICAgIC8vIEFwcGVuZCBhbGwgZWxlbWVudHMgdG9nZXRoZXJcbiAgICB0YXNrRW5kLmFwcGVuZENoaWxkKHRhc2tEYXRlKVxuICAgIHRhc2tFbmQuYXBwZW5kQ2hpbGQoZWRpdEJ1dHRvbilcblxuICAgIHRhc2tTdGFydC5hcHBlbmRDaGlsZChjaGVja0J1dHRvbilcbiAgICB0YXNrU3RhcnQuYXBwZW5kQ2hpbGQodGFza1RpdGxlKVxuXG4gICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrU3RhcnQpXG4gICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrRW5kKVxuXG4gICAgcmV0dXJuIHRhc2tEaXZcbn0iLCJpbXBvcnQgeyBhZGRUaXRsZSwgZ2V0VGl0bGVzLCBkZWxldGVUaXRsZX0gZnJvbSBcIi4vcHJvamVjdHNcIlxuaW1wb3J0IHsgcmVuZGVyVGFza3MgfSBmcm9tIFwiLi90YXNrLWNvbnRyb2wuanNcIlxuXG4vLyB2YXJpYWJsZSB1c2VkIHRvIGtlZXAgdHJhY2sgb2Ygd2hpY2ggbWVudSBpdGVtIGlzIHNlbGVjdGVkXG5leHBvcnQgbGV0IG1lbnVTZWxlY3RlZCA9ICdBbGwnXG5cbi8vQWRkIGV2ZW50cyB0byB0aGUgZGVmYXVsdCBtZW51IG9wdGlvbnNcbmNvbnN0IG1lbnVJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWl0ZW0nKVxubWVudUl0ZW1zLmZvckVhY2goYWRkTWVudUl0ZW1FdmVudClcblxuLy8gTG9hZCBsb2NhbFN0b3JhZ2UgZGF0YSBpbnRvIHRoZSBET01cbmNvbnN0IG1lbnVUaXRsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHMnKVxuY29uc3QgYXJyYXkgPSBnZXRUaXRsZXMoKVxuZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgIG1lbnVUaXRsZXMuYXBwZW5kQ2hpbGQoY3JlYXRlTWVudUl0ZW0oYXJyYXlbaV0pKVxufVxuXG4vLyBFdmVudCBsaXN0ZW5lciBmb3IgdGhlIFwiK1wiIGJ1dHRvbiBiZXNpZGUgcHJvamVjdCB0aXRsZVxuY29uc3QgcGx1c0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LXRpdGxlID4gc3ZnJylcbnBsdXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgLy9DYWxscyBmdW5jdGlvbiB0byBhZGQgdGhlIHByb2plY3QgZm9ybSB0byB0aGUgRE9NXG4gICAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cycpXG4gICAgcHJvamVjdC5hcHBlbmRDaGlsZChjcmVhdGVGb3JtKCkpXG5cbn0pXG5cbi8vIFJldHVybnMgdGhlIERPTSBlbGVtZW50IG9mIGEgbWVudS1pdGVtIFxuLy8gYSBzaW1wbGUgcHJvamVjdCBpcyBhZGRlZCB0byB0aGUgbGlzdCBvbiB0aGUgRE9NXG5mdW5jdGlvbiBjcmVhdGVNZW51SXRlbSh0aXRsZSkge1xuICAgIC8vICBjcmVhdGUgdGhlIG1lbnUtaXRlbSBkaXYgdG8gaG9sZCB0aGUgZWxlbWVudHNcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdtZW51LWl0ZW0nKVxuICAgIC8vIGNyZWF0ZSB0aGUgdGl0bGUgZGl2XG4gICAgY29uc3QgdGl0bGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRpdGxlRGl2LnRleHRDb250ZW50ID0gdGl0bGVcbiAgICAvLyBjcmVhdGUgdGhlIHRyYXNoIGJpbiBpbWdcbiAgICBjb25zdCB0cmFzaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXG4gICAgdHJhc2guc2V0QXR0cmlidXRlKCdzcmMnLCAnLi9pbWFnZXMvdHJhc2gtMi5zdmcnKVxuICAgIHRyYXNoLnNldEF0dHJpYnV0ZSgnYWx0JywgJ3RyYXNoIGljb24nKVxuXG4gICAgLy8gYWRkIGV2ZW50bGlzdGVuZXIgdG8gdHJhc2ggaWNvblxuICAgIHRyYXNoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZGVsZXRlVGl0bGUoZS5zcmNFbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQpXG4gICAgICAgIGUuc3JjRWxlbWVudC5jbG9zZXN0KCcubWVudS1pdGVtJykucmVtb3ZlKClcbiAgICB9KVxuXG4gICAgLy8gYXBwZW5kIHRoZSB0d28gY2hpbGRyZW5cbiAgICBkaXYuYXBwZW5kQ2hpbGQodGl0bGVEaXYpXG4gICAgZGl2LmFwcGVuZENoaWxkKHRyYXNoKVxuXG4gICAgYWRkTWVudUl0ZW1FdmVudChkaXYpXG4gICAgXG4gICAgcmV0dXJuIGRpdlxufVxuXG4vLyByZXR1cm5zIGEgZm9ybSBmb3IgRE9NIHRvIGJlIHVzZWQgdG8gY3JlYXRlIGEgbmV3IHByb2plY3RcbmZ1bmN0aW9uIGNyZWF0ZUZvcm0oKSB7XG4gICAgLy8gY3JlYXRlIHRoZSBkaXYgdGhhdCBlbmNvbXBhc3NlcyB0aGUgZW50aXJlIGJsb2NrXG4gICAgY29uc3QgbWVudUZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIG1lbnVGb3JtLmNsYXNzTGlzdC5hZGQoJ21lbnUtZm9ybScpXG5cbiAgICAvLyBjcmVhdGUgdGhlIGZvcm0gYW5kIGFkZCBhdHRyaWJ1dGVzXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKVxuICAgIGZvcm0uc2V0QXR0cmlidXRlKCdhY3Rpb24nLCBcIlwiKVxuICAgIGZvcm0uc2V0QXR0cmlidXRlKCdtZXRob2QnLCAncG9zdCcpXG5cbiAgICAvLyBjcmVhdGUgdGhlIGlucHV0IGJveCBmb3IgdGV4dFxuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKVxuICAgIGlucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0JylcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3Byb2plY3QtdGl0bGUnKVxuICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsICdwcm9qZWN0VGl0bGUnKVxuICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnbWF4bGVuZ3RoJywgJzE1JylcblxuICAgIC8vIGNyZWF0ZSBkaXYgdG8gZW5jb21wYXNzIGJ1dHRvbnNcbiAgICBjb25zdCBwcm9qZWN0QnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgcHJvamVjdEJ1dHRvbnMuY2xhc3NMaXN0LmFkZCgncHJvamVjdC1idXR0b25zJylcblxuICAgIC8vY3JlYXRlIHRoZSBidXR0b25zXG4gICAgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICBhZGRCdXR0b24uY2xhc3NMaXN0LmFkZCgnYWRkLWJ1dHRvbicpXG4gICAgYWRkQnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKVxuICAgIGFkZEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQWRkXCJcblxuICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgY2FuY2VsQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhbmNlbC1idXR0b24nKVxuICAgIGNhbmNlbEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJylcbiAgICBjYW5jZWxCdXR0b24udGV4dENvbnRlbnQgPSBcIkNhbmNlbFwiXG5cbiAgICAvLyBhZGQgZXZlbnRsaXN0ZW5lcnNcbiAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBzYXZlKGUpXG4gICAgfSlcbiAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBjYW5jZWwoZSlcbiAgICB9KVxuXG4gICAgLy8gQXBwZW5kIHRoZSBidXR0b25zIHRvIHByb2plY3RCdXR0b25zXG4gICAgcHJvamVjdEJ1dHRvbnMuYXBwZW5kQ2hpbGQoYWRkQnV0dG9uKVxuICAgIHByb2plY3RCdXR0b25zLmFwcGVuZENoaWxkKGNhbmNlbEJ1dHRvbilcblxuICAgIC8vIEFwcGVuZCBpbnB1dCB0byBmb3JtIHRoZW4gcHJvamVjdEJ1dHRvbnMgdG8gZm9ybVxuICAgIGZvcm0uYXBwZW5kQ2hpbGQoaW5wdXQpXG4gICAgZm9ybS5hcHBlbmRDaGlsZChwcm9qZWN0QnV0dG9ucylcblxuICAgIC8vIGFwcGVuZCBmb3JtIHRvIHRoZSBtYWluIGRpdiAobWVudUZvcm0pXG4gICAgbWVudUZvcm0uYXBwZW5kQ2hpbGQoZm9ybSlcblxuICAgIHJldHVybiBtZW51Rm9ybVxufVxuXG5mdW5jdGlvbiBzYXZlKGUpIHtcbiAgICAvLyBzZWxlY3QgdGhlIG1lbnUtZm9ybSBwYXJlbnQgbm9kZVxuICAgIGNvbnN0IG1lbnVGb3JtID0gZS5zcmNFbGVtZW50LmNsb3Nlc3QoJy5tZW51LWZvcm0nKVxuICAgIC8vIHNlbGVjdCB0aGUgY2hpbGQgb2YgbWVudS1mb3JtIGFuZCB0aGUgY2hpbGQgb2YgdGhhdCB0byBhcXVpcmUgdGhlIGlucHV0IG5vZGUuXG4gICAgLy8gVGFrZSB0aGUgdmFsdWUgb2YgdGhlIGlucHV0IG5vZGVcbiAgICBjb25zdCBpbnB1dFRleHQgPSBtZW51Rm9ybS5maXJzdENoaWxkLmZpcnN0Q2hpbGQudmFsdWVcbiAgICAvLyBpbnNlcnQgYSBuZXcgbWVudSBpdGVtIGFmdGVyIHRoZSBmb3JtXG4gICAgbWVudUZvcm0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmVuZCcsIGNyZWF0ZU1lbnVJdGVtKGlucHV0VGV4dCkpXG4gICAgLy8gYWRkIHRoZSB0aXRsZSB0byB0aGUgYXJyYXkgXG4gICAgYWRkVGl0bGUoaW5wdXRUZXh0KVxuXG4gICAgLy8gd2hlbiBldmVyeXRoaW5nIGlzIGRvbmUsIGRlbGV0ZSB0aGUgZm9ybVxuICAgIGNhbmNlbChlKVxufVxuXG4vLyBmdW5jdGlvbiB1c2VkIHRvIGRlbGV0ZSBtZW51LWZvcm1cbmZ1bmN0aW9uIGNhbmNlbChlKSB7XG4gICAgLy8gZmluZCB0aGUgY2xvc2VzdCBtZW51IGZvcm0gYW5kIHJlbW92ZSBpdFxuICAgIGUuc3JjRWxlbWVudC5jbG9zZXN0KCcubWVudS1mb3JtJykucmVtb3ZlKClcbn1cblxuLy8gYWRkIGV2ZW50IGxpc3RlbmVyIGZvciBhIG1lbnUtaXRlbVxuZnVuY3Rpb24gYWRkTWVudUl0ZW1FdmVudCAoaXRlbSkge1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAvLyByZW1vdmVzIHRoZSBjbGFzcyB0aGF0IGlzIGhpZ2hsaWdodGluZyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGl0ZW1cbiAgICAgICAgY29uc3QgY3VycmVudFNlbGVjdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnUtc2VsZWN0ZWQnKVxuICAgICAgICAvLyBtYWtlIHN1cmUgY3VycmVudFNlbGVjdGVkIGlzbid0IG51bGwgdG8gcHJldmVudCBhbiBlcnJvclxuICAgICAgICAvLyBjdXJyZW50U2VsZWN0ZWQgd2lsbCBiZSBudWxsIHdoZW4gdGhlIHRyYXNoIGljb24gaXMgY2xpY2tlZCB0byBkZWxldGVcbiAgICAgICAgaWYgKGN1cnJlbnRTZWxlY3RlZCAhPSBudWxsKXtcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZC5jbGFzc0xpc3QucmVtb3ZlKCdtZW51LXNlbGVjdGVkJylcbiAgICAgICAgfVxuICAgICAgICAvL2FkZCB0aGUgbWVudS1zZWxlY3RlZCBjbGFzcyB0byB0aGUgaXRlbSB0aGF0IHdhcyBzZWxlY3RlZFxuICAgICAgICBlLnNyY0VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWVudS1zZWxlY3RlZCcpXG4gICAgICAgIC8vIGNhbGwgZnVuY3Rpb24gdG8gcmVuZGVyIHRoZSB0YXNrc1xuICAgICAgICBtZW51U2VsZWN0ZWQgPSBlLnNyY0VsZW1lbnQuZmlyc3RDaGlsZC50ZXh0Q29udGVudFxuICAgICAgICByZW5kZXJUYXNrcyhtZW51U2VsZWN0ZWQpXG4gICAgfSlcbn1cbiJdLCJuYW1lcyI6WyJwcm9qZWN0VGl0bGVzIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNwbGl0Iiwic2V0SXRlbSIsInRhc2tQcm90byIsImdldFRpdGxlIiwidGhpcyIsInRpdGxlIiwic2V0VGl0bGUiLCJnZXREZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uIiwic2V0RGVzY3JpcHRpb24iLCJnZXREYXRlIiwiZGF0ZSIsInNldERhdGUiLCJnZXRQcmlvcml0eSIsInByaW9yaXR5Iiwic2V0UHJpb3JpdHkiLCJnZXRQcm9qZWN0IiwicHJvamVjdCIsInNldFByb2plY3QiLCJjcmVhdGVUYXNrRWRpdCIsInRhc2tGb3JtIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiZm9ybSIsInNldEF0dHJpYnV0ZSIsInRvcEVkaXQiLCJlZGl0VGl0bGUiLCJ2YWx1ZSIsImRhdGVEaXYiLCJkYXRlTGFiZWwiLCJ0ZXh0Q29udGVudCIsImlucHV0RGF0ZSIsImFwcGVuZENoaWxkIiwidGV4dEFyZWFEaXYiLCJ0ZXh0QXJlYSIsImxvd2VyRGl2IiwiZW5jb21wYXNEaXYiLCJwcmlvcml0eUxhYmVsIiwicHJpb3JpdHlTZWxlY3QiLCJpIiwiY3JlYXRlT3B0aW9uIiwiYnV0dG9uRGl2IiwiZGVsQnV0dG9uIiwic2F2ZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwic3JjRWxlbWVudCIsImNsb3Nlc3QiLCJxdWVyeVNlbGVjdG9yIiwiYWxsVGFza3MiLCJwdXNoIiwib2JqIiwiT2JqZWN0IiwiY3JlYXRlIiwidGFzayIsIm1lbnVTZWxlY3RlZCIsInJlbmRlclRhc2tzIiwicGFyZW50RWxlbWVudCIsInJlbW92ZSIsInNhdmUiLCJvcHRpb24iLCJhZGRUYXNrIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpdGVtIiwibmV3QXJyYXkiLCJmaWx0ZXIiLCJ0b2RheSIsIkRhdGUiLCJjdXJyZW50RGF0ZXMiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiaXNEdWVUb2RheSIsInRhc2tzRGl2IiwiZWxlIiwidGFza0RpdiIsInRhc2tTdGFydCIsInRhc2tFbmQiLCJjaGVja0J1dHRvbiIsInBhcmVudCIsInRhc2tTZWFyY2giLCJzcGxpY2UiLCJkZWxUYXNrIiwidGFza1RpdGxlIiwidGFza0RhdGUiLCJlZGl0QnV0dG9uIiwic3JjIiwiZWRpdFRhc2siLCJjcmVhdGVUYXNrIiwiaW5zZXJ0QmVmb3JlIiwidmFyaWFibGVzIiwiZ2V0VGFza1ZhcnMiLCJjb25zb2xlIiwibG9nIiwiZmlyc3RTb3J0IiwibGVuZ3RoIiwic2Vjb25kU29ydCIsImFkZE1lbnVJdGVtRXZlbnQiLCJtZW51VGl0bGVzIiwiYXJyYXkiLCJjcmVhdGVNZW51SXRlbSIsImRpdiIsInRpdGxlRGl2IiwidHJhc2giLCJpbmRleCIsImluZGV4T2YiLCJkZWxldGVUaXRsZSIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJjYW5jZWwiLCJjdXJyZW50U2VsZWN0ZWQiLCJmaXJzdENoaWxkIiwibWVudUZvcm0iLCJpbnB1dCIsInByb2plY3RCdXR0b25zIiwiYWRkQnV0dG9uIiwiY2FuY2VsQnV0dG9uIiwiaW5wdXRUZXh0IiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiY3JlYXRlRm9ybSJdLCJzb3VyY2VSb290IjoiIn0=