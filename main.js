(()=>{"use strict";let t=[];localStorage.getItem("projectTitles")?t=localStorage.getItem("projectTitles").split(","):localStorage.setItem("projectTitles",[]);const e=(t,e,s,i,r,c)=>{let l=Object.create(n);return l.title=t,l.description=s,l.date=e,l.priority=i,l.project=r,l.id=c,l},n={getTitle(){return this.title},setTitle(t){this.title=t},getDescription(){return this.description},setDescription(t){this.description=t},getDate(){return this.date},setDate(t){this.date=t},getPriority(){return this.priority},setPriority(t){this.priority=t},getProject(){return this.project},setProject(t){this.project=t},getId(){return this.id},setId(t){this.id=t}};function s(t,n,s,c,o){const u=document.createElement("div");u.classList.add("task-span"),u.classList.add("task-form"),u.id=o;const m=document.createElement("form");m.setAttribute("action",""),m.setAttribute("method","post");const p=document.createElement("div");p.classList.add("top-form-task");const h=document.createElement("input");h.setAttribute("type","text"),h.setAttribute("id","title-edit"),h.setAttribute("placeholder","Title"),h.setAttribute("name","title-edit"),h.setAttribute("maxlength","20"),h.value=t;const E=document.createElement("div"),g=document.createElement("label");g.textContent="Date: ",g.setAttribute("for","date");const v=document.createElement("input");v.setAttribute("type","date"),v.setAttribute("id","date"),v.setAttribute("name","date"),v.value=n,E.appendChild(g),E.appendChild(v),p.appendChild(h),p.appendChild(E),m.appendChild(p);const b=document.createElement("div");b.classList.add("textarea-div");const C=document.createElement("textarea");C.setAttribute("placeholder","Description"),C.value=s,b.appendChild(C),m.appendChild(b);const f=document.createElement("div");f.classList.add("lower-form-task");const y=document.createElement("div"),A=document.createElement("label");A.textContent="Priority: ",A.setAttribute("for","priority");const k=document.createElement("select");k.setAttribute("name","priority"),k.setAttribute("id","priority");for(let t=3;t>=1;t--)k.appendChild(i(t));k.value=c,y.appendChild(A),y.appendChild(k);const S=document.createElement("div"),L=document.createElement("button");L.textContent="Del",L.setAttribute("type","button"),L.addEventListener("click",(t=>{d(t)}));const x=document.createElement("button");return x.textContent="Save",x.setAttribute("type","button"),x.addEventListener("click",(t=>{!function(t){const n=t.srcElement.closest(".task-form"),s=n.querySelector("#title-edit").value,i=n.querySelector("#date").value,c=n.querySelector("textarea").value,o=n.querySelector("#priority").value;let d=n.id;"null"==n.id?(d=r.length,r.push(e(s,i,c,o,a,d))):(r[+d].setTitle(s),r[+d].setDate(i),r[+d].setDescription(c),r[+d].setPriority(o)),l(a),n.remove(),localStorage.setItem("allTasks",JSON.stringify(r))}(t)})),S.appendChild(L),S.appendChild(x),f.appendChild(y),f.appendChild(S),m.appendChild(f),u.appendChild(m),u}function i(t){const e=document.createElement("option");return e.textContent=t,e.setAttribute("value",t),e}let r=[];null!=JSON.parse(localStorage.getItem("allTasks"))&&(r=JSON.parse(localStorage.getItem("allTasks")),r.forEach(((t,n)=>{r[n]=e(t.title,t.date,t.description,t.priority,t.project,t.id)}))),l("All");const c=document.querySelector(".add-task");function l(t){o();const e=r.filter((e=>"Today"==t?function(t){const e=new Date,n=t.split("-");return n[0]<e.getFullYear()||n[1]<e.getMonth()||n[2]<=e.getDate()}(e.getDate()):"Important"==t?1==e.getPriority():"All"==t||e.getProject()==t)),n=document.querySelector(".add-task"),i=document.querySelector("#tasks");e.forEach((t=>{const e=function(t,e,n,i){const c=document.createElement("div");c.classList.add("task"),c.classList.add("task-span"),c.id=n;const l=document.createElement("div"),o=document.createElement("div");l.classList.add("task-start"),o.classList.add("task-end");const a=document.createElement("span");a.classList.add("task-circle"),1==i?a.style.cssText="box-shadow: 0 0 5px rgb(255, 60, 20), inset 0 0 5px rgb(255, 60, 20)":2==i&&(a.style.cssText="box-Shadow: 0 0 5px #C9B400, inset 0 0 5px #C9B400"),a.addEventListener("click",(t=>{d(t)}));const u=document.createElement("div");u.classList.add("task-title"),u.textContent=t;const m=document.createElement("div");m.classList.add("task-date"),m.textContent=e;const p=document.createElement("img");return p.src="images/edit.svg",p.setAttribute("alt","edit button"),p.addEventListener("click",(t=>{!function(t){const e=t.srcElement.parentElement.parentElement,n=+e.id;e.insertAdjacentElement("afterend",s(r[n].getTitle(),r[n].getDate(),r[n].getDescription(),r[n].getPriority(),r[n].getId())),e.remove()}(t)})),o.appendChild(m),o.appendChild(p),l.appendChild(a),l.appendChild(u),c.appendChild(l),c.appendChild(o),c}(t.getTitle(),t.getDate(),t.getId(),t.getPriority());i.insertBefore(e,n)}))}function o(){document.querySelectorAll(".task-span").forEach((t=>{t.remove()}))}function d(t){const e=t.srcElement.parentElement.parentElement,n=+e.id;r.splice(n,1),e.remove();for(let t=0;t<r.length;t++)r[t].setId(t);o(),l(a),localStorage.setItem("allTasks",JSON.stringify(r))}c.addEventListener("click",(()=>{document.querySelector("#tasks").insertBefore(s(null,null,null,3,"null"),c)}));let a="All";document.querySelectorAll(".menu-item").forEach(E);const u=document.querySelector(".projects"),m=t;for(let t=0;t<m.length;t++)u.appendChild(p(m[t]));function p(e){const n=document.createElement("div");n.classList.add("menu-item");const s=document.createElement("div");s.textContent=e;const i=document.createElement("img");return i.setAttribute("src","./images/trash-2.svg"),i.setAttribute("alt","trash icon"),i.addEventListener("click",(e=>{!function(e){const n=t.indexOf(e);n>-1&&(t.splice(n,1),localStorage.setItem("projectTitles",t))}(e.srcElement.previousElementSibling.textContent),e.srcElement.closest(".menu-item").remove()})),n.appendChild(s),n.appendChild(i),E(n),n}function h(t){t.srcElement.closest(".menu-form").remove()}function E(t){t.addEventListener("click",(t=>{const e=document.querySelector(".menu-selected");null!=e&&e.classList.remove("menu-selected"),t.srcElement.classList.add("menu-selected");try{a=t.srcElement.firstChild.textContent}catch(t){console.log("Project Deleted")}l(a)}))}document.querySelector(".project-title > svg").addEventListener("click",(()=>{document.querySelector(".projects").appendChild(function(){const e=document.createElement("div");e.classList.add("menu-form");const n=document.createElement("form");n.setAttribute("action",""),n.setAttribute("method","post");const s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("id","project-title"),s.setAttribute("name","projectTitle"),s.setAttribute("maxlength","15");const i=document.createElement("div");i.classList.add("project-buttons");const r=document.createElement("button");r.classList.add("add-button"),r.setAttribute("type","button"),r.textContent="Add";const c=document.createElement("button");return c.classList.add("cancel-button"),c.setAttribute("type","button"),c.textContent="Cancel",r.addEventListener("click",(e=>{!function(e){const n=e.srcElement.closest(".menu-form"),s=n.firstChild.firstChild.value;var i;n.insertAdjacentElement("afterend",p(s)),i=s,t.push(i),localStorage.setItem("projectTitles",t),h(e)}(e)})),c.addEventListener("click",(t=>{h(t)})),i.appendChild(r),i.appendChild(c),n.appendChild(s),n.appendChild(i),e.appendChild(n),e}())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFlaEYsWUFBWWlGLEdBQzNCRCxFQUFlaEYsWUFBWWtGLEdBRzNCM0YsRUFBS1MsWUFBWStFLEdBQ2pCeEYsRUFBS1MsWUFBWWdGLEdBR2pCRixFQUFTOUUsWUFBWVQsR0FFZHVGLENBQ1gsQ0F0RndCTSxHQUFZLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL2pzLW1vZHVsZXMvcHJvamVjdHMuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9qcy1tb2R1bGVzL3Rhc2stb2JqZWN0LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvanMtbW9kdWxlcy90YXNrLWVkaXQtZG9tLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvanMtbW9kdWxlcy90YXNrLWNvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9qcy1tb2R1bGVzL3Rhc2stZG9tLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvanMtbW9kdWxlcy9wcm9qZWN0cy1jb250cm9sLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNyZWF0ZSBhcnJheSBmb3IgcHJvZ3JhbSB0byBydW4gb2ZmXG5sZXQgcHJvamVjdFRpdGxlcyA9IFtdXG5cbi8vIGNoZWNrIGlmIHRoZXJlIGlzIGFueSBsb2NhbHN0b3JhZ2UsIGlmIG5vdCBjcmVhdGUgbmV3IGFycmF5IGluIGxvY2Fsc3RvcmFnZVxuaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvamVjdFRpdGxlcycpKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RUaXRsZXMnLCBbXSlcbiAgfSBlbHNlIHtcbiAgICAvLyBsb2FkIGxvY2FsU3RvcmFnZSBkYXRhIGludG8gbWVtb3J5XG4gICAgcHJvamVjdFRpdGxlcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0VGl0bGVzJykuc3BsaXQoJywnKVxuICB9XG5cbmZ1bmN0aW9uIGFkZFRpdGxlKHRpdGxlKSB7XG4gICAgcHJvamVjdFRpdGxlcy5wdXNoKHRpdGxlKVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0VGl0bGVzJywgcHJvamVjdFRpdGxlcylcbn1cblxuZnVuY3Rpb24gZ2V0VGl0bGVzKCkge1xuICAgIHJldHVybiBwcm9qZWN0VGl0bGVzO1xufVxuXG5mdW5jdGlvbiBkZWxldGVUaXRsZSh0aXRsZSkge1xuICAgIGNvbnN0IGluZGV4ID0gcHJvamVjdFRpdGxlcy5pbmRleE9mKHRpdGxlKTtcbiAgICBpZiAoaW5kZXggPiAtMSkgeyAvLyBvbmx5IHNwbGljZSBhcnJheSB3aGVuIGl0ZW0gaXMgZm91bmRcbiAgICAgICAgcHJvamVjdFRpdGxlcy5zcGxpY2UoaW5kZXgsIDEpOyAvLyAybmQgcGFyYW1ldGVyIG1lYW5zIHJlbW92ZSBvbmUgaXRlbSBvbmx5XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0VGl0bGVzJywgcHJvamVjdFRpdGxlcylcbiAgICB9XG59XG5cbmV4cG9ydCB7YWRkVGl0bGUsIGdldFRpdGxlcywgZGVsZXRlVGl0bGV9O1xuIiwiLy8gZmFjdG9yeSBmdW5jdGlvbiB1c2VkIHRvIGNvbnN0cnVjdCB0YXNrIG9iamVjdFxuZXhwb3J0IGNvbnN0IHRhc2sgPSAodGl0bGUsIGRhdGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgcHJvamVjdCwgaWQpID0+IHtcbiAgICBsZXQgb2JqID0gT2JqZWN0LmNyZWF0ZSh0YXNrUHJvdG8pXG4gICAgb2JqLnRpdGxlID0gdGl0bGVcbiAgICBvYmouZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvblxuICAgIG9iai5kYXRlID0gZGF0ZVxuICAgIG9iai5wcmlvcml0eSA9IHByaW9yaXR5XG4gICAgLy8gdmFyaWFibGUgdXNlZCB0byBkZXRlcm1pbmUgd2hhdCBwcm9qZWN0IHRoZSB0YXNrIGlzIGluXG4gICAgb2JqLnByb2plY3QgPSBwcm9qZWN0XG4gICAgb2JqLmlkID0gaWRcbiAgICByZXR1cm4gb2JqXG59XG5cbi8vR3JlYXQgcHJvdG90eXBlIGZvciB0YXNrKCkgdG8gc3RvcmUgYWxsIHRoZSBtZXRob2RzIGZvciBwcm9ncmFtIHRvIHJ1biBmYXN0ZXJcbmNvbnN0IHRhc2tQcm90byA9IHtcbiAgICAvLyBjcmVhdGUgYWxsIGdldHRlcnMgYW5kIHNldHRlcnMgKG9ubHkgZm9yIG1lbW9yeSB1c2UpXG4gICAgZ2V0VGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpdGxlXG4gICAgfSxcbiAgICBzZXRUaXRsZSh0aXRsZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGVcbiAgICB9LFxuICAgIGdldERlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXNjcmlwdGlvblxuICAgIH0sXG4gICAgc2V0RGVzY3JpcHRpb24oZGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uXG4gICAgfSxcbiAgICBnZXREYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlXG4gICAgfSxcbiAgICBzZXREYXRlKGRhdGUpIHtcbiAgICAgICAgdGhpcy5kYXRlID0gZGF0ZVxuICAgIH0sXG4gICAgZ2V0UHJpb3JpdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaW9yaXR5XG4gICAgfSxcbiAgICBzZXRQcmlvcml0eShwcmlvcml0eSkge1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHlcbiAgICB9LFxuICAgIGdldFByb2plY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3RcbiAgICB9LFxuICAgIHNldFByb2plY3QocHJvamVjdCkge1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0XG4gICAgfSxcbiAgICBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWRcbiAgICB9LFxuICAgIHNldElkKGlkKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZFxuICAgIH0sXG59XG5cbiIsImltcG9ydCB7IHNhdmUgfSBmcm9tICcuL3Rhc2stY29udHJvbC5qcydcbmltcG9ydCB7IGRlbFRhc2sgfSBmcm9tICcuL3Rhc2stY29udHJvbC5qcydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlVGFza0VkaXQgKHRpdGxlLCBkYXRlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGlkKSB7XG4gICAgLy9jcmVhdGUgZGl2IHRvIGhvbGQgYWxsIHRoZSBlbGVtZW50c1xuICAgIGNvbnN0IHRhc2tGb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0YXNrRm9ybS5jbGFzc0xpc3QuYWRkKCd0YXNrLXNwYW4nKVxuICAgIHRhc2tGb3JtLmNsYXNzTGlzdC5hZGQoJ3Rhc2stZm9ybScpXG4gICAgdGFza0Zvcm0uaWQgPSBpZFxuXG4gICAgLy9jcmVhdGUgdGhlIGZvcm0gXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKVxuICAgIGZvcm0uc2V0QXR0cmlidXRlKCdhY3Rpb24nLCAnJylcbiAgICBmb3JtLnNldEF0dHJpYnV0ZSgnbWV0aG9kJywgJ3Bvc3QnKVxuXG4gICAgLy9zdGFydCBieSBjcmVhdGluZyBlbGVtZW50cyBmb3IgdGhlIHRvcCBvZiB0aGUgZm9ybVxuICAgIC8vdGhlIHRpdGxlIGFuZCBkYXRlIGFyZSBpbmxjdWRlZCBoZXJlXG4gICAgY29uc3QgdG9wRWRpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdG9wRWRpdC5jbGFzc0xpc3QuYWRkKCd0b3AtZm9ybS10YXNrJylcblxuICAgIC8vaW5wdXQgZm9yIHRoZSB0aXRsZVxuICAgIGNvbnN0IGVkaXRUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JylcbiAgICBlZGl0VGl0bGUuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKVxuICAgIGVkaXRUaXRsZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RpdGxlLWVkaXQnKVxuICAgIGVkaXRUaXRsZS5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ1RpdGxlJylcbiAgICBlZGl0VGl0bGUuc2V0QXR0cmlidXRlKCduYW1lJywgJ3RpdGxlLWVkaXQnKVxuICAgIGVkaXRUaXRsZS5zZXRBdHRyaWJ1dGUoJ21heGxlbmd0aCcsICcyMCcpXG4gICAgZWRpdFRpdGxlLnZhbHVlID0gdGl0bGUgXG5cbiAgICAvL2lucHV0IGZvciB0aGUgZGF0ZVxuICAgIGNvbnN0IGRhdGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGNvbnN0IGRhdGVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJylcbiAgICBkYXRlTGFiZWwudGV4dENvbnRlbnQgPSAnRGF0ZTogJ1xuICAgIGRhdGVMYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsICdkYXRlJylcbiAgICAgXG4gICAgY29uc3QgaW5wdXREYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKVxuICAgIGlucHV0RGF0ZS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnZGF0ZScpXG4gICAgaW5wdXREYXRlLnNldEF0dHJpYnV0ZSgnaWQnLCAnZGF0ZScpXG4gICAgaW5wdXREYXRlLnNldEF0dHJpYnV0ZSgnbmFtZScsICdkYXRlJylcbiAgICBpbnB1dERhdGUudmFsdWUgPSBkYXRlIFxuXG4gICAgLy9hcHBlbmQgdGhlIHRvcCB0b2dldGhlciBhbmQgYWRkIGl0IHRvIHRoZSBmdWxsIGZvcm1cbiAgICBkYXRlRGl2LmFwcGVuZENoaWxkKGRhdGVMYWJlbClcbiAgICBkYXRlRGl2LmFwcGVuZENoaWxkKGlucHV0RGF0ZSlcblxuICAgIHRvcEVkaXQuYXBwZW5kQ2hpbGQoZWRpdFRpdGxlKVxuICAgIHRvcEVkaXQuYXBwZW5kQ2hpbGQoZGF0ZURpdilcblxuICAgIGZvcm0uYXBwZW5kQ2hpbGQodG9wRWRpdClcblxuICAgIC8vY3JlYXRlIHRoZSB0ZXh0YXJlYVxuICAgIGNvbnN0IHRleHRBcmVhRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0ZXh0QXJlYURpdi5jbGFzc0xpc3QuYWRkKCd0ZXh0YXJlYS1kaXYnKVxuXG4gICAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpXG4gICAgdGV4dEFyZWEuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsICdEZXNjcmlwdGlvbicpXG4gICAgdGV4dEFyZWEudmFsdWUgPSBkZXNjcmlwdGlvbiBcblxuICAgIHRleHRBcmVhRGl2LmFwcGVuZENoaWxkKHRleHRBcmVhKVxuICAgIGZvcm0uYXBwZW5kQ2hpbGQodGV4dEFyZWFEaXYpXG5cbiAgICAvL2NyZWF0ZSB0aGUgYm90dG9tIG9mIHRoZSBmb3JtXG4gICAgY29uc3QgbG93ZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGxvd2VyRGl2LmNsYXNzTGlzdC5hZGQoJ2xvd2VyLWZvcm0tdGFzaycpXG5cbiAgICBjb25zdCBlbmNvbXBhc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICBjb25zdCBwcmlvcml0eUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKVxuICAgIHByaW9yaXR5TGFiZWwudGV4dENvbnRlbnQgPSAnUHJpb3JpdHk6ICdcbiAgICBwcmlvcml0eUxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJ3ByaW9yaXR5JylcblxuICAgIGNvbnN0IHByaW9yaXR5U2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0JylcbiAgICBwcmlvcml0eVNlbGVjdC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAncHJpb3JpdHknKVxuICAgIHByaW9yaXR5U2VsZWN0LnNldEF0dHJpYnV0ZSgnaWQnLCAncHJpb3JpdHknKVxuXG4gICAgLy91c2UgYSBsb29wIHRvIGFkZCAzIG9wdGlvbnMgdG8gdGhlIERPTVxuICAgIGZvciAobGV0IGkgPSAzOyBpID49IDE7IGktLSkge1xuICAgICAgICAvL3VzZSBhIGZ1bmN0aW9uIHRvIHJldHVybiB0aGUgRE9NIG9wdGlvbiBlbGVtZW50XG4gICAgICAgIHByaW9yaXR5U2VsZWN0LmFwcGVuZENoaWxkKGNyZWF0ZU9wdGlvbihpKSlcbiAgICB9XG4gICAgLy8gYWZ0ZXIgY3JlYXRpbmcgb3B0aW9ucywgZ2l2ZSB2YWx1ZSB0byBwcmlvcml0eVNlbGVjdFxuICAgIHByaW9yaXR5U2VsZWN0LnZhbHVlID0gcHJpb3JpdHkgXG5cbiAgICAvL2FwcGVuZCB0aGUgcHJpb3JpdHkgZWxlbWVudHMgdG8gdGhlIGRpdlxuICAgIGVuY29tcGFzRGl2LmFwcGVuZENoaWxkKHByaW9yaXR5TGFiZWwpXG4gICAgZW5jb21wYXNEaXYuYXBwZW5kQ2hpbGQocHJpb3JpdHlTZWxlY3QpXG5cbiAgICAvLyBjcmVhdGUgdGhlIFNhdmUgYW5kIERlbGV0ZSBidXR0b25zIGluIHRoZWlyIG93biBkaXZcbiAgICBjb25zdCBidXR0b25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gICAgY29uc3QgZGVsQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICBkZWxCdXR0b24udGV4dENvbnRlbnQgPSAnRGVsJ1xuICAgIGRlbEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJylcbiAgICBkZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge2RlbFRhc2soZSl9KVxuXG4gICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdTYXZlJ1xuICAgIHNhdmVCdXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpXG4gICAgc2F2ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7c2F2ZShlKX0pXG5cbiAgICBidXR0b25EaXYuYXBwZW5kQ2hpbGQoZGVsQnV0dG9uKVxuICAgIGJ1dHRvbkRpdi5hcHBlbmRDaGlsZChzYXZlQnV0dG9uKVxuXG4gICAgLy8gYXBwZW5kIHRoZSBsb3dlciBlbGVtZW50cyBcbiAgICBsb3dlckRpdi5hcHBlbmRDaGlsZChlbmNvbXBhc0RpdilcbiAgICBsb3dlckRpdi5hcHBlbmRDaGlsZChidXR0b25EaXYpXG4gICAgLy9hcHBlbmQgdGhlIGxvd2VyIGRpdiB0byB0aGUgZm9ybVxuICAgIGZvcm0uYXBwZW5kQ2hpbGQobG93ZXJEaXYpXG4gICAgLy9hcHBlbmQgZm9ybSB0byB0aGUgdGFzayBkaXZcbiAgICB0YXNrRm9ybS5hcHBlbmRDaGlsZChmb3JtKVxuXG4gICAgcmV0dXJuIHRhc2tGb3JtXG59XG5cbi8vIGNyZWF0ZXMgb3B0aW9ucyBmb3IgdGhlIHByaW9yaXR5IGVsZW1lbnRcbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbiAoaSkge1xuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpXG4gICAgb3B0aW9uLnRleHRDb250ZW50ID0gaVxuICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgaSlcbiAgICByZXR1cm4gb3B0aW9uXG59XG5cbiIsImltcG9ydCB7IHRhc2sgfSBmcm9tICcuL3Rhc2stb2JqZWN0LmpzJ1xuaW1wb3J0IGNyZWF0ZVRhc2sgZnJvbSAnLi90YXNrLWRvbS5qcydcbmltcG9ydCBjcmVhdGVUYXNrRWRpdCBmcm9tICcuL3Rhc2stZWRpdC1kb20uanMnXG5pbXBvcnQgeyBtZW51U2VsZWN0ZWQgYXMgbWVudVNlbGVjdGVkfSBmcm9tICcuL3Byb2plY3RzLWNvbnRyb2wuanMnXG4vL2xvY2FsU3RvcmFnZS5jbGVhcigpXG4vLyBjcmVhdGUgYW4gYXJyYXkgdG8gc3RvcmUgYWxsIHRoZSB0YXNrc1xubGV0IGFsbFRhc2tzID0gW11cblxuaWYgKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FsbFRhc2tzJykpICE9IG51bGwpIHtcbiAgICBhbGxUYXNrcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FsbFRhc2tzJykpXG4gICAgLy8gYXNzaWduIHRoZSBwcm90b3R5cGUgYmVjYXVzZSBpdCBpc24ndCBzYXZlZCB3aXRoIGxvY2FsU3RvcmFnZVxuICAgIGFsbFRhc2tzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgIGFsbFRhc2tzW2luZGV4XSA9IHRhc2soaXRlbS50aXRsZSwgaXRlbS5kYXRlLCBpdGVtLmRlc2NyaXB0aW9uLCBpdGVtLnByaW9yaXR5LCBpdGVtLnByb2plY3QsIGl0ZW0uaWQpXG4gICAgfSlcbn1cblxuLy8gcmVuZGVyIHRoZSB0YXNrcyB3aGVuIHBhZ2UgaXMgcmVsb2FkZWQgb3Igb3BlbmVkXG4vLyByZW5kZXJlZCBhZnRlciB0YXNrcyBoYXZlIGJlZW4gbG9hZGVkIGludG8gbWVtb3J5XG5yZW5kZXJUYXNrcyhcIkFsbFwiKVxuXG4vL2FkZCBldmVudCBsaXN0ZW5lciB0byArQWRkIFRhc2sgYnV0dG9uXG5jb25zdCBhZGRUYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10YXNrJylcbmFkZFRhc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgLy8gTmVlZCB0byBwdXQgYSB0YXNrLWVkaXQgYWJvdmUgK0FkZCBUYXNrXG4gICAgY29uc3QgdGFza3NEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFza3MnKVxuICAgIHRhc2tzRGl2Lmluc2VydEJlZm9yZShjcmVhdGVUYXNrRWRpdChudWxsLCBudWxsLCBudWxsLCAzLCAnbnVsbCcpLCBhZGRUYXNrKVxufSlcblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclRhc2tzIChtZW51U2VsZWN0ZWQpIHtcbiAgICAvLyBmaXJzdCByZW1vdmUgdGhlIGN1cnJlbnQgdGFza3NcbiAgICByZW1vdmVUYXNrcygpXG5cbiAgICAvLyBjcmVhdGUgYSBuZXcgYXJyYXkgdGhhdCBob2xkcyBvbmx5IHRoZSByZXF1aXJlZCB0YXNrcyBmcm9tIHRoZSBwcm9qZWN0XG4gICAgY29uc3QgbmV3QXJyYXkgPSBhbGxUYXNrcy5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICAgIGlmIChtZW51U2VsZWN0ZWQgPT0gXCJUb2RheVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNEdWVUb2RheShpdGVtLmdldERhdGUoKSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZW51U2VsZWN0ZWQgPT0gXCJJbXBvcnRhbnRcIikge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZ2V0UHJpb3JpdHkoKSA9PSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1lbnVTZWxlY3RlZCA9PSBcIkFsbFwiKSB7cmV0dXJuIHRydWV9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZ2V0UHJvamVjdCgpID09IG1lbnVTZWxlY3RlZDsgXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBTZWxlY3QgdGhlIGFkZCB0YXNrIFxuICAgIGNvbnN0IGFkZFRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRhc2snKVxuICAgIC8vIHNlbGVjdCB0YXNrcyBkaXZcbiAgICBjb25zdCB0YXNrc0RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YXNrcycpXG4gICAgLy9sb29wIHRocm91Z2ggdGhlIG5ldyBhcnJheSBhbmQgcmVuZGVyIHRoZSB0YXNrc1xuICAgIG5ld0FycmF5LmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgLy8gYWRkIG5ldyBlbGVtZW50cyBiZWZvcmUgKyBBZGQgVGFza1xuICAgICAgICBjb25zdCBlbGUgPSBjcmVhdGVUYXNrKGl0ZW0uZ2V0VGl0bGUoKSwgaXRlbS5nZXREYXRlKCksIGl0ZW0uZ2V0SWQoKSwgaXRlbS5nZXRQcmlvcml0eSgpKVxuICAgICAgICB0YXNrc0Rpdi5pbnNlcnRCZWZvcmUoZWxlLCBhZGRUYXNrKVxuICAgIH0pXG59XG5cbi8vIHdoZW4gcmVuZGVyVGFza3MoKSBpcyBjYWxsZWQsIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGRlbGV0ZSB0aGUgY3VycmVudCB0YXNrc1xuZnVuY3Rpb24gcmVtb3ZlVGFza3MgKCkge1xuICAgIC8vIGNyZWF0ZSBub2RlIGxpc3RzIG9mIGFsbCBjdXJyZW50IHRhc2tzIGluIHRoZSBET01cbiAgICBjb25zdCBhbGxUYXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLXNwYW4nKVxuICAgIC8vIHJlbW92ZSBlYWNoIHRhc2tcbiAgICBhbGxUYXNrcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGl0ZW0ucmVtb3ZlKClcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmUgKGUpIHtcbiAgICAvLyBnZXQgdGhlIHNyYyBlbGVtZW50IGFuZCB0aGVuIHRoZSBkaXYgY29udGFpbmluZyBpbmZvXG4gICAgY29uc3QgYnV0dG9uID0gZS5zcmNFbGVtZW50XG4gICAgY29uc3QgZm9ybSA9IGJ1dHRvbi5jbG9zZXN0KCcudGFzay1mb3JtJylcbiAgICAvLyBnYXRoZXIgYWxsIHJlcXVpcmVkIGluZm8gdG8gYnVpbGQgYSBuZXcgdGFzayBvYmplY3RcbiAgICBjb25zdCB0aXRsZSA9IGZvcm0ucXVlcnlTZWxlY3RvcignI3RpdGxlLWVkaXQnKS52YWx1ZVxuICAgIGNvbnN0IGRhdGUgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJykudmFsdWVcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGZvcm0ucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKS52YWx1ZVxuICAgIGNvbnN0IHByaW9yaXR5ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKS52YWx1ZVxuICAgIC8vIGdldCBpZCBpbmRleCBvZiBmb3JtXG4gICAgbGV0IGlkID0gZm9ybS5pZFxuICAgIGlmIChmb3JtLmlkID09ICdudWxsJykge1xuICAgICAgICBpZCA9IGFsbFRhc2tzLmxlbmd0aFxuICAgICAgICBhbGxUYXNrcy5wdXNoKHRhc2sodGl0bGUsIGRhdGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgbWVudVNlbGVjdGVkLCBpZCkpXG4gICAgfVxuICAgIC8vIGlmIG5vdCBhIG5ldyB0YXNrLCBtYWtlIGNoYW5nZXMgdG8gZGF0YVxuICAgIGVsc2Uge1xuICAgICAgICBhbGxUYXNrc1sraWRdLnNldFRpdGxlKHRpdGxlKVxuICAgICAgICBhbGxUYXNrc1sraWRdLnNldERhdGUoZGF0ZSlcbiAgICAgICAgYWxsVGFza3NbK2lkXS5zZXREZXNjcmlwdGlvbihkZXNjcmlwdGlvbilcbiAgICAgICAgYWxsVGFza3NbK2lkXS5zZXRQcmlvcml0eShwcmlvcml0eSlcbiAgICB9XG4gICAgLy8gcmVuZGVyIHRoZSBuZXcgdGFza3NcbiAgICAvLyBvdGhlciB0YXNrIGZvcm0gb24gcGFnZSB3aWxsIGJlIHJlbW92ZWRcbiAgICByZW5kZXJUYXNrcyhtZW51U2VsZWN0ZWQpXG4gICAgLy8gcmVtb3ZlIHRoZSBmb3JtXG4gICAgZm9ybS5yZW1vdmUoKVxuICAgIC8vIHNhdmUgdGhlIGRhdGEgdG8gbG9jYWxTdG9yYWdlXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FsbFRhc2tzJywgSlNPTi5zdHJpbmdpZnkoYWxsVGFza3MpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsVGFzayhlKSB7XG4gICAgLy8gZ2V0IHRoZSBwYXJlbnQgZWxlbWVudFxuICAgIGNvbnN0IHBhcmVudCA9IGUuc3JjRWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnRcbiAgICAvLyB1c2UgdGhlIGZ1bmN0aW9uIHRvIGZpbmQgdGhlIGluZGV4IG9mIHRoZSBhcnJheSB3aGVyZSB0aGUgdGFzayBpcyBzYXZlZFxuICAgIGNvbnN0IGkgPSArKHBhcmVudC5pZClcbiAgICAvLyBkZWxldGVzIHRoZSBvYmplY3QgZnJvbSB0aGUgYXJyYXlcbiAgICBhbGxUYXNrcy5zcGxpY2UoaSwgMSlcbiAgICAvLyByZW1vdmUgdGhlIGVsZW1lbnQgZnJvbSB0aGUgRE9NXG4gICAgcGFyZW50LnJlbW92ZSgpXG4gICAgLy8gcmUtYXNzaWduIHRoZSBpZCdzIGZvciBlYWNoIHRhc2tcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbFRhc2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFsbFRhc2tzW2ldLnNldElkKGkpXG4gICAgfVxuICAgIHJlbW92ZVRhc2tzKClcbiAgICByZW5kZXJUYXNrcyhtZW51U2VsZWN0ZWQpXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FsbFRhc2tzJywgSlNPTi5zdHJpbmdpZnkoYWxsVGFza3MpKVxufVxuXG4vLyB3aWxsIG9wZW4gYW4gZWRpdCBmb3JtIGZvciB0aGUgdGFza1xuZXhwb3J0IGZ1bmN0aW9uIGVkaXRUYXNrKGUpIHtcbiAgICAvLyBnZXQgdGhlIHBhcmVudCBlbGVtZW50XG4gICAgY29uc3QgcGFyZW50ID0gZS5zcmNFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudFxuICAgIC8vIGZpbmQgdGhlIHRhc2sgaW4gdGhlIGFsbFRhc2tzIGFycmF5XG4gICAgY29uc3QgaSA9ICsocGFyZW50LmlkKVxuICAgIC8vIG9wZW4gdGhlIGVkaXQgd2luZG93IGJlbG93IHRoZSB0YXNrcyB0aGVuIGRlbGV0ZSB0aGUgdGFza1xuICAgIC8vIGxlYXZlIGVkaXQgbWVudSBvcGVuXG4gICAgcGFyZW50Lmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCBcbiAgICBjcmVhdGVUYXNrRWRpdChhbGxUYXNrc1tpXS5nZXRUaXRsZSgpLCBhbGxUYXNrc1tpXS5nZXREYXRlKCksIFxuICAgIGFsbFRhc2tzW2ldLmdldERlc2NyaXB0aW9uKCksIGFsbFRhc2tzW2ldLmdldFByaW9yaXR5KCksIGFsbFRhc2tzW2ldLmdldElkKCkpKVxuICAgIHBhcmVudC5yZW1vdmUoKVxufVxuXG4vLyBmdW5jdGluIHJldHVybnMgdHJ1ZSBpZiB0aGUgZHVlIGRhdGUgaXMgdG9kYXkgb3IgZnJvbSB0aGUgcGFzdFxuZnVuY3Rpb24gaXNEdWVUb2RheSAoZGF0ZSkge1xuICAgIC8vIGNyZWF0ZSB0b2RheSdzIGRhdGVcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICAvLyBzcGxpdCB0aGUgZGF0ZSBmcm9tIHRoZSB0YXNrIGludG8gYSBuZXcgYXJyYXlcbiAgICBjb25zdCBjdXJyZW50RGF0ZXMgPSBkYXRlLnNwbGl0KCctJylcbiAgICAvLyBpZiB0aGUgeWVhciBpcyBsZXNzIHRoYW4gY3VycmVudCB5ZWFyIHJldHVybiB0cnVlXG4gICAgaWYgKGN1cnJlbnREYXRlc1swXSA8IHRvZGF5LmdldEZ1bGxZZWFyKCkpIHJldHVybiB0cnVlO1xuICAgIC8vIGlmIG1vbnRoIGlzIG1vbnRoIGlzIGxlc3MgdGhhbiBjdXJyZW50IHJldHVybiB0cnVlXG4gICAgaWYgKGN1cnJlbnREYXRlc1sxXSA8IHRvZGF5LmdldE1vbnRoKCkpIHJldHVybiB0cnVlO1xuICAgIC8vIGlmIGRheSBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gY3VycmVudCBkYXkgcmV0dXJuIHRydWVcbiAgICBpZiAoY3VycmVudERhdGVzWzJdIDw9IHRvZGF5LmdldERhdGUoKSkgcmV0dXJuIHRydWU7XG5cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuLy8gZnVuY3Rpb24gZ2V0VGFza1ZhcnMgKHBhcmVudCkge1xuLy8gICAgIC8vIGdldCB0aGUgdGl0bGUgYW5kIGRhdGVcbi8vICAgICBjb25zdCB0aXRsZSA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCcudGFzay10aXRsZScpLnRleHRDb250ZW50XG4vLyAgICAgY29uc3QgZGF0ZSA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCcudGFzay1kYXRlJykudGV4dENvbnRlbnRcblxuLy8gICAgIC8vIHJldHVybiB0aXRsZSBhbmQgZGF0ZSBhcyBhIHN0cmluZ1xuLy8gICAgIHJldHVybiB0aXRsZSArICcuJyArIGRhdGVcbi8vIH0iLCJpbXBvcnQgeyBkZWxUYXNrLCBlZGl0VGFzayB9IGZyb20gXCIuL3Rhc2stY29udHJvbC5qc1wiXG5cbi8vIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHRhc2sgZm9yIHRoZSBET01cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZVRhc2sgKHRpdGxlLCBkYXRlLCBpZCwgcHJpb3JpdHkpIHtcbiAgICAvL2NyZWF0ZSBkZWZhdWx0IGRpdiB0byBob2xkIGFsbCB0aGUgaW5mb1xuICAgIGNvbnN0IHRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRhc2tEaXYuY2xhc3NMaXN0LmFkZCgndGFzaycpXG4gICAgdGFza0Rpdi5jbGFzc0xpc3QuYWRkKCd0YXNrLXNwYW4nKVxuICAgIHRhc2tEaXYuaWQgPSBpZFxuXG4gICAgLy9jcmVhdGUgdHdvIGhhbHZlcyBmb3IgdGhlIGRpdiBcbiAgICBjb25zdCB0YXNrU3RhcnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGNvbnN0IHRhc2tFbmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRhc2tTdGFydC5jbGFzc0xpc3QuYWRkKCd0YXNrLXN0YXJ0JylcbiAgICB0YXNrRW5kLmNsYXNzTGlzdC5hZGQoJ3Rhc2stZW5kJylcblxuICAgIC8vY3JlYXRlIGJ1dHRvbiB0byBjb21wbGV0ZSB0YXNrXG4gICAgY29uc3QgY2hlY2tCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICBjaGVja0J1dHRvbi5jbGFzc0xpc3QuYWRkKCd0YXNrLWNpcmNsZScpXG4gICAgaWYgKHByaW9yaXR5ID09IDEpe1xuICAgICAgICBjaGVja0J1dHRvbi5zdHlsZS5jc3NUZXh0ID0gJ2JveC1zaGFkb3c6IDAgMCA1cHggcmdiKDI1NSwgNjAsIDIwKSwgaW5zZXQgMCAwIDVweCByZ2IoMjU1LCA2MCwgMjApJ1xuICAgIH1cbiAgICBlbHNlIGlmIChwcmlvcml0eSA9PSAyKXtcbiAgICAgICAgY2hlY2tCdXR0b24uc3R5bGUuY3NzVGV4dCA9ICdib3gtU2hhZG93OiAwIDAgNXB4ICNDOUI0MDAsIGluc2V0IDAgMCA1cHggI0M5QjQwMCdcbiAgICB9XG4gICAgY2hlY2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge2RlbFRhc2soZSl9KVxuXG4gICAgLy9jcmVhdGUgZGl2IHRvIGhvbGQgdGl0bGUgb2YgdGFza1xuICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoJ3Rhc2stdGl0bGUnKVxuICAgIHRhc2tUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlXG5cbiAgICAvL2NyZWF0ZSBkaXYgdG8gaG9sZCB0aGUgZGF0ZVxuICAgIGNvbnN0IHRhc2tEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0YXNrRGF0ZS5jbGFzc0xpc3QuYWRkKCd0YXNrLWRhdGUnKVxuICAgIHRhc2tEYXRlLnRleHRDb250ZW50ID0gZGF0ZVxuXG4gICAgLy9jcmVhdGUgdGhlIGVkaXQgYnV0dG9uL2ltZ1xuICAgIGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxuICAgIGVkaXRCdXR0b24uc3JjID0gJ2ltYWdlcy9lZGl0LnN2ZydcbiAgICBlZGl0QnV0dG9uLnNldEF0dHJpYnV0ZSgnYWx0JywgJ2VkaXQgYnV0dG9uJylcbiAgICBlZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtlZGl0VGFzayhlKX0pXG5cbiAgICAvLyBBcHBlbmQgYWxsIGVsZW1lbnRzIHRvZ2V0aGVyXG4gICAgdGFza0VuZC5hcHBlbmRDaGlsZCh0YXNrRGF0ZSlcbiAgICB0YXNrRW5kLmFwcGVuZENoaWxkKGVkaXRCdXR0b24pXG5cbiAgICB0YXNrU3RhcnQuYXBwZW5kQ2hpbGQoY2hlY2tCdXR0b24pXG4gICAgdGFza1N0YXJ0LmFwcGVuZENoaWxkKHRhc2tUaXRsZSlcblxuICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza1N0YXJ0KVxuICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza0VuZClcblxuICAgIHJldHVybiB0YXNrRGl2XG59IiwiaW1wb3J0IHsgYWRkVGl0bGUsIGdldFRpdGxlcywgZGVsZXRlVGl0bGV9IGZyb20gXCIuL3Byb2plY3RzXCJcbmltcG9ydCB7IHJlbmRlclRhc2tzIH0gZnJvbSBcIi4vdGFzay1jb250cm9sLmpzXCJcblxuLy8gdmFyaWFibGUgdXNlZCB0byBrZWVwIHRyYWNrIG9mIHdoaWNoIG1lbnUgaXRlbSBpcyBzZWxlY3RlZFxuZXhwb3J0IGxldCBtZW51U2VsZWN0ZWQgPSAnQWxsJ1xuXG4vL0FkZCBldmVudHMgdG8gdGhlIGRlZmF1bHQgbWVudSBvcHRpb25zXG5jb25zdCBtZW51SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudS1pdGVtJylcbm1lbnVJdGVtcy5mb3JFYWNoKGFkZE1lbnVJdGVtRXZlbnQpXG5cbi8vIExvYWQgbG9jYWxTdG9yYWdlIGRhdGEgaW50byB0aGUgRE9NXG5jb25zdCBtZW51VGl0bGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzJylcbmNvbnN0IGFycmF5ID0gZ2V0VGl0bGVzKClcbmZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICBtZW51VGl0bGVzLmFwcGVuZENoaWxkKGNyZWF0ZU1lbnVJdGVtKGFycmF5W2ldKSlcbn1cblxuLy8gRXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBcIitcIiBidXR0b24gYmVzaWRlIHByb2plY3QgdGl0bGVcbmNvbnN0IHBsdXNCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC10aXRsZSA+IHN2ZycpXG5wbHVzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIC8vQ2FsbHMgZnVuY3Rpb24gdG8gYWRkIHRoZSBwcm9qZWN0IGZvcm0gdG8gdGhlIERPTVxuICAgIGNvbnN0IHByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHMnKVxuICAgIHByb2plY3QuYXBwZW5kQ2hpbGQoY3JlYXRlRm9ybSgpKVxuXG59KVxuXG4vLyBSZXR1cm5zIHRoZSBET00gZWxlbWVudCBvZiBhIG1lbnUtaXRlbSBcbi8vIGEgc2ltcGxlIHByb2plY3QgaXMgYWRkZWQgdG8gdGhlIGxpc3Qgb24gdGhlIERPTVxuZnVuY3Rpb24gY3JlYXRlTWVudUl0ZW0odGl0bGUpIHtcbiAgICAvLyAgY3JlYXRlIHRoZSBtZW51LWl0ZW0gZGl2IHRvIGhvbGQgdGhlIGVsZW1lbnRzXG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBkaXYuY2xhc3NMaXN0LmFkZCgnbWVudS1pdGVtJylcbiAgICAvLyBjcmVhdGUgdGhlIHRpdGxlIGRpdlxuICAgIGNvbnN0IHRpdGxlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aXRsZURpdi50ZXh0Q29udGVudCA9IHRpdGxlXG4gICAgLy8gY3JlYXRlIHRoZSB0cmFzaCBiaW4gaW1nXG4gICAgY29uc3QgdHJhc2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxuICAgIHRyYXNoLnNldEF0dHJpYnV0ZSgnc3JjJywgJy4vaW1hZ2VzL3RyYXNoLTIuc3ZnJylcbiAgICB0cmFzaC5zZXRBdHRyaWJ1dGUoJ2FsdCcsICd0cmFzaCBpY29uJylcblxuICAgIC8vIGFkZCBldmVudGxpc3RlbmVyIHRvIHRyYXNoIGljb25cbiAgICB0cmFzaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGRlbGV0ZVRpdGxlKGUuc3JjRWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50KVxuICAgICAgICBlLnNyY0VsZW1lbnQuY2xvc2VzdCgnLm1lbnUtaXRlbScpLnJlbW92ZSgpXG4gICAgfSlcblxuICAgIC8vIGFwcGVuZCB0aGUgdHdvIGNoaWxkcmVuXG4gICAgZGl2LmFwcGVuZENoaWxkKHRpdGxlRGl2KVxuICAgIGRpdi5hcHBlbmRDaGlsZCh0cmFzaClcblxuICAgIGFkZE1lbnVJdGVtRXZlbnQoZGl2KVxuICAgIFxuICAgIHJldHVybiBkaXZcbn1cblxuLy8gcmV0dXJucyBhIGZvcm0gZm9yIERPTSB0byBiZSB1c2VkIHRvIGNyZWF0ZSBhIG5ldyBwcm9qZWN0XG5mdW5jdGlvbiBjcmVhdGVGb3JtKCkge1xuICAgIC8vIGNyZWF0ZSB0aGUgZGl2IHRoYXQgZW5jb21wYXNzZXMgdGhlIGVudGlyZSBibG9ja1xuICAgIGNvbnN0IG1lbnVGb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBtZW51Rm9ybS5jbGFzc0xpc3QuYWRkKCdtZW51LWZvcm0nKVxuXG4gICAgLy8gY3JlYXRlIHRoZSBmb3JtIGFuZCBhZGQgYXR0cmlidXRlc1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJylcbiAgICBmb3JtLnNldEF0dHJpYnV0ZSgnYWN0aW9uJywgXCJcIilcbiAgICBmb3JtLnNldEF0dHJpYnV0ZSgnbWV0aG9kJywgJ3Bvc3QnKVxuXG4gICAgLy8gY3JlYXRlIHRoZSBpbnB1dCBib3ggZm9yIHRleHRcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JylcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpXG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsICdwcm9qZWN0LXRpdGxlJylcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAncHJvamVjdFRpdGxlJylcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ21heGxlbmd0aCcsICcxNScpXG5cbiAgICAvLyBjcmVhdGUgZGl2IHRvIGVuY29tcGFzcyBidXR0b25zXG4gICAgY29uc3QgcHJvamVjdEJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHByb2plY3RCdXR0b25zLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtYnV0dG9ucycpXG5cbiAgICAvL2NyZWF0ZSB0aGUgYnV0dG9uc1xuICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgYWRkQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FkZC1idXR0b24nKVxuICAgIGFkZEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJylcbiAgICBhZGRCdXR0b24udGV4dENvbnRlbnQgPSBcIkFkZFwiXG5cbiAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgIGNhbmNlbEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYW5jZWwtYnV0dG9uJylcbiAgICBjYW5jZWxCdXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpXG4gICAgY2FuY2VsQnV0dG9uLnRleHRDb250ZW50ID0gXCJDYW5jZWxcIlxuXG4gICAgLy8gYWRkIGV2ZW50bGlzdGVuZXJzXG4gICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgc2F2ZShlKVxuICAgIH0pXG4gICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgY2FuY2VsKGUpXG4gICAgfSlcblxuICAgIC8vIEFwcGVuZCB0aGUgYnV0dG9ucyB0byBwcm9qZWN0QnV0dG9uc1xuICAgIHByb2plY3RCdXR0b25zLmFwcGVuZENoaWxkKGFkZEJ1dHRvbilcbiAgICBwcm9qZWN0QnV0dG9ucy5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pXG5cbiAgICAvLyBBcHBlbmQgaW5wdXQgdG8gZm9ybSB0aGVuIHByb2plY3RCdXR0b25zIHRvIGZvcm1cbiAgICBmb3JtLmFwcGVuZENoaWxkKGlucHV0KVxuICAgIGZvcm0uYXBwZW5kQ2hpbGQocHJvamVjdEJ1dHRvbnMpXG5cbiAgICAvLyBhcHBlbmQgZm9ybSB0byB0aGUgbWFpbiBkaXYgKG1lbnVGb3JtKVxuICAgIG1lbnVGb3JtLmFwcGVuZENoaWxkKGZvcm0pXG5cbiAgICByZXR1cm4gbWVudUZvcm1cbn1cblxuZnVuY3Rpb24gc2F2ZShlKSB7XG4gICAgLy8gc2VsZWN0IHRoZSBtZW51LWZvcm0gcGFyZW50IG5vZGVcbiAgICBjb25zdCBtZW51Rm9ybSA9IGUuc3JjRWxlbWVudC5jbG9zZXN0KCcubWVudS1mb3JtJylcbiAgICAvLyBzZWxlY3QgdGhlIGNoaWxkIG9mIG1lbnUtZm9ybSBhbmQgdGhlIGNoaWxkIG9mIHRoYXQgdG8gYXF1aXJlIHRoZSBpbnB1dCBub2RlLlxuICAgIC8vIFRha2UgdGhlIHZhbHVlIG9mIHRoZSBpbnB1dCBub2RlXG4gICAgY29uc3QgaW5wdXRUZXh0ID0gbWVudUZvcm0uZmlyc3RDaGlsZC5maXJzdENoaWxkLnZhbHVlXG4gICAgLy8gaW5zZXJ0IGEgbmV3IG1lbnUgaXRlbSBhZnRlciB0aGUgZm9ybVxuICAgIG1lbnVGb3JtLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCBjcmVhdGVNZW51SXRlbShpbnB1dFRleHQpKVxuICAgIC8vIGFkZCB0aGUgdGl0bGUgdG8gdGhlIGFycmF5IFxuICAgIGFkZFRpdGxlKGlucHV0VGV4dClcblxuICAgIC8vIHdoZW4gZXZlcnl0aGluZyBpcyBkb25lLCBkZWxldGUgdGhlIGZvcm1cbiAgICBjYW5jZWwoZSlcbn1cblxuLy8gZnVuY3Rpb24gdXNlZCB0byBkZWxldGUgbWVudS1mb3JtXG5mdW5jdGlvbiBjYW5jZWwoZSkge1xuICAgIC8vIGZpbmQgdGhlIGNsb3Nlc3QgbWVudSBmb3JtIGFuZCByZW1vdmUgaXRcbiAgICBlLnNyY0VsZW1lbnQuY2xvc2VzdCgnLm1lbnUtZm9ybScpLnJlbW92ZSgpXG59XG5cbi8vIGFkZCBldmVudCBsaXN0ZW5lciBmb3IgYSBtZW51LWl0ZW1cbmZ1bmN0aW9uIGFkZE1lbnVJdGVtRXZlbnQgKGl0ZW0pIHtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgLy8gcmVtb3ZlcyB0aGUgY2xhc3MgdGhhdCBpcyBoaWdobGlnaHRpbmcgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBpdGVtXG4gICAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51LXNlbGVjdGVkJylcbiAgICAgICAgLy8gbWFrZSBzdXJlIGN1cnJlbnRTZWxlY3RlZCBpc24ndCBudWxsIHRvIHByZXZlbnQgYW4gZXJyb3JcbiAgICAgICAgLy8gY3VycmVudFNlbGVjdGVkIHdpbGwgYmUgbnVsbCB3aGVuIHRoZSB0cmFzaCBpY29uIGlzIGNsaWNrZWQgdG8gZGVsZXRlXG4gICAgICAgIGlmIChjdXJyZW50U2VsZWN0ZWQgIT0gbnVsbCl7XG4gICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWQuY2xhc3NMaXN0LnJlbW92ZSgnbWVudS1zZWxlY3RlZCcpXG4gICAgICAgIH1cbiAgICAgICAgLy9hZGQgdGhlIG1lbnUtc2VsZWN0ZWQgY2xhc3MgdG8gdGhlIGl0ZW0gdGhhdCB3YXMgc2VsZWN0ZWRcbiAgICAgICAgZS5zcmNFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21lbnUtc2VsZWN0ZWQnKVxuICAgICAgICAvLyBjYWxsIGZ1bmN0aW9uIHRvIHJlbmRlciB0aGUgdGFza3NcbiAgICAgICAgLy8gaWYgdGV4dENvbnRlbnQgcmVhZGluZyBudWxsIGVycm9yIGFwcGVhcnMsIGNhdGNoIHRoZSBlcnJvclxuICAgICAgICAvLyBhbmQgY29uZmlybSBwcm9qZWN0IGRlbGV0aW9uXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBtZW51U2VsZWN0ZWQgPSBlLnNyY0VsZW1lbnQuZmlyc3RDaGlsZC50ZXh0Q29udGVudFxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Byb2plY3QgRGVsZXRlZCcpXG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyVGFza3MobWVudVNlbGVjdGVkKVxuICAgIH0pXG59XG4iXSwibmFtZXMiOlsicHJvamVjdFRpdGxlcyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzcGxpdCIsInNldEl0ZW0iLCJ0YXNrIiwidGl0bGUiLCJkYXRlIiwiZGVzY3JpcHRpb24iLCJwcmlvcml0eSIsInByb2plY3QiLCJpZCIsIm9iaiIsIk9iamVjdCIsImNyZWF0ZSIsInRhc2tQcm90byIsImdldFRpdGxlIiwidGhpcyIsInNldFRpdGxlIiwiZ2V0RGVzY3JpcHRpb24iLCJzZXREZXNjcmlwdGlvbiIsImdldERhdGUiLCJzZXREYXRlIiwiZ2V0UHJpb3JpdHkiLCJzZXRQcmlvcml0eSIsImdldFByb2plY3QiLCJzZXRQcm9qZWN0IiwiZ2V0SWQiLCJzZXRJZCIsImNyZWF0ZVRhc2tFZGl0IiwidGFza0Zvcm0iLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJmb3JtIiwic2V0QXR0cmlidXRlIiwidG9wRWRpdCIsImVkaXRUaXRsZSIsInZhbHVlIiwiZGF0ZURpdiIsImRhdGVMYWJlbCIsInRleHRDb250ZW50IiwiaW5wdXREYXRlIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0QXJlYURpdiIsInRleHRBcmVhIiwibG93ZXJEaXYiLCJlbmNvbXBhc0RpdiIsInByaW9yaXR5TGFiZWwiLCJwcmlvcml0eVNlbGVjdCIsImkiLCJjcmVhdGVPcHRpb24iLCJidXR0b25EaXYiLCJkZWxCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImRlbFRhc2siLCJzYXZlQnV0dG9uIiwic3JjRWxlbWVudCIsImNsb3Nlc3QiLCJxdWVyeVNlbGVjdG9yIiwiYWxsVGFza3MiLCJsZW5ndGgiLCJwdXNoIiwibWVudVNlbGVjdGVkIiwicmVuZGVyVGFza3MiLCJyZW1vdmUiLCJKU09OIiwic3RyaW5naWZ5Iiwic2F2ZSIsIm9wdGlvbiIsInBhcnNlIiwiZm9yRWFjaCIsIml0ZW0iLCJpbmRleCIsImFkZFRhc2siLCJyZW1vdmVUYXNrcyIsIm5ld0FycmF5IiwiZmlsdGVyIiwidG9kYXkiLCJEYXRlIiwiY3VycmVudERhdGVzIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImlzRHVlVG9kYXkiLCJ0YXNrc0RpdiIsImVsZSIsInRhc2tEaXYiLCJ0YXNrU3RhcnQiLCJ0YXNrRW5kIiwiY2hlY2tCdXR0b24iLCJzdHlsZSIsImNzc1RleHQiLCJ0YXNrVGl0bGUiLCJ0YXNrRGF0ZSIsImVkaXRCdXR0b24iLCJzcmMiLCJwYXJlbnQiLCJwYXJlbnRFbGVtZW50IiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiZWRpdFRhc2siLCJjcmVhdGVUYXNrIiwiaW5zZXJ0QmVmb3JlIiwicXVlcnlTZWxlY3RvckFsbCIsInNwbGljZSIsImFkZE1lbnVJdGVtRXZlbnQiLCJtZW51VGl0bGVzIiwiYXJyYXkiLCJjcmVhdGVNZW51SXRlbSIsImRpdiIsInRpdGxlRGl2IiwidHJhc2giLCJpbmRleE9mIiwiZGVsZXRlVGl0bGUiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiY2FuY2VsIiwiY3VycmVudFNlbGVjdGVkIiwiZmlyc3RDaGlsZCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJtZW51Rm9ybSIsImlucHV0IiwicHJvamVjdEJ1dHRvbnMiLCJhZGRCdXR0b24iLCJjYW5jZWxCdXR0b24iLCJpbnB1dFRleHQiLCJjcmVhdGVGb3JtIl0sInNvdXJjZVJvb3QiOiIifQ==