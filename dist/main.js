(()=>{"use strict";let t=[];function e(t){const e=document.createElement("option");return e.textContent=t,e.setAttribute("value",t),e}localStorage.getItem("projectTitles")?t=localStorage.getItem("projectTitles").split(","):localStorage.setItem("projectTitles",[]);let n=[];const c=document.querySelector(".add-task");c.addEventListener("click",(()=>{document.querySelector("#tasks").insertBefore(function(t,n,c,d){const s=document.createElement("div");s.classList.add("task-span"),s.classList.add("task-form");const o=document.createElement("form");o.setAttribute("action",""),o.setAttribute("method","post");const a=document.createElement("div");a.classList.add("top-form-task");const l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("id","title-edit"),l.setAttribute("placeholder","Title"),l.setAttribute("name","title-edit"),l.setAttribute("maxlength","20"),l.value=null;const i=document.createElement("div"),r=document.createElement("label");r.textContent="Date: ",r.setAttribute("for","date");const u=document.createElement("input");u.setAttribute("type","date"),u.setAttribute("id","date"),u.setAttribute("name","date"),u.value=null,i.appendChild(r),i.appendChild(u),a.appendChild(l),a.appendChild(i),o.appendChild(a);const m=document.createElement("div");m.classList.add("textarea-div");const p=document.createElement("textarea");p.setAttribute("placeholder","Description"),p.value=null,m.appendChild(p),o.appendChild(m);const E=document.createElement("div");E.classList.add("lower-form-task");const h=document.createElement("div"),C=document.createElement("label");C.textContent="Priority: ",C.setAttribute("for","priority");const b=document.createElement("select");b.setAttribute("name","priority"),b.setAttribute("id","priority"),b.value=3;for(let t=1;t<=3;t++)b.appendChild(e(t));h.appendChild(C),h.appendChild(b);const v=document.createElement("div"),f=document.createElement("button");f.textContent="Del",f.setAttribute("type","button");const A=document.createElement("button");return A.textContent="Save",A.setAttribute("type","button"),v.appendChild(f),v.appendChild(A),E.appendChild(h),E.appendChild(v),o.appendChild(E),s.appendChild(o),s}(),c)})),document.querySelectorAll(".menu-item").forEach(l);const d=document.querySelector(".projects"),s=t;for(let t=0;t<s.length;t++)d.appendChild(o(s[t]));function o(e){const n=document.createElement("div");n.classList.add("menu-item");const c=document.createElement("div");c.textContent=e;const d=document.createElement("img");return d.setAttribute("src","./images/trash-2.svg"),d.setAttribute("alt","trash icon"),d.addEventListener("click",(e=>{!function(e){const n=t.indexOf(e);n>-1&&(t.splice(n,1),localStorage.setItem("projectTitles",t))}(e.srcElement.previousElementSibling.textContent),e.srcElement.closest(".menu-item").remove()})),n.appendChild(c),n.appendChild(d),l(n),n}function a(t){t.srcElement.closest(".menu-form").remove()}function l(t){t.addEventListener("click",(t=>{const e=document.querySelector(".menu-selected");null!=e&&e.classList.remove("menu-selected"),t.srcElement.classList.add("menu-selected"),function(t){document.querySelectorAll(".task-span").forEach((t=>{t.remove()}));const e=n.filter((e=>{if("Today"!=t)return"Important"==t?e.getPriority=1:"All"==t||(e.getProject=t)})),c=document.querySelector(".add-task"),d=document.querySelector("#tasks");e.forEach((t=>{const e=function(t,e){const n=document.createElement("div");n.classList.add("task"),n.classList.add("task-span");const c=document.createElement("div"),d=document.createElement("div");c.classList.add("task-start"),d.classList.add("task-end");const s=document.createElement("span");s.classList.add("check-button");const o=document.createElement("div");o.classList.add("task-title"),o.textContent=t;const a=document.createElement("div");a.classList.add("task-date"),a.textContent="1/2/2023";const l=document.createElement("img");return l.src="images/edit.svg",l.setAttribute("alt","edit button"),d.appendChild(a),d.appendChild(l),c.appendChild(s),c.appendChild(o),n.appendChild(c),n.appendChild(d),n}(t.getTitle(),t.getDate());d.insertBefore(e,c)}))}(t.srcElement.firstChild.textContent)}))}document.querySelector(".project-title > svg").addEventListener("click",(()=>{document.querySelector(".projects").appendChild(function(){const e=document.createElement("div");e.classList.add("menu-form");const n=document.createElement("form");n.setAttribute("action",""),n.setAttribute("method","post");const c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("id","project-title"),c.setAttribute("name","projectTitle"),c.setAttribute("maxlength","15");const d=document.createElement("div");d.classList.add("project-buttons");const s=document.createElement("button");s.classList.add("add-button"),s.setAttribute("type","button"),s.textContent="Add";const l=document.createElement("button");return l.classList.add("cancel-button"),l.setAttribute("type","button"),l.textContent="Cancel",s.addEventListener("click",(e=>{!function(e){const n=e.srcElement.closest(".menu-form"),c=n.firstChild.firstChild.value;var d;n.insertAdjacentElement("afterend",o(c)),d=c,t.push(d),localStorage.setItem("projectTitles",t),a(e)}(e)})),l.addEventListener("click",(t=>{a(t)})),d.appendChild(s),d.appendChild(l),n.appendChild(c),n.appendChild(d),e.appendChild(n),e}())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVVxQyxLQXFCekMsU0FBY0EsR0FFVixNQUFNZ0MsRUFBV2hDLEVBQUVLLFdBQVdFLFFBQVEsY0FHaEM4QixFQUFZTCxFQUFTRCxXQUFXQSxXQUFXeEQsTUhyR3JELElBQWtCVixFR3VHZG1FLEVBQVNNLHNCQUFzQixXQUFZMUMsRUFBZXlDLElIdkc1Q3hFLEVHeUdMd0UsRUh4R1R6RixFQUFjMkYsS0FBSzFFLEdBQ25CVCxhQUFhRyxRQUFRLGdCQUFpQlgsR0cwR3RDNkQsRUFBT1QsRUFDWCxDQWpDUXdDLENBQUt4QyxFQUFDLElBRVZvQyxFQUFhekUsaUJBQWlCLFNBQVVxQyxJQUNwQ1MsRUFBT1QsRUFBQyxJQUlaa0MsRUFBZXZELFlBQVl3RCxHQUMzQkQsRUFBZXZELFlBQVl5RCxHQUczQmhFLEVBQUtPLFlBQVlzRCxHQUNqQjdELEVBQUtPLFlBQVl1RCxHQUdqQkYsRUFBU3JELFlBQVlQLEdBRWQ0RCxDQUNYLENBdEZ3QlMsR0FBWSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9qcy1tb2R1bGVzL3Byb2plY3RzLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvanMtbW9kdWxlcy90YXNrLWVkaXQtZG9tLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvanMtbW9kdWxlcy90YXNrLWNvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9qcy1tb2R1bGVzL3Byb2plY3RzLWNvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9qcy1tb2R1bGVzL3Rhc2stZG9tLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNyZWF0ZSBhcnJheSBmb3IgcHJvZ3JhbSB0byBydW4gb2ZmXG5sZXQgcHJvamVjdFRpdGxlcyA9IFtdXG5cbi8vIGNoZWNrIGlmIHRoZXJlIGlzIGFueSBsb2NhbHN0b3JhZ2UsIGlmIG5vdCBjcmVhdGUgbmV3IGFycmF5IGluIGxvY2Fsc3RvcmFnZVxuaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvamVjdFRpdGxlcycpKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RUaXRsZXMnLCBbXSlcbiAgfSBlbHNlIHtcbiAgICAvLyBsb2FkIGxvY2FsU3RvcmFnZSBkYXRhIGludG8gbWVtb3J5XG4gICAgcHJvamVjdFRpdGxlcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0VGl0bGVzJykuc3BsaXQoJywnKVxuICB9XG5cbmZ1bmN0aW9uIGFkZFRpdGxlKHRpdGxlKSB7XG4gICAgcHJvamVjdFRpdGxlcy5wdXNoKHRpdGxlKVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0VGl0bGVzJywgcHJvamVjdFRpdGxlcylcbn1cblxuZnVuY3Rpb24gZ2V0VGl0bGVzKCkge1xuICAgIHJldHVybiBwcm9qZWN0VGl0bGVzO1xufVxuXG5mdW5jdGlvbiBkZWxldGVUaXRsZSh0aXRsZSkge1xuICAgIGNvbnN0IGluZGV4ID0gcHJvamVjdFRpdGxlcy5pbmRleE9mKHRpdGxlKTtcbiAgICBpZiAoaW5kZXggPiAtMSkgeyAvLyBvbmx5IHNwbGljZSBhcnJheSB3aGVuIGl0ZW0gaXMgZm91bmRcbiAgICAgICAgcHJvamVjdFRpdGxlcy5zcGxpY2UoaW5kZXgsIDEpOyAvLyAybmQgcGFyYW1ldGVyIG1lYW5zIHJlbW92ZSBvbmUgaXRlbSBvbmx5XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0VGl0bGVzJywgcHJvamVjdFRpdGxlcylcbiAgICB9XG59XG5cbmV4cG9ydCB7YWRkVGl0bGUsIGdldFRpdGxlcywgZGVsZXRlVGl0bGV9O1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlVGFza0VkaXQgKHRpdGxlLCBkYXRlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHkpIHtcbiAgICAvL2NyZWF0ZSBkaXYgdG8gaG9sZCBhbGwgdGhlIGVsZW1lbnRzXG4gICAgY29uc3QgdGFza0Zvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRhc2tGb3JtLmNsYXNzTGlzdC5hZGQoJ3Rhc2stc3BhbicpXG4gICAgdGFza0Zvcm0uY2xhc3NMaXN0LmFkZCgndGFzay1mb3JtJylcblxuICAgIC8vY3JlYXRlIHRoZSBmb3JtIFxuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJylcbiAgICBmb3JtLnNldEF0dHJpYnV0ZSgnYWN0aW9uJywgJycpXG4gICAgZm9ybS5zZXRBdHRyaWJ1dGUoJ21ldGhvZCcsICdwb3N0JylcblxuICAgIC8vc3RhcnQgYnkgY3JlYXRpbmcgZWxlbWVudHMgZm9yIHRoZSB0b3Agb2YgdGhlIGZvcm1cbiAgICAvL3RoZSB0aXRsZSBhbmQgZGF0ZSBhcmUgaW5sY3VkZWQgaGVyZVxuICAgIGNvbnN0IHRvcEVkaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRvcEVkaXQuY2xhc3NMaXN0LmFkZCgndG9wLWZvcm0tdGFzaycpXG5cbiAgICAvL2lucHV0IGZvciB0aGUgdGl0bGVcbiAgICBjb25zdCBlZGl0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgZWRpdFRpdGxlLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0JylcbiAgICBlZGl0VGl0bGUuc2V0QXR0cmlidXRlKCdpZCcsICd0aXRsZS1lZGl0JylcbiAgICBlZGl0VGl0bGUuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsICdUaXRsZScpXG4gICAgZWRpdFRpdGxlLnNldEF0dHJpYnV0ZSgnbmFtZScsICd0aXRsZS1lZGl0JylcbiAgICBlZGl0VGl0bGUuc2V0QXR0cmlidXRlKCdtYXhsZW5ndGgnLCAnMjAnKVxuICAgIGVkaXRUaXRsZS52YWx1ZSA9IHRpdGxlIC8vVE8gRE9cblxuICAgIC8vaW5wdXQgZm9yIHRoZSBkYXRlXG4gICAgY29uc3QgZGF0ZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgY29uc3QgZGF0ZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKVxuICAgIGRhdGVMYWJlbC50ZXh0Q29udGVudCA9ICdEYXRlOiAnXG4gICAgZGF0ZUxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJ2RhdGUnKVxuICAgICBcbiAgICBjb25zdCBpbnB1dERhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgaW5wdXREYXRlLnNldEF0dHJpYnV0ZSgndHlwZScsICdkYXRlJylcbiAgICBpbnB1dERhdGUuc2V0QXR0cmlidXRlKCdpZCcsICdkYXRlJylcbiAgICBpbnB1dERhdGUuc2V0QXR0cmlidXRlKCduYW1lJywgJ2RhdGUnKVxuICAgIGlucHV0RGF0ZS52YWx1ZSA9IGRhdGUgLy9UTyBET1xuXG4gICAgLy9hcHBlbmQgdGhlIHRvcCB0b2dldGhlciBhbmQgYWRkIGl0IHRvIHRoZSBmdWxsIGZvcm1cbiAgICBkYXRlRGl2LmFwcGVuZENoaWxkKGRhdGVMYWJlbClcbiAgICBkYXRlRGl2LmFwcGVuZENoaWxkKGlucHV0RGF0ZSlcblxuICAgIHRvcEVkaXQuYXBwZW5kQ2hpbGQoZWRpdFRpdGxlKVxuICAgIHRvcEVkaXQuYXBwZW5kQ2hpbGQoZGF0ZURpdilcblxuICAgIGZvcm0uYXBwZW5kQ2hpbGQodG9wRWRpdClcblxuICAgIC8vY3JlYXRlIHRoZSB0ZXh0YXJlYVxuICAgIGNvbnN0IHRleHRBcmVhRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0ZXh0QXJlYURpdi5jbGFzc0xpc3QuYWRkKCd0ZXh0YXJlYS1kaXYnKVxuXG4gICAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpXG4gICAgdGV4dEFyZWEuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsICdEZXNjcmlwdGlvbicpXG4gICAgdGV4dEFyZWEudmFsdWUgPSBkZXNjcmlwdGlvbiAvL1RPIERPIFxuXG4gICAgdGV4dEFyZWFEaXYuYXBwZW5kQ2hpbGQodGV4dEFyZWEpXG4gICAgZm9ybS5hcHBlbmRDaGlsZCh0ZXh0QXJlYURpdilcblxuICAgIC8vY3JlYXRlIHRoZSBib3R0b20gb2YgdGhlIGZvcm1cbiAgICBjb25zdCBsb3dlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgbG93ZXJEaXYuY2xhc3NMaXN0LmFkZCgnbG93ZXItZm9ybS10YXNrJylcblxuICAgIGNvbnN0IGVuY29tcGFzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICAgIGNvbnN0IHByaW9yaXR5TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpXG4gICAgcHJpb3JpdHlMYWJlbC50ZXh0Q29udGVudCA9ICdQcmlvcml0eTogJ1xuICAgIHByaW9yaXR5TGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCAncHJpb3JpdHknKVxuXG4gICAgY29uc3QgcHJpb3JpdHlTZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKVxuICAgIHByaW9yaXR5U2VsZWN0LnNldEF0dHJpYnV0ZSgnbmFtZScsICdwcmlvcml0eScpXG4gICAgcHJpb3JpdHlTZWxlY3Quc2V0QXR0cmlidXRlKCdpZCcsICdwcmlvcml0eScpXG4gICAgcHJpb3JpdHlTZWxlY3QudmFsdWUgPSBwcmlvcml0eSAvL1RPIERPXG5cbiAgICAvL3VzZSBhIGxvb3AgdG8gYWRkIDMgb3B0aW9ucyB0byB0aGUgRE9NXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0zOyBpKyspIHtcbiAgICAgICAgLy91c2UgYSBmdW5jdGlvbiB0byByZXR1cm4gdGhlIERPTSBvcHRpb24gZWxlbWVudFxuICAgICAgICBwcmlvcml0eVNlbGVjdC5hcHBlbmRDaGlsZChjcmVhdGVPcHRpb24oaSkpXG4gICAgfVxuXG4gICAgLy9hcHBlbmQgdGhlIHByaW9yaXR5IGVsZW1lbnRzIHRvIHRoZSBkaXZcbiAgICBlbmNvbXBhc0Rpdi5hcHBlbmRDaGlsZChwcmlvcml0eUxhYmVsKVxuICAgIGVuY29tcGFzRGl2LmFwcGVuZENoaWxkKHByaW9yaXR5U2VsZWN0KVxuXG4gICAgLy8gY3JlYXRlIHRoZSBTYXZlIGFuZCBEZWxldGUgYnV0dG9ucyBpbiB0aGVpciBvd24gZGl2XG4gICAgY29uc3QgYnV0dG9uRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICAgIGNvbnN0IGRlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgZGVsQnV0dG9uLnRleHRDb250ZW50ID0gJ0RlbCdcbiAgICBkZWxCdXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpXG5cbiAgICBjb25zdCBzYXZlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICBzYXZlQnV0dG9uLnRleHRDb250ZW50ID0gJ1NhdmUnXG4gICAgc2F2ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJylcblxuICAgIGJ1dHRvbkRpdi5hcHBlbmRDaGlsZChkZWxCdXR0b24pXG4gICAgYnV0dG9uRGl2LmFwcGVuZENoaWxkKHNhdmVCdXR0b24pXG5cbiAgICAvLyBhcHBlbmQgdGhlIGxvd2VyIGVsZW1lbnRzIFxuICAgIGxvd2VyRGl2LmFwcGVuZENoaWxkKGVuY29tcGFzRGl2KVxuICAgIGxvd2VyRGl2LmFwcGVuZENoaWxkKGJ1dHRvbkRpdilcbiAgICAvL2FwcGVuZCB0aGUgbG93ZXIgZGl2IHRvIHRoZSBmb3JtXG4gICAgZm9ybS5hcHBlbmRDaGlsZChsb3dlckRpdilcbiAgICAvL2FwcGVuZCBmb3JtIHRvIHRoZSB0YXNrIGRpdlxuICAgIHRhc2tGb3JtLmFwcGVuZENoaWxkKGZvcm0pXG5cbiAgICByZXR1cm4gdGFza0Zvcm1cbn1cblxuLy8gY3JlYXRlcyBvcHRpb25zIGZvciB0aGUgcHJpb3JpdHkgZWxlbWVudFxuZnVuY3Rpb24gY3JlYXRlT3B0aW9uIChpKSB7XG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJylcbiAgICBvcHRpb24udGV4dENvbnRlbnQgPSBpXG4gICAgb3B0aW9uLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBpKVxuICAgIHJldHVybiBvcHRpb25cbn0iLCJpbXBvcnQgdGFzayBmcm9tICcuL3Rhc2stb2JqZWN0LmpzJ1xuaW1wb3J0IGNyZWF0ZVRhc2sgZnJvbSAnLi90YXNrLWRvbS5qcydcbmltcG9ydCBjcmVhdGVUYXNrRWRpdCBmcm9tICcuL3Rhc2stZWRpdC1kb20uanMnXG5cbi8vIGNyZWF0ZSBhbiBhcnJheSB0byBzdG9yZSBhbGwgdGhlIHRhc2tzXG5sZXQgYWxsVGFza3MgPSBbXVxuXG4vL2FkZCBldmVudCBsaXN0ZW5lciB0byArQWRkIFRhc2sgYnV0dG9uXG5jb25zdCBhZGRUYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10YXNrJylcbmFkZFRhc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgLy8gTmVlZCB0byBwdXQgYSB0YXNrLWVkaXQgYWJvdmUgK0FkZCBUYXNrXG4gICAgY29uc3QgdGFza3NEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFza3MnKVxuICAgIHRhc2tzRGl2Lmluc2VydEJlZm9yZShjcmVhdGVUYXNrRWRpdChudWxsLCBudWxsLCBudWxsLCAzKSwgYWRkVGFzaylcbn0pXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlbmRlclRhc2tzIChtZW51U2VsZWN0ZWQpIHtcbiAgICAvLyBmaXJzdCByZW1vdmUgdGhlIGN1cnJlbnQgdGFza3NcbiAgICByZW1vdmVUYXNrcygpXG5cbiAgICAvLyBjcmVhdGUgYSBuZXcgYXJyYXkgdGhhdCBob2xkcyBvbmx5IHRoZSByZXF1aXJlZCB0YXNrcyBmcm9tIHRoZSBwcm9qZWN0XG4gICAgY29uc3QgbmV3QXJyYXkgPSBhbGxUYXNrcy5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICAgIGlmIChtZW51U2VsZWN0ZWQgPT0gXCJUb2RheVwiKSB7XG4gICAgICAgICAgICAvLyBUTyBET1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1lbnVTZWxlY3RlZCA9PSBcIkltcG9ydGFudFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS5nZXRQcmlvcml0eSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWVudVNlbGVjdGVkID09IFwiQWxsXCIpIHtyZXR1cm4gdHJ1ZX1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS5nZXRQcm9qZWN0ID0gbWVudVNlbGVjdGVkOyBcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vIFNlbGVjdCB0aGUgYWRkIHRhc2sgXG4gICAgY29uc3QgYWRkVGFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdGFzaycpXG4gICAgLy8gc2VsZWN0IHRhc2tzIGRpdlxuICAgIGNvbnN0IHRhc2tzRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2tzJylcbiAgICAvL2xvb3AgdGhyb3VnaCB0aGUgbmV3IGFycmF5IGFuZCByZW5kZXIgdGhlIHRhc2tzXG4gICAgbmV3QXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAvLyBhZGQgbmV3IGVsZW1lbnRzIGJlZm9yZSArIEFkZCBUYXNrXG4gICAgICAgIGNvbnN0IGVsZSA9IGNyZWF0ZVRhc2soaXRlbS5nZXRUaXRsZSgpLCBpdGVtLmdldERhdGUoKSlcbiAgICAgICAgdGFza3NEaXYuaW5zZXJ0QmVmb3JlKGVsZSwgYWRkVGFzaylcbiAgICB9KVxufVxuXG4vLyB3aGVuIHJlbmRlclRhc2tzKCkgaXMgY2FsbGVkLCB1c2UgdGhpcyBmdW5jdGlvbiB0byBkZWxldGUgdGhlIGN1cnJlbnQgdGFza3NcbmZ1bmN0aW9uIHJlbW92ZVRhc2tzICgpIHtcbiAgICAvLyBjcmVhdGUgbm9kZSBsaXN0cyBvZiBhbGwgY3VycmVudCB0YXNrcyBpbiB0aGUgRE9NXG4gICAgY29uc3QgYWxsVGFza3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFzay1zcGFuJylcbiAgICAvLyByZW1vdmUgZWFjaCB0YXNrXG4gICAgYWxsVGFza3MuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBpdGVtLnJlbW92ZSgpXG4gICAgfSk7XG59XG5cbiIsImltcG9ydCB7IGFkZFRpdGxlLCBnZXRUaXRsZXMsIGRlbGV0ZVRpdGxlfSBmcm9tIFwiLi9wcm9qZWN0c1wiXG5pbXBvcnQgcmVuZGVyVGFza3MgZnJvbSBcIi4vdGFzay1jb250cm9sLmpzXCJcblxuLy9BZGQgZXZlbnRzIHRvIHRoZSBkZWZhdWx0IG1lbnUgb3B0aW9uc1xuY29uc3QgbWVudUl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtaXRlbScpXG5tZW51SXRlbXMuZm9yRWFjaChhZGRNZW51SXRlbUV2ZW50KVxuXG4vLyBMb2FkIGxvY2FsU3RvcmFnZSBkYXRhIGludG8gdGhlIERPTVxuY29uc3QgbWVudVRpdGxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cycpXG5jb25zdCBhcnJheSA9IGdldFRpdGxlcygpXG5mb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgbWVudVRpdGxlcy5hcHBlbmRDaGlsZChjcmVhdGVNZW51SXRlbShhcnJheVtpXSkpXG59XG5cbi8vIEV2ZW50IGxpc3RlbmVyIGZvciB0aGUgXCIrXCIgYnV0dG9uIGJlc2lkZSBwcm9qZWN0IHRpdGxlXG5jb25zdCBwbHVzQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtdGl0bGUgPiBzdmcnKVxucGx1c0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAvL0NhbGxzIGZ1bmN0aW9uIHRvIGFkZCB0aGUgcHJvamVjdCBmb3JtIHRvIHRoZSBET01cbiAgICBjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzJylcbiAgICBwcm9qZWN0LmFwcGVuZENoaWxkKGNyZWF0ZUZvcm0oKSlcblxufSlcblxuLy8gUmV0dXJucyB0aGUgRE9NIGVsZW1lbnQgb2YgYSBtZW51LWl0ZW0gXG4vLyBhIHNpbXBsZSBwcm9qZWN0IGlzIGFkZGVkIHRvIHRoZSBsaXN0IG9uIHRoZSBET01cbmZ1bmN0aW9uIGNyZWF0ZU1lbnVJdGVtKHRpdGxlKSB7XG4gICAgLy8gIGNyZWF0ZSB0aGUgbWVudS1pdGVtIGRpdiB0byBob2xkIHRoZSBlbGVtZW50c1xuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoJ21lbnUtaXRlbScpXG4gICAgLy8gY3JlYXRlIHRoZSB0aXRsZSBkaXZcbiAgICBjb25zdCB0aXRsZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGl0bGVEaXYudGV4dENvbnRlbnQgPSB0aXRsZVxuICAgIC8vIGNyZWF0ZSB0aGUgdHJhc2ggYmluIGltZ1xuICAgIGNvbnN0IHRyYXNoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcbiAgICB0cmFzaC5zZXRBdHRyaWJ1dGUoJ3NyYycsICcuL2ltYWdlcy90cmFzaC0yLnN2ZycpXG4gICAgdHJhc2guc2V0QXR0cmlidXRlKCdhbHQnLCAndHJhc2ggaWNvbicpXG5cbiAgICAvLyBhZGQgZXZlbnRsaXN0ZW5lciB0byB0cmFzaCBpY29uXG4gICAgdHJhc2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBkZWxldGVUaXRsZShlLnNyY0VsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZy50ZXh0Q29udGVudClcbiAgICAgICAgZS5zcmNFbGVtZW50LmNsb3Nlc3QoJy5tZW51LWl0ZW0nKS5yZW1vdmUoKVxuICAgIH0pXG5cbiAgICAvLyBhcHBlbmQgdGhlIHR3byBjaGlsZHJlblxuICAgIGRpdi5hcHBlbmRDaGlsZCh0aXRsZURpdilcbiAgICBkaXYuYXBwZW5kQ2hpbGQodHJhc2gpXG5cbiAgICBhZGRNZW51SXRlbUV2ZW50KGRpdilcbiAgICBcbiAgICByZXR1cm4gZGl2XG59XG5cbi8vIHJldHVybnMgYSBmb3JtIGZvciBET00gdG8gYmUgdXNlZCB0byBjcmVhdGUgYSBuZXcgcHJvamVjdFxuZnVuY3Rpb24gY3JlYXRlRm9ybSgpIHtcbiAgICAvLyBjcmVhdGUgdGhlIGRpdiB0aGF0IGVuY29tcGFzc2VzIHRoZSBlbnRpcmUgYmxvY2tcbiAgICBjb25zdCBtZW51Rm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgbWVudUZvcm0uY2xhc3NMaXN0LmFkZCgnbWVudS1mb3JtJylcblxuICAgIC8vIGNyZWF0ZSB0aGUgZm9ybSBhbmQgYWRkIGF0dHJpYnV0ZXNcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpXG4gICAgZm9ybS5zZXRBdHRyaWJ1dGUoJ2FjdGlvbicsIFwiXCIpXG4gICAgZm9ybS5zZXRBdHRyaWJ1dGUoJ21ldGhvZCcsICdwb3N0JylcblxuICAgIC8vIGNyZWF0ZSB0aGUgaW5wdXQgYm94IGZvciB0ZXh0XG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKVxuICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnaWQnLCAncHJvamVjdC10aXRsZScpXG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgJ3Byb2plY3RUaXRsZScpXG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCdtYXhsZW5ndGgnLCAnMTUnKVxuXG4gICAgLy8gY3JlYXRlIGRpdiB0byBlbmNvbXBhc3MgYnV0dG9uc1xuICAgIGNvbnN0IHByb2plY3RCdXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBwcm9qZWN0QnV0dG9ucy5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWJ1dHRvbnMnKVxuXG4gICAgLy9jcmVhdGUgdGhlIGJ1dHRvbnNcbiAgICBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgIGFkZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdhZGQtYnV0dG9uJylcbiAgICBhZGRCdXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpXG4gICAgYWRkQnV0dG9uLnRleHRDb250ZW50ID0gXCJBZGRcIlxuXG4gICAgY29uc3QgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICBjYW5jZWxCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2FuY2VsLWJ1dHRvbicpXG4gICAgY2FuY2VsQnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKVxuICAgIGNhbmNlbEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ2FuY2VsXCJcblxuICAgIC8vIGFkZCBldmVudGxpc3RlbmVyc1xuICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIHNhdmUoZSlcbiAgICB9KVxuICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGNhbmNlbChlKVxuICAgIH0pXG5cbiAgICAvLyBBcHBlbmQgdGhlIGJ1dHRvbnMgdG8gcHJvamVjdEJ1dHRvbnNcbiAgICBwcm9qZWN0QnV0dG9ucy5hcHBlbmRDaGlsZChhZGRCdXR0b24pXG4gICAgcHJvamVjdEJ1dHRvbnMuYXBwZW5kQ2hpbGQoY2FuY2VsQnV0dG9uKVxuXG4gICAgLy8gQXBwZW5kIGlucHV0IHRvIGZvcm0gdGhlbiBwcm9qZWN0QnV0dG9ucyB0byBmb3JtXG4gICAgZm9ybS5hcHBlbmRDaGlsZChpbnB1dClcbiAgICBmb3JtLmFwcGVuZENoaWxkKHByb2plY3RCdXR0b25zKVxuXG4gICAgLy8gYXBwZW5kIGZvcm0gdG8gdGhlIG1haW4gZGl2IChtZW51Rm9ybSlcbiAgICBtZW51Rm9ybS5hcHBlbmRDaGlsZChmb3JtKVxuXG4gICAgcmV0dXJuIG1lbnVGb3JtXG59XG5cbmZ1bmN0aW9uIHNhdmUoZSkge1xuICAgIC8vIHNlbGVjdCB0aGUgbWVudS1mb3JtIHBhcmVudCBub2RlXG4gICAgY29uc3QgbWVudUZvcm0gPSBlLnNyY0VsZW1lbnQuY2xvc2VzdCgnLm1lbnUtZm9ybScpXG4gICAgLy8gc2VsZWN0IHRoZSBjaGlsZCBvZiBtZW51LWZvcm0gYW5kIHRoZSBjaGlsZCBvZiB0aGF0IHRvIGFxdWlyZSB0aGUgaW5wdXQgbm9kZS5cbiAgICAvLyBUYWtlIHRoZSB2YWx1ZSBvZiB0aGUgaW5wdXQgbm9kZVxuICAgIGNvbnN0IGlucHV0VGV4dCA9IG1lbnVGb3JtLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZC52YWx1ZVxuICAgIC8vIGluc2VydCBhIG5ldyBtZW51IGl0ZW0gYWZ0ZXIgdGhlIGZvcm1cbiAgICBtZW51Rm9ybS5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgY3JlYXRlTWVudUl0ZW0oaW5wdXRUZXh0KSlcbiAgICAvLyBhZGQgdGhlIHRpdGxlIHRvIHRoZSBhcnJheSBcbiAgICBhZGRUaXRsZShpbnB1dFRleHQpXG5cbiAgICAvLyB3aGVuIGV2ZXJ5dGhpbmcgaXMgZG9uZSwgZGVsZXRlIHRoZSBmb3JtXG4gICAgY2FuY2VsKGUpXG59XG5cbi8vIGZ1bmN0aW9uIHVzZWQgdG8gZGVsZXRlIG1lbnUtZm9ybVxuZnVuY3Rpb24gY2FuY2VsKGUpIHtcbiAgICAvLyBmaW5kIHRoZSBjbG9zZXN0IG1lbnUgZm9ybSBhbmQgcmVtb3ZlIGl0XG4gICAgZS5zcmNFbGVtZW50LmNsb3Nlc3QoJy5tZW51LWZvcm0nKS5yZW1vdmUoKVxufVxuXG4vLyBhZGQgZXZlbnQgbGlzdGVuZXIgZm9yIGEgbWVudS1pdGVtXG5mdW5jdGlvbiBhZGRNZW51SXRlbUV2ZW50IChpdGVtKSB7XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIC8vIHJlbW92ZXMgdGhlIGNsYXNzIHRoYXQgaXMgaGlnaGxpZ2h0aW5nIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgaXRlbVxuICAgICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudS1zZWxlY3RlZCcpXG4gICAgICAgIC8vIG1ha2Ugc3VyZSBjdXJyZW50U2VsZWN0ZWQgaXNuJ3QgbnVsbCB0byBwcmV2ZW50IGFuIGVycm9yXG4gICAgICAgIC8vIGN1cnJlbnRTZWxlY3RlZCB3aWxsIGJlIG51bGwgd2hlbiB0aGUgdHJhc2ggaWNvbiBpcyBjbGlja2VkIHRvIGRlbGV0ZVxuICAgICAgICBpZiAoY3VycmVudFNlbGVjdGVkICE9IG51bGwpe1xuICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkLmNsYXNzTGlzdC5yZW1vdmUoJ21lbnUtc2VsZWN0ZWQnKVxuICAgICAgICB9XG4gICAgICAgIC8vYWRkIHRoZSBtZW51LXNlbGVjdGVkIGNsYXNzIHRvIHRoZSBpdGVtIHRoYXQgd2FzIHNlbGVjdGVkXG4gICAgICAgIGUuc3JjRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51LXNlbGVjdGVkJylcbiAgICAgICAgLy8gY2FsbCBmdW5jdGlvbiB0byByZW5kZXIgdGhlIHRhc2tzXG4gICAgICAgIHJlbmRlclRhc2tzKGUuc3JjRWxlbWVudC5maXJzdENoaWxkLnRleHRDb250ZW50KVxuICAgIH0pXG59XG4iLCIvLyBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0YXNrIGZvciB0aGUgRE9NXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVUYXNrICh0aXRsZSwgZGF0ZSkge1xuICAgIC8vY3JlYXRlIGRlZmF1bHQgZGl2IHRvIGhvbGQgYWxsIHRoZSBpbmZvXG4gICAgY29uc3QgdGFza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGFza0Rpdi5jbGFzc0xpc3QuYWRkKCd0YXNrJylcbiAgICB0YXNrRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2stc3BhbicpXG5cbiAgICAvL2NyZWF0ZSB0d28gaGFsdmVzIGZvciB0aGUgZGl2IFxuICAgIGNvbnN0IHRhc2tTdGFydCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgY29uc3QgdGFza0VuZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGFza1N0YXJ0LmNsYXNzTGlzdC5hZGQoJ3Rhc2stc3RhcnQnKVxuICAgIHRhc2tFbmQuY2xhc3NMaXN0LmFkZCgndGFzay1lbmQnKVxuXG4gICAgLy9jcmVhdGUgYnV0dG9uIHRvIGNvbXBsZXRlIHRhc2tcbiAgICBjb25zdCBjaGVja0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgIGNoZWNrQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NoZWNrLWJ1dHRvbicpXG5cbiAgICAvL2NyZWF0ZSBkaXYgdG8gaG9sZCB0aXRsZSBvZiB0YXNrXG4gICAgY29uc3QgdGFza1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LmFkZCgndGFzay10aXRsZScpXG4gICAgdGFza1RpdGxlLnRleHRDb250ZW50ID0gdGl0bGVcblxuICAgIC8vY3JlYXRlIGRpdiB0byBob2xkIHRoZSBkYXRlXG4gICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHRhc2tEYXRlLmNsYXNzTGlzdC5hZGQoJ3Rhc2stZGF0ZScpXG4gICAgdGFza0RhdGUudGV4dENvbnRlbnQgPSAnMS8yLzIwMjMnLy9UTyBET1xuXG4gICAgLy9jcmVhdGUgdGhlIGVkaXQgYnV0dG9uL2ltZ1xuICAgIGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxuICAgIGVkaXRCdXR0b24uc3JjID0gJ2ltYWdlcy9lZGl0LnN2ZydcbiAgICBlZGl0QnV0dG9uLnNldEF0dHJpYnV0ZSgnYWx0JywgJ2VkaXQgYnV0dG9uJylcblxuICAgIC8vIEFwcGVuZCBhbGwgZWxlbWVudHMgdG9nZXRoZXJcbiAgICB0YXNrRW5kLmFwcGVuZENoaWxkKHRhc2tEYXRlKVxuICAgIHRhc2tFbmQuYXBwZW5kQ2hpbGQoZWRpdEJ1dHRvbilcblxuICAgIHRhc2tTdGFydC5hcHBlbmRDaGlsZChjaGVja0J1dHRvbilcbiAgICB0YXNrU3RhcnQuYXBwZW5kQ2hpbGQodGFza1RpdGxlKVxuXG4gICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrU3RhcnQpXG4gICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrRW5kKVxuXG4gICAgcmV0dXJuIHRhc2tEaXZcbn0iXSwibmFtZXMiOlsicHJvamVjdFRpdGxlcyIsImNyZWF0ZU9wdGlvbiIsImkiLCJvcHRpb24iLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInNldEF0dHJpYnV0ZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzcGxpdCIsInNldEl0ZW0iLCJhbGxUYXNrcyIsImFkZFRhc2siLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImluc2VydEJlZm9yZSIsInRpdGxlIiwiZGF0ZSIsImRlc2NyaXB0aW9uIiwicHJpb3JpdHkiLCJ0YXNrRm9ybSIsImNsYXNzTGlzdCIsImFkZCIsImZvcm0iLCJ0b3BFZGl0IiwiZWRpdFRpdGxlIiwidmFsdWUiLCJkYXRlRGl2IiwiZGF0ZUxhYmVsIiwiaW5wdXREYXRlIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0QXJlYURpdiIsInRleHRBcmVhIiwibG93ZXJEaXYiLCJlbmNvbXBhc0RpdiIsInByaW9yaXR5TGFiZWwiLCJwcmlvcml0eVNlbGVjdCIsImJ1dHRvbkRpdiIsImRlbEJ1dHRvbiIsInNhdmVCdXR0b24iLCJjcmVhdGVUYXNrRWRpdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkTWVudUl0ZW1FdmVudCIsIm1lbnVUaXRsZXMiLCJhcnJheSIsImxlbmd0aCIsImNyZWF0ZU1lbnVJdGVtIiwiZGl2IiwidGl0bGVEaXYiLCJ0cmFzaCIsImUiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJkZWxldGVUaXRsZSIsInNyY0VsZW1lbnQiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiY2xvc2VzdCIsInJlbW92ZSIsImNhbmNlbCIsIml0ZW0iLCJjdXJyZW50U2VsZWN0ZWQiLCJtZW51U2VsZWN0ZWQiLCJuZXdBcnJheSIsImZpbHRlciIsImdldFByaW9yaXR5IiwiZ2V0UHJvamVjdCIsInRhc2tzRGl2IiwiZWxlIiwidGFza0RpdiIsInRhc2tTdGFydCIsInRhc2tFbmQiLCJjaGVja0J1dHRvbiIsInRhc2tUaXRsZSIsInRhc2tEYXRlIiwiZWRpdEJ1dHRvbiIsInNyYyIsImNyZWF0ZVRhc2siLCJnZXRUaXRsZSIsImdldERhdGUiLCJyZW5kZXJUYXNrcyIsImZpcnN0Q2hpbGQiLCJtZW51Rm9ybSIsImlucHV0IiwicHJvamVjdEJ1dHRvbnMiLCJhZGRCdXR0b24iLCJjYW5jZWxCdXR0b24iLCJpbnB1dFRleHQiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJwdXNoIiwic2F2ZSIsImNyZWF0ZUZvcm0iXSwic291cmNlUm9vdCI6IiJ9